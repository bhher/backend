/*! @amzn/apswebapstaglibrary - web-client-bundle - v24.1209.2037 - 2024-12-09 20:37:08 */
!function(){"use strict";var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};function t(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}var i=function(){return i=Object.assign||function(n){for(var t,i=1,e=arguments.length;i<e;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},i.apply(this,arguments)};function e(n,t){var i={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(i[e]=n[e]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(n);r<e.length;r++)t.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(n,e[r])&&(i[e[r]]=n[e[r]])}return i}function r(n,t,i,e){return new(i||(i=Promise))((function(r,o){function u(n){try{c(e.next(n))}catch(n){o(n)}}function a(n){try{c(e.throw(n))}catch(n){o(n)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof i?t:new i((function(n){n(t)}))).then(u,a)}c((e=e.apply(n,t||[])).next())}))}function o(n,t){var i,e,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,a[0]&&(o=0)),o;)try{if(i=1,e&&(r=2&a[0]?e.return:a[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,a[1])).done)return r;switch(e=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,e=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(n,o)}catch(n){a=[6,n],e=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function u(n){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&n[t],e=0;if(i)return i.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(n,t){var i="function"==typeof Symbol&&n[Symbol.iterator];if(!i)return n;var e,r,o=i.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(e=o.next()).done;)u.push(e.value)}catch(n){r={error:n}}finally{try{e&&!e.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return u}function c(n,t,i){if(i||2===arguments.length)for(var e,r=0,o=t.length;r<o;r++)!e&&r in t||(e||(e=Array.prototype.slice.call(t,0,r)),e[r]=t[r]);return n.concat(e||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var d="24.1209.2037",s="listeners",v="_internal/history",l="_internal/pageLoadID",f="_internal/externalEventCount";function h(){var n,t,i,e;try{return!!new URLSearchParams(null!==(t=null===(n=window.top)||void 0===n?void 0:n.location.search)&&void 0!==t?t:window.location.search).has("apscoredebug")||null!==(e=null===(i=window._aps)||void 0===i?void 0:i.get("_system").store.get("_internal/coreDebugMode"))&&void 0!==e&&e}catch(n){return!1}}var p,m=function(){function n(){this.t=300,this.i="https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecords",this.o="79db72eb0b5c7255afa54a253df24fb4a5ac916bf40b51c730df8850aa5665ca",this.v=5e3,this.l=new Map([["error",0],["feat",0]]),this.p=new Map([["error",[]],["feat",[]]]),this.clearAndUpdateEventProcessingInterval(5e3)}return n.prototype.logEvent=function(n){var t,e=n.eventCategory,r=n.eventName,o=n.eventProperties,u="".concat(Date.now()),a={eventSource:"aps_web_client_library",eventTime:u,eventCategory:e,eventName:r,eventProperties:i({},o)};try{var c={Data:a,PartitionKey:u};null===(t=this.p.get(a.eventCategory))||void 0===t||t.push(c)}catch(n){}},n.prototype.setSampleRates=function(n){var t=function(n){return n<0?0:n>=0&&n<=1?n:1};"number"==typeof(null==n?void 0:n.error)&&this.l.set("error",t(n.error)),"number"==typeof(null==n?void 0:n.feat)&&this.l.set("feat",t(n.feat))},n.prototype.clearAndUpdateEventProcessingInterval=function(n){var t=this;"number"!=typeof n||n<=0||n!==this.m&&(clearInterval(this._),this._=setInterval((function(){try{t.processEventRecords()}catch(n){}}),n),this.m=n)},n.prototype.processEventRecords=function(){for(var n=[],t=Array.from(this.p.keys()),i=function(i){var r=t[i],o=e.p.get(r),u=e.l.get(r);if(void 0===o||o.length<=0)return"continue";if(void 0===u||0===u)return o.length>=e.v&&(o.length=0,e.logEvent({eventCategory:r,eventName:"queue limit reached"})),"continue";var d=o.filter((function(n){return void 0!==n&&u>=Math.random()}));o.length=0,n.push.apply(n,c([],a(d),!1))},e=this,r=0;r<t.length;r+=1)i(r);if(0!==n.length)for(r=0;r<n.length;r+=this.t)this.sendRecords(n.slice(r,r+this.t)).catch((function(n){}))},n.prototype.encodeRecords=function(n){return n.forEach((function(n){n.Data=window.btoa(JSON.stringify(n.Data))})),n},n.prototype.sendRecords=function(n){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.i,"?encoded=").concat(h()?"false":"true"),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.o},body:JSON.stringify({Records:h()?n:this.encodeRecords(n)})})];case 1:return t.sent(),[2]}}))}))},n}(),w={key:"_config/requestViewer/countryCode",default:"unknown"},y=function(){function n(){this.STACK_MAX_LENGTH=500,this.S=new m}return n.prototype.fireReferencePixel=function(n){Math.random()<.01&&this.logCoreError({id:"REFERENCE-".concat(n),error:new Error("REFERENCE-".concat(n)),account:null})},n.prototype.logCoreError=function(n){this.logError(i(i({},n),{isCore:!0}))},n.prototype.logCoreFeature=function(n){this.logFeature(i(i({},n),{isCore:!0}))},n.prototype.logError=function(n){var t;void 0!==n&&this.S.logEvent({eventCategory:"error",eventName:null!==(t=n.id)&&void 0!==t?t:"unknown",eventProperties:i(i(i({},n.props),this.getSharedEventProperties(n)),{error:{name:this.getErrorName(n.error),message:this.getErrorMessage(n.error),stack:this.getStackTraceMessage(n.error),context:this.getErrorContext(n.error)}})})},n.prototype.logFeature=function(n){var t;void 0!==n&&this.S.logEvent({eventCategory:"feat",eventName:null!==(t=n.id)&&void 0!==t?t:"unknown",eventProperties:i(i(i({},n.props),this.getSharedEventProperties(n)),{status:n.feature})})},n.prototype.setEventProcessingInterval=function(n){if("number"!=typeof n)throw new Error("Event processing interval must be a number.");this.S.clearAndUpdateEventProcessingInterval(n)},n.prototype.setEventSamplingRates=function(n){"number"==typeof(null==n?void 0:n.error)&&this.S.setSampleRates({error:n.error}),"number"==typeof(null==n?void 0:n.feature)&&this.S.setSampleRates({feat:n.feature})},n.prototype.getSharedEventProperties=function(n){var t;return{isCore:null!==(t=n.isCore)&&void 0!==t&&t,accountID:this.safelyGetAccountID(n.account),libraryVersion:d,url:this.getLocationHref(),hostname:this.getLocationHostname(),viewerCountryCode:this.getViewerCountryCode(n.account)}},n.prototype.safelyGetAccountID=function(n){var t="unknown";try{void 0!==(null==n?void 0:n.id)&&(t=n.id)}catch(n){try{t="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){t="Client Error: Unable to provide more information"}}return t},n.prototype.getLocationHref=function(){var n,t,i,e="";try{e=null!==(i=null===(t=null===(n=window.top)||void 0===n?void 0:n.location)||void 0===t?void 0:t.href)&&void 0!==i?i:""}catch(n){try{e="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){e="Client Error: Unable to provide more information"}}return e},n.prototype.getLocationHostname=function(){var n,t,i,e="";try{e=null!==(i=null===(t=null===(n=window.top)||void 0===n?void 0:n.location)||void 0===t?void 0:t.hostname)&&void 0!==i?i:""}catch(n){try{e="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){e="Client Error: Unable to provide more information"}}return e},n.prototype.getViewerCountryCode=function(n){var t="unknown";try{null!==n&&(t=n.use(w))}catch(n){try{t="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){t="Client Error: Unable to provide more information"}}return t},n.prototype.getStackTraceMessage=function(n){try{if("string"==typeof n)return"NO STACK: ERROR PASSED AS STRING";if(void 0===n.stack)return"NO STACK: error.stack IS UNDEFINED";if(n.stack.length>this.STACK_MAX_LENGTH){return n.stack.substring(0,this.STACK_MAX_LENGTH-5)+"[...]"}return n.stack}catch(n){return"NO STACK: ERROR ON RETRIEVAL"}},n.prototype.getErrorName=function(n){var t="unknown";try{"string"==typeof n?t=n:void 0!==n.name&&(t=n.name)}catch(n){try{t="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){t="Client Error: Unable to provide more information"}}return t},n.prototype.getErrorMessage=function(n){var t="unknown";try{"string"==typeof n?t=n:void 0!==n.message&&(t=n.message)}catch(n){try{t="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){t="Client Error: Unable to provide more information"}}return t},n.prototype.getErrorContext=function(n){var t,i="unknown";try{"string"!=typeof n&&"context"in n&&(i=null!==(t=n.context)&&void 0!==t?t:"")}catch(n){try{i="Client Error: ".concat(n.name.toString()," - ").concat(n.message)}catch(n){i="Client Error: Unable to provide more information"}}return i},n}(),b=new y;!function(n){n.postulate="postulate",n.genericError="error"}(p||(p={}));var g="24.1209.2037";function E(n,t,e){var r=new URL("https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecord"),o=i(i({},e),{eventSource:"aps_web_client_library",eventCategory:"web-client-scenarios.aps.amazon.dev"===(null==e?void 0:e.hostname)?n+"-debug-only":n,eventName:t,libraryVersion:g});Object.entries(o).forEach((function(n){var t=a(n,2),i=t[0],e=t[1];r.searchParams.append(i,e)})),fetch(r.toString(),{method:"GET",keepalive:!0,headers:{"x-api-key":"79db72eb0b5c7255afa54a253df24fb4a5ac916bf40b51c730df8850aa5665ca"}}).catch((function(){}))}var _,S,j,C,k={j:setInterval,C:function(){var n;return null===(n=window[I])||void 0===n?void 0:n[x]},I:function(n){var t;void 0===n&&(n=window);try{return(null===(t=n.top)||void 0===t?void 0:t.location)||{href:"unknown",hostname:"unknown"}}catch(n){return{href:"unknown",hostname:"unknown"}}},O:E,A:function(n,t){return{eventTime:O((function(){return"".concat(Date.now())})),accountID:O((function(){return null==n?void 0:n.accountID})),libraryVersion:g,url:O((function(){return t().href})),hostname:O((function(){return t().hostname})),message:O((function(){return null==n?void 0:n.message})),condition:O((function(){return null==n?void 0:n.condition}))}},R:function(n,t){var i,e;try{(null!=t?t:E)(p.genericError,"telemetry_core_failure",{errorName:null!==(i=null==n?void 0:n.name)&&void 0!==i?i:"unknown",errorMessage:null!==(e=null==n?void 0:n.message)&&void 0!==e?e:"unknown"})}catch(n){(null!=t?t:E)(p.genericError,"telemetry_core_failure")}}},I="_aps_telemetry",x="alarms";function O(n){var t;try{return null!==(t=n())&&void 0!==t?t:"undefined"}catch(n){return function(n){try{return n instanceof Error?"Access Error: ".concat(n.name," - ").concat(n.message):"Access Error: Unknown error type"}catch(n){return"Access Error: Unable to provide more information"}}(n)}}!function(n){n.push="push",n.listenerSuccess="listenerSuccess",n.direct="direct"}(_||(_={})),function(n){n.internal="internal",n.apstag="apstag",n.webpage="webpage",n.dtbm="dtbm"}(S||(S={})),function(n){n.completed="completed",n.waiting="waiting",n.cancelled="cancelled"}(j||(j={})),function(n){n.started="started",n.error="error",n.unknown="unknown",n.deactivated="deactivated"}(C||(C={}));var A=i(i({},j),C),R=new Map([["_config/config/didLoad",function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.write("config/loaded",!0),[2,j.completed]}))}))}],["_config/requestViewerCountry/define",function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){if(void 0===(null===(e=i.detail)||void 0===e?void 0:e.code))throw new Error("Missing country code");if("string"!=typeof(n=i.detail.code)||0===n.trim().length)throw new Error('Invalid country code: "'.concat(n,'"'));return t.update(w,(function(){return n})),[2,j.completed]}))}))}]]),P="apstag/configuration/fetch",M=new Map([[P,function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return(n=t.globalContext.document.createElement("script")).setAttribute("src","".concat("https://config.aps.amazon-adsystem.com/configs/").concat(t.id)),n.setAttribute("type","text/javascript"),n.setAttribute("async","async"),t.globalContext.document.head.appendChild(n),[4,new Promise((function(t,i){n.addEventListener("load",(function(){t()})),n.addEventListener("error",(function(n){i(n)}))}))];case 1:return i.sent(),[2,j.completed]}}))}))}]]),N="consent/isGPPListenerRegistered",D={key:"consent/isTCFAPIListenerRegistered",default:!1},U={key:"consent/TCData",default:void 0};function T(n,t){var i,e;return"string"==typeof(null==t?void 0:t.tcString)&&(null==t?void 0:t.tcString.length)>0||!0===(null===(e=null===(i=null==n?void 0:n.globalContext)||void 0===i?void 0:i.apstag)||void 0===e?void 0:e.isGDPRRegion)||!0===(null==t?void 0:t.gdprApplies)}function L(n,t){var i,e,r,o,u;return!0===(null===(e=null===(i=n.vendor)||void 0===i?void 0:i.consents)||void 0===e?void 0:e[793])&&(o=t,u=null===(r=n.purpose)||void 0===r?void 0:r.consents,(null!=o?o:[]).reduce((function(n,t){return n&&!0===(null==u?void 0:u[t])}),!0))}var z=function(n,t){var e={tcData:t,consents:[1]},r=function(n){try{return n()}catch(n){return"error"}};return{tcT:r((function(){return n.isAPStagAllowedToAccessInfoOnDevice()})),tcCC:r((function(){return function(n){var t,i=n.account,e=n.tcData,r=n.consents;if(!T(i,e))return!0;if("object"!=typeof e)return!1;if((null!==(t=e.tcfPolicyVersion)&&void 0!==t?t:0)<2)return!1;if(e.useNonStandardStacks)return!1;if(!e.isServiceSpecific)return!1;var o=!1;return r.forEach((function(n){var t,i,u;switch(null===(u=null===(i=null===(t=e.publisher)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i[n])||void 0===u?void 0:u[793]){case 0:case 2:o=!0;break;default:L(e,r)||(o=!0)}})),!o}(i(i({},e),{account:n}))})),tcCF:r((function(){return 0===function(n){var t,i=n.tcData,e=n.consents;if(0===(null!=e?e:[]).length)return["No consents param passed"];var r=[];try{if("object"!=typeof i){var o="";try{o=JSON.stringify(i)}catch(n){}r.push("Invalid tcData: ".concat(o))}return!1===i.gdprApplies?[]:((null!==(t=i.tcfPolicyVersion)&&void 0!==t?t:0)<2&&r.push("tcData version not supported: ".concat(i.tcfPolicyVersion)),i.useNonStandardStacks&&r.push("tcData's useNonStandardStacks should not be true"),i.isServiceSpecific||r.push("tcData needs to be service specific"),e.forEach((function(n){var t,o,u;switch(null===(u=null===(o=null===(t=i.publisher)||void 0===t?void 0:t.restrictions)||void 0===o?void 0:o[n])||void 0===u?void 0:u[793]){case 0:r.push("Invalid publisher restrictions 0, consent ".concat(n));break;case 2:r.push("Invalid publisher restrictions 2, consent ".concat(n));break;default:L(i,e)||r.push("Invalid publisher restrictions default, consent ".concat(n))}})),r)}catch(n){if(r.length>0)return r;throw n}}(e).length})),PRA:r((function(){return T(n,t)}))}},J="consent/gppapi/attemptSync",F="consent/gppapi/didChange",q="consent/gppapi/syncData",B="consent/tcfapi/attemptSync",V="consent/tcfapi/didChange",K=new Map([[J,function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return void 0===t.globalContext.__gpp||!0===t.read(N)?[2,j.cancelled]:[4,t.record(q)];case 1:return i.sent(),n=t.globalContext.__gpp("addEventListener",(function(n){"error"!==(null==n?void 0:n.eventName)&&t.record(F,{eventListener:n,fromAddEvent:!0}).catch((function(n){}))})),t.write(N,"listenerRegistered"===(null==n?void 0:n.eventName)&&!0===(null==n?void 0:n.data)),[2,j.completed]}}))}))}],[F,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){switch(r.label){case 0:return[4,t.record(q,{eventListener:null===(n=i.detail)||void 0===n?void 0:n.eventListener,fromAddEvent:null===(e=i.detail)||void 0===e?void 0:e.fromAddEvent})];case 1:return r.sent(),[2,j.completed]}}))}))}],[q,function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r,u,c,d,s,v,l,f,h,p,m,w,y,b;return o(this,(function(o){return(null!==(p=null===(h=null===(f=null===(l=e.detail)||void 0===l?void 0:l.eventListener)||void 0===f?void 0:f.pingData)||void 0===h?void 0:h.gppString)&&void 0!==p?p:"").length>0?(n=null===(w=null===(m=e.detail)||void 0===m?void 0:m.eventListener)||void 0===w?void 0:w.pingData,c="addEventListener"):(s=a(function(n){var t,i,e;try{var r=n.globalContext.__gpp("ping",(function(n,t){t&&"object"==typeof n&&(i=n)}));void 0===i&&(null!==(t=null==r?void 0:r.gppString)&&void 0!==t?t:"").length>0&&(i=r)}catch(n){e="E:ping: ".concat(n)}return[i,e]}(t),2),n=s[0],u=s[1],c="ping","object"!=typeof n&&(v=a(function(n){var t,e;try{var r=n.globalContext.__gpp("getGPPData");t=i(i({},r),r.pingData)}catch(n){e="E:getGPPData: ".concat(n)}return[t,e]}(t),2),n=v[0],r=v[1],c="getGPPData")),d={gpp:{gppLength:"string"==typeof(null==n?void 0:n.gppString)?n.gppString.length:void 0,isGPPTilde:(null!==(y=null==n?void 0:n.gppString)&&void 0!==y?y:"").includes("~"),error10:r,error:u,gppVersion:null==n?void 0:n.gppVersion,cmpId:null==n?void 0:n.cmpId,method:c,fromAddEvent:null===(b=e.detail)||void 0===b?void 0:b.fromAddEvent}},t.write("consent/GPPData",n),[2,{status:j.completed,analytics:d}]}))}))}],[B,function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){return n=t.use(D),void 0===t.globalContext.__tcfapi||n?[2,j.cancelled]:(t.globalContext.__tcfapi("addEventListener",2,(function(n,i){t.record(V,{tcData:n,success:i}).catch((function(n){}))})),[2,j.completed])}))}))}],[V,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u;return o(this,(function(o){return n=null===(r=i.detail)||void 0===r?void 0:r.success,t.update(D,(function(t){return t||!0===n})),e=null===(u=i.detail)||void 0===u?void 0:u.tcData,t.update(U,(function(t){return void 0!==e||!0===n?e:t})),"object"!=typeof e?[2,j.completed]:[2,{status:j.completed,analytics:z(t,e)}]}))}))}]]);function G(n,t,e,r){void 0===e&&(e="root"),void 0===r&&(r=".");var o={set:function(n,t){throw new Error('Cannot set property "'.concat(String(t),'": object is read-only'))},deleteProperty:function(n,t){throw new Error('Cannot delete property "'.concat(String(t),'": object is read-only'))},defineProperty:function(n,t){throw new Error('Cannot define property "'.concat(String(t),'": object is read-only'))},setPrototypeOf:function(n){throw new Error("Cannot set prototype: object is read-only")}},u=t[e];if(void 0===u&&function(n,t){var e,r=function(){return!1};!function(n,t,e){var r=window;void 0===r[I]&&(r[I]={}),void 0===r[I][x]&&(r[I][x]=[]);var o=r[I][x],u=t.toString();o.push({hash:n,context:i(i({},e),{condition:u})})}(n,r,t);var o=null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"Postulate violation: ".concat(n,", ").concat(r);throw new Error(o)}("ea3914",{message:'Unauthorized usage for "'.concat(e,'": No validator has been defined')}),null===u)return n;try{u(n,e)}catch(n){throw new Error('Validation failed for "'.concat(e,'": ').concat(n.message))}if(n instanceof Set)return n.forEach((function(n){G(n,t,"".concat(e,".value"))})),n;if(n instanceof Map)return n.forEach((function(n,i){G(i,t,"".concat(e,".key")),G(n,t,"".concat(e,".value"))})),n;if(Array.isArray(n))return n.map((function(n){return G(n,t,"".concat(e,"[]"))}));if("function"==typeof n)return new Proxy(n,{apply:function(n,i,r){return G(n.apply(i,r),t,"".concat(e,"()"))}});try{var a=i(i({},o),{get:function(n,i,o){var u=Reflect.get(n,i,o);return"symbol"==typeof i||["asymmetricMatch","nodeType"].includes(i)?u:G(u,t,"".concat(e).concat(r).concat(String(i)))},ownKeys:function(n){return Reflect.ownKeys(n).filter((function(n){var i="".concat(e).concat(r).concat(String(n));return void 0!==t[i]}))}});return new Proxy(n,a)}catch(t){return n}}var H=function(n){if("number"!=typeof n)throw new Error("must be a number")},Q=function(n){if("string"!=typeof n)throw new Error("must be a string")},W=function(n){if("boolean"!=typeof n)throw new Error("must be a boolean")},Y=function(n){if("object"!=typeof n||null===n||Array.isArray(n))throw new Error("must be a standard object")},Z=function(n){if(!Array.isArray(n))throw new Error("must be an array")};function X(n){return function(t){if(!1===n.includes(t))throw new Error("must be one of the following values: ".concat(JSON.stringify(n)))}}function $(n){return function(t,i){if(n===nn)throw new Error("isAny cannot be used within isOptional");null!=t&&n(t,i)}}var nn=function(){},tn=function(){function n(n){var t=n.scope,i=n.object,e=n.action,r=n.validators,o=n.handler;this.throwIfInvalid(t,i,e),this.name="".concat(t,"/").concat(i,"/").concat(e),this.handler=this.wrapHandler(o,r)}return n.prototype.wrapHandler=function(n,t){var e=this;return function(u){return r(e,void 0,void 0,(function(){var e,r;return o(this,(function(o){switch(o.label){case 0:return e=i(i({},e=u),{detail:G(e.customEvent.detail,null!==(r=null==t?void 0:t.detail)&&void 0!==r?r:{detail:nn},"detail")}),[4,n(e)];case 1:return[2,o.sent()]}}))}))}},n.prototype.throwIfInvalid=function(n,t,i){var e=/^[a-z0-9][a-zA-Z0-9]*$/;if(!e.test(n)||!e.test(t)||!e.test(i))throw new Error("scope, object, and action must be alphanumeric and start with a lowercase. Received: ".concat(n,", ").concat(t,", ").concat(i));if(/[A-Z]/.test(i)&&!/^(will|did)/i.test(i))throw new Error("action must be a single verb (or a single verb prefixed by 'will' or 'did'). Received: ".concat(i))},n}();function en(n){if(new Set(n.map((function(n){return n.name}))).size!==n.length)throw new Error("Duplicates found");return new Map(n.map((function(n){return[n.name,n.handler]})))}var rn="debugSession/end",on="prepend/events",un="populator/ran",an={key:"consent/hasPurposeOneConsent",default:!1},cn=function(){function n(n){var t=this;this.getItem=function(n){var i=t.globalContext.document.cookie.split("; ").reduce((function(t,i){var e=i.split("=");return e[0]===n?decodeURIComponent(e.slice(1).join("=")):t}),"");return i.length>0?i:null},this.removeItem=function(n,i){void 0===i&&(i="/"),t.setItem(n,"",0,i)},this.setItem=function(n,i,e,r){void 0===r&&(r="/");var o=new Date(e);if(!t.isValidDate(o))throw new Error("Invalid expiration date");t.globalContext.document.cookie="".concat(n,"=").concat(i,"; expires=").concat(o.toUTCString(),"; path=").concat(r,";")},this.globalContext=n}return n.prototype.isValidDate=function(n){return n instanceof Date&&!isNaN(n)},n}(),dn=["scope/objectName",rn,on];function sn(n){return null===n||"object"!=typeof n?n:n instanceof Date?new Date(n.getTime()):n instanceof Array?n.reduce((function(n,t){return n.push(sn(t)),n}),[]):n instanceof Set?Array.from(n.values()).reduce((function(n,t){return n.add(sn(t)),n}),new Set):n instanceof Map?Array.from(n.entries()).reduce((function(n,t){return n.set(t[0],sn(t[1])),n}),new Map):n instanceof Object?Object.keys(n).reduce((function(t,i){return t[i]=sn(n[i]),t}),{}):n}var vn,ln=function(){function n(n,t){var i,e,r=null!==(i=null==t?void 0:t.rootName)&&void 0!==i?i:In.rootName;this.globalContext=null!==(e=null==t?void 0:t.globalContext)&&void 0!==e?e:In.globalContext;var o=this.globalContext[r].get(n);if(null==o)throw new Error('Missing "'.concat(n,'" account in userspace object'));this.id=n,this.store=o.store,this.queue=o.queue,this.store.has("listeners")||this.store.set("listeners",new Map)}return n.prototype.record=function(n,t){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r,o){e.queue.push(new CustomEvent(n,{detail:i({resolve:r,reject:o,source:S.internal},t)}))}))];case 1:return[2,r.sent()]}}))}))},n.prototype.recordListener=function(n,t){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r,o){e.queue.push(new CustomEvent(n.name,{detail:i({resolve:r,reject:o,source:S.internal},t)}))}))];case 1:return[2,r.sent()]}}))}))},n.prototype.recordListenerNonBlocking=function(n,t){this.recordListener(n,t).catch((function(n){}))},n.prototype.read=function(n,t){var i,e,r,o,u=this.store.get(n);if(void 0!==u)return u;if(void 0!==(null==t?void 0:t.persist)&&t.persist){var d=this.readLocalStorage(n,{usePrefix:!0});if(void 0!==d)return d}var s=null===(e=null===(i=null==t?void 0:t.default)||void 0===i?void 0:i.generators)||void 0===e?void 0:e.get(n);return void 0!==s?s.apply(void 0,c([],a(null!==(o=null===(r=null==t?void 0:t.default)||void 0===r?void 0:r.args)&&void 0!==o?o:[]),!1)):void 0},n.prototype.write=function(n,t,i){this.store.set(n,t),void 0!==(null==i?void 0:i.persist)&&i.persist&&this.writeLocalStorage(n,t,{usePrefix:!0})},n.prototype.use=function(n,t){var i,e=this.store.get(n.key);if(void 0!==e)i=e;else if(void 0!==(null==t?void 0:t.persist)&&t.persist){var r=this.readLocalStorage(n.key,{usePrefix:!0});null!=r&&(i=r)}var o=null!=i?i:n.default;if("function"==typeof o||!1===(null==t?void 0:t.structuredClone))return o;try{return structuredClone(o)}catch(n){try{return sn(o)}catch(n){return b.logCoreError({id:"Core.library.Account.use",account:null,error:n}),o}}},n.prototype.update=function(n,t,i){var e=t(this.use(n,i));if(void 0!==n.postProcessor&&(e=n.postProcessor(e)),this.store.set(n.key,e),void 0!==(null==i?void 0:i.persist)&&i.persist){if("string"!=typeof e)throw new Error("".concat(JSON.stringify(e)," must be a string to be writtable to browser storage"));this.writeLocalStorage(n.key,e,{usePrefix:!0})}},n.prototype.delete=function(n,t){this.store.delete(n),void 0!==(null==t?void 0:t.persist)&&t.persist&&this.deleteLocalStorage(n,{usePrefix:!0})},n.prototype.remove=function(n,t){this.store.delete(n.key),void 0!==(null==t?void 0:t.persist)&&t.persist&&this.deleteLocalStorage(n.key,{usePrefix:!0})},n.prototype.executeFuncWithConsent=function(n,t){if(!this.isAllowedToAccessInfoOnDevice())throw new Error("Invalid consent. API requires consent before execution.");return t.apply(n)},n.prototype.recordErrorEvent=function(n){b.logError(i(i({},n),{account:this}))},n.prototype.recordStatusChangeEvent=function(n){b.logFeature({id:n.id,account:this,feature:n.status,props:i({},n.props)})},n.prototype.recordGenericEvent=function(n){b.logFeature({id:n.id,account:this,feature:n.id,props:i({},n.props)})},n.prototype.isAllowedToAccessInfoOnDevice=function(){return this.updateUserConsent(),this.use(an)},n.prototype.isAPStagAllowedToAccessInfoOnDevice=function(){return!0===this.globalContext.apstag._atsaaiod()},n.prototype.updateUserConsent=function(){try{var n=this.isAPStagAllowedToAccessInfoOnDevice();this.update(an,(function(){return n}))}catch(n){}},n.prototype.getPersistedItemName=function(n){return"".concat("aps").concat(":").concat(this.id).concat(":").concat(n)},n.prototype.isBrowserStorageAllowed=function(n){var t=!1;try{t=this.isAllowedToAccessInfoOnDevice()}catch(n){}return t||dn.includes(n)},n.prototype.readCookieStorage=function(n,t){var i;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be read from cookie storage"));var e=null!==(i=null==t?void 0:t.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(n):n;return new cn(this.globalContext).getItem(e)},n.prototype.readLocalStorage=function(n,t){var i;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be read from browser storage"));var e=null!==(i=null==t?void 0:t.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(n):n;if(e in this.globalContext.localStorage)return this.globalContext.localStorage.getItem(e)},n.prototype.writeLocalStorage=function(n,t,i){var e;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be written to browser storage"));if("string"!=typeof t)throw new Error("".concat(JSON.stringify(t)," must be a string to be writtable to browser storage"));var r=null!==(e=null==i?void 0:i.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(n):n;this.globalContext.localStorage.setItem(r,t)},n.prototype.deleteLocalStorage=function(n,t){var i;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be touched/deleted in browser storage"));var e=null!==(i=null==t?void 0:t.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(n):n;this.globalContext.localStorage.removeItem(e)},n.prototype.readSessionStorage=function(n,t){var i;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be read from browser storage"));var e=null!==(i=null==t?void 0:t.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(n):n;if(e in this.globalContext.sessionStorage)return this.globalContext.sessionStorage.getItem(e)},n.prototype.writeSessionStorage=function(n,t,i){var e;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be written to browser storage"));if("string"!=typeof t)throw new Error("".concat(JSON.stringify(t)," must be a string to be writable to browser storage"));var r=null!==(e=null==i?void 0:i.usePrefix)&&void 0!==e&&e?this.getPersistedItemName(n):n;this.globalContext.sessionStorage.setItem(r,t)},n.prototype.deleteSessionStorage=function(n,t){var i;if(!this.isBrowserStorageAllowed(n))throw new Error("".concat(n," is not allowed to be touched/deleted in browser storage"));var e=null!==(i=null==t?void 0:t.usePrefix)&&void 0!==i&&i?this.getPersistedItemName(n):n;this.globalContext.sessionStorage.removeItem(e)},n}(),fn="_system",hn=function(n){function i(t,i){return n.call(this,fn,{globalContext:t,rootName:i})||this}return t(i,n),i}(ln),pn=function(){function n(n,t,i){this.globalContext=n,this.rootName=t,this.dispatcher=i}return n.prototype.getAccounts=function(){return this.globalContext[this.rootName]},n.prototype.createUserspaceRoot=function(){null==this.getAccounts()&&(this.globalContext[this.rootName]=new Map)},n.prototype.createSystemAccount=function(){!1===this.getAccounts().has(fn)&&(this.getAccounts().set(fn,{queue:[],store:new Map}),(new hn).store.set(l,Math.random()))},n.prototype.observeRootSet=function(){var n=this;this.getAccounts().set=function(t,i){Map.prototype.set.apply(this,[t,i]),n.equip()}},n.prototype.observeAccountQueuesPush=function(){var n=this;this.getAccounts().forEach((function(t){t.queue.push=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];Array.prototype.push.apply(this,t),n.dispatcher.P({reason:{method:_.push,events:t}})}}))},n.prototype.overwriteAccountStoresGet=function(){this.getAccounts().forEach((function(n){n.store.get=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Map.prototype.get.apply(this,n)}}))},n.prototype.defineConvenienceFunctions=function(){var n=this,t=function(t,i,e){var r=n.getAccounts().get(t);void 0!==r&&r.queue.push(new CustomEvent(i,{detail:null!=e?e:{}}))},i=this.globalContext[this.rootName];i.triggerFor=t,i.trigger=function(n,i){t(fn,n,i)},void 0===i._private&&(i._private={}),i._private.CookieStorage=cn},n.prototype.equip=function(){try{this.createUserspaceRoot(),this.createSystemAccount(),this.observeRootSet(),this.observeAccountQueuesPush(),this.overwriteAccountStoresGet(),this.defineConvenienceFunctions()}catch(n){throw(new hn).recordErrorEvent({id:"Core.library.Equiper.equip",error:n}),n}},n}();!function(n){n.info="info",n.warn="warn",n.error="error"}(vn||(vn={}));var mn=function(){function n(){}return n.Instance=function(){return this.M},n.SessionId=function(){return this.N},n.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var i=new Date(Date.now()),e=vn.info;return console.log.apply(console,c([this.getPrefix(i,e)],a(n),!1)),{timestamp:i,logLevel:e}},n.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var i=new Date(Date.now()),e=vn.warn;return console.warn.apply(console,c([this.getPrefix(i,e)],a(n),!1)),{timestamp:i,logLevel:e}},n.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var i=new Date(Date.now()),e=vn.error;return console.error.apply(console,c([this.getPrefix(i,e)],a(n),!1)),{timestamp:i,logLevel:e}},n.prototype.getPrefix=function(t,i){var e=t.toISOString();return"".concat(e," | ").concat(n.SessionId()," | [").concat(i.toUpperCase(),"]")},n.M=new n,n.N="".concat(Date.now()),n}(),wn=mn.Instance(),yn=function(n){var t,i;if(void 0===n||!Array.isArray(n))return!0;var e=window;do{if(n.includes(null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.hostname))return!0;if(e===window.top)break;i=e,e=e.parent}while(i!==e&&i!==window.top);return!1},bn={key:"_internal/eventSources",default:new Map},gn={key:"_internal/processedEventSources",default:new Set},En=[A.completed,A.error,A.cancelled],_n=function(){function n(n,t){this.globalContext=n,this.rootName=t}return n.prototype.D=function(n){var t;return null!==(t=n.store.get("_config/events/deactivations"))&&void 0!==t?t:new Set},n.prototype.U=function(n,t){return!0===this.D(n).has(t.type)||function(n,t){var i,e,r,o,u,a;try{var c=null===(r=null===(e=null===(i=n.detail)||void 0===i?void 0:i.restrictions)||void 0===e?void 0:e.allow)||void 0===r?void 0:r.hostnames;if(void 0!==c&&!yn(c))return!0;var d=null===(a=null===(u=null===(o=n.detail)||void 0===o?void 0:o.restrictions)||void 0===u?void 0:u.block)||void 0===a?void 0:a.hostnames;if(void 0!==d&&yn(d))return!0}catch(n){return t.recordErrorEvent({id:"hostnames",error:new Error(n)}),!1}return!1}(t,n)||function(n){var t,i,e,r,o,u,a=null===(e=null===(i=null===(t=null==n?void 0:n.detail)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.allow)||void 0===e?void 0:e.libraryVersions,c=null===(u=null===(o=null===(r=null==n?void 0:n.detail)||void 0===r?void 0:r.restrictions)||void 0===o?void 0:o.block)||void 0===u?void 0:u.libraryVersions;return!(!Array.isArray(c)||!c.includes(d))||!(!Array.isArray(a)||a.includes(d))}(t)||function(n,t){var i,e,r,o,u,a,c=null===(r=null===(e=null===(i=null==n?void 0:n.detail)||void 0===i?void 0:i.restrictions)||void 0===e?void 0:e.allow)||void 0===r?void 0:r.accounts,d=null===(a=null===(u=null===(o=null==n?void 0:n.detail)||void 0===o?void 0:o.restrictions)||void 0===u?void 0:u.block)||void 0===a?void 0:a.accounts;return!(!Array.isArray(d)||!d.includes(t.id))||!(!Array.isArray(c)||c.includes(t.id))}(t,n)},n.prototype.T=function(){var n;return null!==(n=(new hn).store.get(s))&&void 0!==n?n:new Map},n.prototype.L=function(n){var t;return null!==(t=n.store.get("listeners"))&&void 0!==t?t:new Map},n.prototype.J=function(n,t){return this.T().get(t.type)||this.L(n).get(t.type)},n.prototype.F=function(n){var t=this.q(f);return(void 0===n.externalEventCount||n.externalEventCount<t)&&(n.externalEventCount=t,!0)},n.prototype.B=function(n){if(void 0===n.status)return!0;if(n.status===A.started)return!1;if(En.includes(n.status))return!1;if(n.status===A.waiting)return!!this.F(n);if(n.status===A.unknown)return!1;if(n.status===A.deactivated)return!1;throw new Error("Event status not explicitely handled: ".concat(n.status))},n.prototype.V=function(n,t){var i;void 0!==(null===(i=t.detail)||void 0===i?void 0:i.timeout)&&n.push(new Promise((function(n,i){setTimeout((function(){return i(new Error('Event "'.concat(t.type,'" timed out')))}),t.detail.timeout)})))},n.prototype.K=function(n,t){var i,e=new hn,r=null!==(i=e.read(n))&&void 0!==i?i:0;e.write(n,r+t)},n.prototype.G=function(n){(new hn).write(n,0)},n.prototype.q=function(n){var t;return null!==(t=(new hn).read(n))&&void 0!==t?t:0},n.prototype.H=function(n,t,i,e,r){var o;if(!(t in A))throw new Error("Listener returned invalid status: ".concat(n.type," returned ").concat(t));if(this.W(n,t,e,r),t!==A.waiting&&void 0!==(null===(o=n.detail)||void 0===o?void 0:o.resolve))try{n.detail.resolve(i)}catch(n){wn.error(n)}this.P({reason:{method:_.listenerSuccess,events:[n]}})},n.prototype.Y=function(n,t,i){void 0!==t&&"string"!=typeof t||(t=new Error(t)),this.W(n,A.error,i),this.Z(n,t),t.context=n.type,i.recordErrorEvent({id:n.type,error:t})},n.prototype.X=function(n,t,i){var e=this.J(i,t);if(void 0===e)throw new Error("No listener found for event: ".concat(t.type));n.push(e({customEvent:t,account:i,detail:t.detail}))},n.prototype.$=function(n,t,i){var e=this;Promise.race(n).then((function(n){var r,o,u,a;void 0===n?o=j.completed:"string"==typeof n?o=n:"object"==typeof n&&(o=n.status,u=n.value,a=n.analytics,!0===(null===(r=t.detail)||void 0===r?void 0:r.surfaceAnalytics)&&(void 0===u&&(u={}),u.analytics=a)),e.H(t,o,u,i,a)})).catch((function(n){e.Y(t,n,i)}))},n.prototype.nn=function(n,t){var i=[];this.X(i,n,t),this.V(i,n),this.$(i,n,t)},n.prototype.tn=function(n,t){var i;if(void 0===n.status){var e=null===(i=n.detail)||void 0===i?void 0:i.error;void 0!==e&&t.recordErrorEvent({id:n.type,error:e})}},n.prototype.en=function(n,t){var e;if(void 0===n.status){var r=null===(e=n.detail)||void 0===e?void 0:e.analytics;void 0!==r&&t.recordStatusChangeEvent({id:n.type,status:A.unknown,props:i({},r)})}},n.prototype.rn=function(n,t){this.U(t,n)&&this.W(n,A.deactivated,t)},n.prototype.un=function(n,t){void 0===this.J(t,n)&&this.W(n,A.unknown,t)},n.prototype.Z=function(n,t){var i;if(void 0!==(null===(i=n.detail)||void 0===i?void 0:i.reject))try{n.detail.reject(t),h()&&wn.error(t)}catch(n){wn.error(n)}},n.prototype.an=function(n,t){var i=new Error('Invalid account ID: "'.concat(t.id,'"'));this.Y(n,i,t)},n.cn=function(n){return"string"==typeof n&&!["","undefined","true","false"].includes(n.trim())},n.prototype.dn=function(t,i){var e;n.cn(i.id)?(this.tn(t,i),this.en(t,i),this.un(t,i),this.rn(t,i),this.B(t)&&(this.W(t,A.started,i),h()&&wn.info("## Execute event: ".concat(t.type," with initial status ").concat(null!==(e=t.status)&&void 0!==e?e:"undefined")),this.nn(t,i))):this.an(t,i)},n.prototype.sn=function(n){var t=(new hn).use(bn),i=n.use(gn);t.forEach((function(t,e){var r;if(!i.has(e)){var o=t.map((function(n){var t=a(n,2),i=t[0],e=t[1];return new CustomEvent(i,{detail:e})}));(r=n.queue).unshift.apply(r,c([],a(o),!1)),n.update(gn,(function(n){return n.add(e)}))}}))},n.prototype.vn=function(n,t){var i=this;this.sn(n),n.queue.forEach((function(t){return i.dn(t,n)}))},n.prototype.ln=function(n,t){n.status=t,n.statusEvents=null!=n.statusEvents?n.statusEvents:[],n.statusEvents.push(new CustomEvent(t))},n.prototype.fn=function(n,t,e,r){var o,u=new CustomEvent("now").timeStamp,a=null===(o=n.statusEvents)||void 0===o?void 0:o.find((function(n){return n.type===A.started})),c=null!=a?u-a.timeStamp:void 0;e.recordStatusChangeEvent({id:n.type,status:t,props:i(i({},r),{timers:{sinceCreated:u-n.timeStamp,sinceStarted:c}})})},n.prototype.W=function(n,t,i,e){var r;n.status!==t&&(h()&&wn.info("### Update ".concat(n.type," from ").concat(null!==(r=n.status)&&void 0!==r?r:"undefined"," to ").concat(t)),this.ln(n,t),!0!==n.isLogDisabled&&this.fn(n,t,i,e))},n.prototype.hn=function(){var n=this,t=new Map;return this.globalContext[this.rootName].forEach((function(i,e){return t.set(e,new ln(e,{globalContext:n.globalContext,rootName:n.rootName}))})),t},n.prototype.pn=function(n){var t;if(!h()){var i=null!==(t=n.store.get(v))&&void 0!==t?t:[];if(i.length>150){var e=i.slice(-100);n.store.set(v,e)}}},n.prototype.mn=function(n){var t,i=null!==(t=n.store.get(v))&&void 0!==t?t:[];i.push.apply(i,c([],a(n.queue.filter((function(n){return void 0!==n.status&&En.includes(n.status)}))),!1)),n.store.set(v,i)},n.prototype.wn=function(n){var t;(t=n.queue).splice.apply(t,c([0,n.queue.length],a(n.queue.filter((function(n){return void 0===n.status||!En.includes(n.status)}))),!1))},n.prototype.yn=function(){var n=this;this.hn().forEach((function(t){n.mn(t),n.pn(t),n.wn(t)}))},n.prototype.bn=function(n){return null==n?void 0:n.filter((function(n){var t,i;return(null===(t=n.detail)||void 0===t?void 0:t.source)!==S.internal&&(null===(i=n.detail)||void 0===i?void 0:i.source)!==S.apstag&&n.status!==A.waiting}))},n.prototype.gn=function(n){var t,i=this.bn(n);return null!==(t=null==i?void 0:i.length)&&void 0!==t?t:0},n.prototype.En=function(n){var t=this.gn(n);this.K(f,t)},n.prototype._n=function(){var n=this,t="_internal/recentDispatches";this.K(t,1);var i=this.q(t);if(i>1e4)throw new Error("Too many dispatches. Aborting");i%100==0&&(new hn).recordGenericEvent({id:"C.l.D.thr",props:{recentDispatchesCount:i}}),setTimeout((function(){n.G(t)}),100)},n.prototype.P=function(n){var t,i,e,r,o,u=this,a=n.reason;try{this._n(),h()&&wn.info('# Dispatch from method "'.concat(a.method,'" on event "').concat(null!==(i=null===(t=a.events)||void 0===t?void 0:t[0].type)&&void 0!==i?i:"undefined",'" with source "').concat(null!==(o=null===(r=null===(e=a.events)||void 0===e?void 0:e[0].detail)||void 0===r?void 0:r.source)&&void 0!==o?o:"undefined",'"\n_________________________________________')),this.En(a.events),this.hn().forEach((function(n){return u.vn(n,a)})),this.yn()}catch(n){throw(new hn).recordErrorEvent({id:"C.l.D.dis",error:n}),n}},n}(),Sn=function(){function n(n,t){this.globalContext=n,this.rootName=t}return n.prototype.subscribe=function(n){try{var t=new hn,i=null!=t.store.get(s)?t.store.get(s):new Map;t.store.set(s,new Map(c(c([],a(i),!1),a(n),!1)))}catch(n){throw(new hn).recordErrorEvent({id:"Core.library.Subscriber.subscribe",error:n}),n}},n}(),jn=function(){function n(n,t){this.globalContext=n,this.rootName=t}return n.prototype.populate=function(){try{var n=new hn,t=!1;try{t=JSON.parse(n.read(un))}catch(n){}if(t)return;n.write(un,JSON.stringify(!0)),this.populateFromPrependStore(),this.populateFromQueryParams()}catch(n){(new hn).recordErrorEvent({id:"Core.library.Populator.populate",error:n})}},n.prototype.populateFromPrependStore=function(){var n=this;this.globalContext[this.rootName].forEach((function(t,i){var e,r,o=new ln(i,{globalContext:n.globalContext,rootName:n.rootName}),u=null!==(r=o.read(on,{persist:!0}))&&void 0!==r?r:"[]";o.write(on,JSON.stringify([]));try{var d=JSON.parse(u);if(0===d.length)return;(e=o.queue).push.apply(e,c([],a(d.map(kn)),!1))}catch(n){console.error("Error processing prepended events",n)}}))},n.prototype.populateFromQueryParams=function(){var n,t,i=null===(t=null===(n=this.globalContext)||void 0===n?void 0:n.location)||void 0===t?void 0:t.search,e=new URLSearchParams(i),r=this.globalContext[this.rootName],o=r.get(fn);Cn(e,"aps.trigger").forEach((function(n){o.queue.push(kn(n))})),Cn(e,"aps.triggerFor",!0).forEach((function(n){void 0!==n.accountId&&r.has(n.accountId)&&r.get(n.accountId).queue.push(kn(n))}));var u=Cn(e,"aps_event");r.forEach((function(n){u.forEach((function(t){n.queue.push(kn(t))}))}))},n}(),Cn=function(n,t,i){void 0===i&&(i=!1);var e=n.getAll(t),r=[];return e.forEach((function(n){var t,e=n.split(",");i&&(t=e.shift());var o=e.shift();if(void 0!==o&&o.length>0){var u=decodeURIComponent(e.join(",")),a=void 0;if(u.length>0)try{a=JSON.parse(u)}catch(n){console.error("Error processing query param event",o,a)}r.push({eventName:o.replace(/_/g,"/"),eventDetail:a,accountId:t})}})),r},kn=function(n){var t;return new CustomEvent(n.eventName,{detail:i({},null!==(t=n.eventDetail)&&void 0!==t?t:{})})},In={globalContext:window,rootName:"_aps"},xn=function(){function n(n){this.ID=n,this.clear()}return n.prototype.clear=function(){var n=this;(new hn).update(bn,(function(t){return t.delete(n.ID),t}))},n.prototype.recordListener=function(n,t){var i=this;(new hn).update(bn,(function(e){var r=e.get(i.ID);return void 0!==r?r.push([n.name,t]):e.set(i.ID,[[n.name,t]]),e}))},n}(),On=function(){function n(n,t){void 0===n&&(n=In.globalContext),void 0===t&&(t=In.rootName),this.dispatcher=new _n(n,t),this.equiper=new pn(n,t,this.dispatcher),this.subscriber=new Sn(n,t),this.populator=new jn(n,t),this.globalContext=n,this.rootName=t}return n.prototype.createAccount=function(n){var t;if(void 0===n)throw new Error("accountID must be provided");this.globalContext[this.rootName]=null!==(t=this.globalContext[this.rootName])&&void 0!==t?t:new Map;var i=this.globalContext[this.rootName],e={store:new Map,queue:[]};return!1===i.has(n)&&i.set(n,e),new ln(n,{globalContext:this.globalContext,rootName:this.rootName})},n.prototype.subscribe=function(n){this.subscriber.subscribe(n)},n.prototype.equip=function(){this.equiper.equip()},n.prototype.dispatch=function(n){var t=n.reason;this.dispatcher.P({reason:t})},n.prototype.populate=function(){this.populator.populate()},n.prototype.load=function(n){var t=n.listeners;this.equip(),this.subscribe(t),this.dispatch({reason:{method:_.direct}}),this.populate()},n.prototype.registerEventSource=function(n){return this.equip(),new xn(n)},n}(),An="vnd_prx_segments",Rn="aps_targeting_comscore",Pn=new tn({scope:"cxm",object:"comscore",action:"set",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:Mn(t)}]}))}))}}),Mn=function(n){var t=n.readSessionStorage(Rn);if(n.deleteSessionStorage(Rn),null==t)return j.cancelled;try{var i=JSON.parse(t)[An];if(null==i)throw new Error;return n.globalContext.googletag.pubads().getSlots().forEach((function(n){n.setTargeting(An,i)})),j.completed}catch(n){throw new Error("Malformed targeting object at ".concat(Rn))}},Nn="aps_targeting_ias",Dn=new tn({scope:"cxm",object:"ias",action:"set",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:Un(t)}]}))}))}}),Un=function(n){var t=n.readSessionStorage(Nn);if(n.deleteSessionStorage(Nn),null==t)return j.cancelled;try{var i=JSON.parse(t),e=n.globalContext.googletag;e.pubads().getSlots().forEach((function(n){var t=i.targeting.slots[n.getSlotElementId()];null!=t&&Object.keys(t).forEach((function(i){n.setTargeting(i,t[i])}))}));var r=i.targeting,o=r.brandSafety,u=r.fr,a=r.custom;return null!=o&&Object.keys(o).forEach((function(n){e.pubads().setTargeting(n,o[n])})),null!=a&&Object.keys(a).forEach((function(n){var t=a[n];Array.isArray(t)?t.forEach((function(t){e.pubads().setTargeting(n,t)})):e.pubads().setTargeting(n,t)})),null!=u&&e.pubads().setTargeting("fr",u),j.completed}catch(n){throw new Error("Malformed targeting object at ".concat(Nn))}},Tn="aps_targeting_illuma",Ln=new tn({scope:"cxm",object:"illuma",action:"set",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:zn(t)}]}))}))}}),zn=function(n){var t=n.readSessionStorage(Tn);if(n.deleteSessionStorage(Tn),null==t)return j.cancelled;var i=JSON.parse(t).results;if(null==i)throw new Error("Malformed targeting object at ".concat(Tn));var e=n.globalContext.googletag;return Object.keys(i).forEach((function(n){var t=i[n];e.pubads().setTargeting("".concat("illuma_").concat(n),JSON.stringify(t))})),j.completed},Jn=new tn({scope:"cxm",object:"contextual",action:"set",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,Promise.all([t.recordListener(Pn),t.recordListener(Dn),t.recordListener(Ln)])];case 1:return n.sent(),[2,{status:j.completed}]}}))}))}}),Fn=en([Pn,Jn,Dn,Ln]),qn={key:"customPlacement/hints",default:{}},Bn={key:"customPlacement/bidResponses",default:{}},Vn=function(){function n(n,t,e){var r=this;this.CLICK_PREFIX_MACRO="%%CLICK_URL_PREFIX%%",this.PROGRAM_CUSTOM_PLACEMENTS="customPlacements",this.getPageStyles=function(n){return void 0===n&&(n=["p","h1","h2"]),n.map(r.getTagStyle).filter((function(n){return Object.keys(n).length>0})).reduce((function(n,t){return i(i({},n),t)}),{})},this.getContainerStyles=function(n){try{if(!n)return{};var t=window.getComputedStyle(n),i="--aps-custom-container-",e=new Map;return e.set("".concat(i,"width"),t.width),e.set("".concat(i,"margin"),t.margin),e.set("".concat(i,"padding"),t.padding),Object.fromEntries(e.entries())}catch(n){return{}}},this.slotProps=n,this.rawResponse=t,this.Sn=e}return n.prototype.getTagStyle=function(n){var t=this.Sn.getElementsByTagName(n);if(t&&t[0]){var i=window.getComputedStyle(this.Sn.getElementsByTagName(n)[0]),e=new Map,r="--aps-custom-page-";return e.set("".concat(r).concat(n,"-color"),i.color),e.set("".concat(r).concat(n,"-fontFamily"),i.fontFamily),e.set("".concat(r).concat(n,"-fontSize"),i.fontSize),e.set("".concat(r).concat(n,"-fontWeight"),i.fontWeight),e.set("".concat(r).concat(n,"-lineHeight"),i.lineHeight),Object.fromEntries(e)}return{}},n.prototype.getDynamicFrameBodyHeight=function(n,t,e){var r;if(t){null==t||t.contentWindow;var o=(null==t?void 0:t.contentDocument)||(null===(r=null==t?void 0:t.contentWindow)||void 0===r?void 0:r.document),u=null==o?void 0:o.body.scrollHeight;t.style.height="".concat(u,"px");try{var a=i(i({},this.getPageStyles()),this.getContainerStyles(n));Object.keys(a).forEach((function(n){null==o||o.documentElement.style.setProperty(n,a[n])}))}catch(n){}}},n.prototype.render=function(n){return this.jn(n)},n.prototype.jn=function(n){var t,i,e,r=this;if(!this.rawResponse||!this.slotProps)return!1;try{var o=this.rawResponse.size.split("x"),u=(null===(t=this.rawResponse.targeting)||void 0===t?void 0:t.amzniid)||this.rawResponse.amzniid,a=(null===(i=this.rawResponse.targeting)||void 0===i?void 0:i.amznadm)||this.rawResponse.amznadm;if(!u)return!1;var c=this.slotProps.Cn;if(this.slotProps.location&&this.slotProps.id){var d=this.Sn.createElement("div");null===(e=this.Sn.getElementById(this.slotProps.id))||void 0===e||e.insertAdjacentElement(this.slotProps.location,d),c=d}if(!c)return!1;var s=this.Sn.createElement("iframe");return s.style.marginLeft="0",s.style.marginTop="0",s.style.height="".concat(o[1],"px"),s.style.width="100%",s.setAttribute("data-testid","amzn-asr-ad"),s.setAttribute("scrolling","no"),s.setAttribute("frameborder","0"),s.onload=function(){return r.getDynamicFrameBodyHeight(c,s,a?"amznadm":"admi")},s.srcdoc=a||"",n&&n.clickPrefix&&(s.srcdoc=s.srcdoc.replace(this.CLICK_PREFIX_MACRO,n.clickPrefix)),c.appendChild(s),this.updateSlotAttribute("status","rendered"),!0}catch(n){throw new Error("CustomPlacements: Error while rendering")}},n.prototype.updateSlotAttribute=function(n,t){var i;null===(i=this.slotProps.Cn)||void 0===i||i.setAttribute("data-aps-custom-".concat(n),t)},n}(),Kn={key:"customPlacement/timings",default:[]},Gn=function(n,t,i,e){void 0===i&&(i=0),void 0===e&&(e=0);try{var r={effectiveType:null==t?void 0:t.effectiveType,rtt:null==t?void 0:t.rtt,downlink:null==t?void 0:t.downlink},o=function(n,t,i){try{var e=isNaN(t)||0===t?n.body.clientWidth:t,r=isNaN(i)||0===i?n.body.clientHeight:i;return"".concat(e,"x").concat(r)}catch(n){}return"x"}(n,i,e);return{connection:r,screen:o}}catch(n){return{}}},Hn=function(n,t,i){n.update(Kn,(function(n){return n.push({time:performance.now(),key:"".concat(t,"/").concat(i)}),n}))},Qn="customPlacements",Wn=new tn({scope:"customPlacement",object:"hint",action:"process",validators:{},handler:function(n){var t=n.account;return n.detail,n.customEvent,r(void 0,void 0,void 0,(function(){var n,i,e;return o(this,(function(r){return n=function(n){var i;Hn(t,Qn,"hint/process/".concat(n));var e=t.use(qn),r=t.use(Bn);null!==(i=e[n].isRendered)&&void 0!==i&&i||(Object.values(r).forEach((function(i){var r;if(null===(r=i.isRendered)||void 0===r||!r){var o=t.globalContext.document.getElementById(n);if(null!=o){var u=new Vn({id:n,Cn:o},i,t.globalContext.document);Hn(t,Qn,"widget/render/".concat(n)),u.render(e[n].hintMetadata)&&(i.isRendered=!0,e[n].isRendered=!0)}}})),t.update(qn,(function(){return e})),t.update(Bn,(function(){return r})))},i=t.use(qn),Object.keys(i).filter((function(n){return i[n].default})).forEach(n),Object.keys(i).filter((function(n){return!i[n].default})).forEach(n),[2,{status:j.completed,analytics:{browserInfo:Gn(t.globalContext.document,null===(e=t.globalContext.navigator)||void 0===e?void 0:e.connection,t.globalContext.innerWidth,t.globalContext.innerHeight)}}]}))}))}}),Yn=new tn({scope:"customPlacement",object:"hint",action:"define",validators:{},handler:function(n){var t=n.account;n.detail;var i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a,c,d;return o(this,(function(o){if(void 0===(null===(c=i.detail)||void 0===c?void 0:c.id))throw new Error("Hint `id` must be defined");return n=i.detail,e=n.id,r=n.isDefault,u=n.hintMetadata,Hn(t,Qn,"hint/define/".concat(e)),(a=t.use(qn))[e]={default:"default"===r,isRendered:!1,hintMetadata:null!=u?u:{}},t.update(qn,(function(){return a})),t.recordListenerNonBlocking(Wn),[2,{status:j.completed,analytics:{browserInfo:Gn(t.globalContext.document,null===(d=t.globalContext.navigator)||void 0===d?void 0:d.connection,t.globalContext.innerWidth,t.globalContext.innerHeight)}}]}))}))}}),Zn={key:"customPlacement/placementResponseDispatched",default:!1},Xn={key:"customPlacement/placementResponse",default:void 0},$n={key:"customPlacement/contextURL",default:void 0},nt={key:"customPlacement/placementEndpoint",default:"https://c.aps.amazon-adsystem.com/e/placements"},tt={key:"ad/context",default:void 0},it=new tn({scope:"customPlacement",object:"placement",action:"fetch",validators:{},handler:function(n){var t=n.account;return n.detail,n.customEvent,r(void 0,void 0,void 0,(function(){var n,i;return o(this,(function(e){switch(e.label){case 0:return Hn(t,Qn,"placementFetch/start"),[4,rt(t)];case 1:return n=e.sent(),Hn(t,Qn,"placementFetch/end"),[2,{status:j.completed,value:{placementResponse:n},analytics:{browserInfo:Gn(t.globalContext.document,null===(i=t.globalContext.navigator)||void 0===i?void 0:i.connection,t.globalContext.innerWidth,t.globalContext.innerHeight)}}]}}))}))}});function et(n){var t=n.use(tt);return void 0!==t&&"user"in t?(t.user,e(t,["user"])):t}function rt(n){return r(this,void 0,void 0,(function(){var t,i,e,r,u;return o(this,(function(o){switch(o.label){case 0:return t={ortb2:et(n)},i=n.use($n),e=n.use(nt),r=function(n,t){try{var i=null!=t?t:function(n){var t,i;try{if(void 0!==(null===(t=n.globalContext.top)||void 0===t?void 0:t.location.href))return null===(i=n.globalContext.top)||void 0===i?void 0:i.location.href}catch(n){}try{if(n.globalContext.top!==n.globalContext.self)return n.globalContext.document.referrer}catch(n){}}(n);if(void 0!==i)return encodeURIComponent(i)}catch(n){}return""}(n,i),u=encodeURIComponent(JSON.stringify(t)),[4,fetch("".concat(e,"?account=").concat(n.id,"&u=").concat(r,"&sg=").concat(u))];case 1:return[4,o.sent().json()];case 2:return[2,o.sent()]}}))}))}var ot={key:"customPlacement/bidEndpoint",default:"c.aps.amazon-adsystem.com"},ut={key:"customPlacement/bidIsKey",default:"86355855cc6ed9e335d0382c8563aa10"},at=new tn({scope:"customPlacement",object:"bids",action:"fetch",validators:{},handler:function(n){var t=n.account;return n.detail,n.customEvent,r(void 0,void 0,void 0,(function(){var n,i,e,r;return o(this,(function(o){switch(o.label){case 0:return n=Gn(t.globalContext.document,null===(e=t.globalContext.navigator)||void 0===e?void 0:e.connection,t.globalContext.innerWidth,t.globalContext.innerHeight),void 0===(null===(r=t.globalContext.apstag)||void 0===r?void 0:r.clientFetchBids)?[2,{status:j.waiting,analytics:{browserInfo:n}}]:(Hn(t,Qn,"fetchBids/start"),[4,ct(t)]);case 1:return i=o.sent(),Hn(t,Qn,"fetchBids/end"),[2,{status:j.completed,value:{bidResponses:i},analytics:{browserInfo:n}}]}}))}))}});function ct(n){return r(this,void 0,void 0,(function(){var t,i,e;return o(this,(function(r){switch(r.label){case 0:return t={slots:[{slotID:"93b7dd52-a8ce-11ed-afa1-0242ac120002:1",sizes:[[999,999]]}],timeout:6e4,_endpointDomain:n.use(ot),params:{program:"apscustom",is:n.use(ut)}},i={pubID:n.id,isSelfServePub:36===n.id.length,deals:!0},e=n.use($n),[4,new Promise((function(r){var o;null===(o=n.globalContext.apstag)||void 0===o||o.clientFetchBids(t,(function(n){r(n)}),{initConfig:i,contextURL:e})}))];case 1:return[2,r.sent()]}}))}))}var dt=new tn({scope:"customPlacement",object:"service",action:"enable",validators:{},handler:function(n){var t=n.account;return n.detail,n.customEvent,r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return Hn(t,Qn,"service/enable"),t.update(Zn,(function(){return!1})),[4,Promise.all([t.recordListener(it).then((function(n){var i=n.placementResponse;st(t,!0,i),t.update(Xn,(function(){return i}))})),t.recordListener(at).then((function(n){n.bidResponses.forEach((function(n){var i,e,r=null!==(e=null===(i=n.targeting)||void 0===i?void 0:i.amzniid)&&void 0!==e?e:n.amzniid,o=!1;if(""!==r){var u=t.use(Bn);u[r]=n,t.update(Bn,(function(){return u})),o=!0}st(t,!1,{aps:[{active:o,dispatchEventOnValidBid:!0}]})}))})).then((function(){t.recordListenerNonBlocking(Wn)}))])];case 1:return i.sent(),[2,{status:j.completed,analytics:{browserInfo:Gn(t.globalContext.document,null===(n=t.globalContext.navigator)||void 0===n?void 0:n.connection,t.globalContext.innerWidth,t.globalContext.innerHeight)}}]}}))}))}});function st(n,t,i){var e;if(!n.use(Zn)){var r=null===(e=null==i?void 0:i.aps)||void 0===e?void 0:e.find((function(n){return n.dispatchEventOnValidBid}));t&&void 0!==r||(Hn(n,Qn,"placementResponseEvent/dispatch"),n.record("customPlacement/placement/didRespond",i).catch((function(n){})),n.update(Zn,(function(){return!0})))}}var vt=new Map(c([],a(en([Yn,at,Wn,dt,it])),!1)),lt=function(n){function i(t){var i=n.call(this,t.message)||this;return i.message='Could not read vendor data because: "'.concat(t.message,'"'),i}return t(i,n),i}(Error),ft={key:"cxm/vendors",default:{}},ht={nonId:{noExtraDefaults:!0,source:"liveintent.com"},bidswitch:{source:"bidswitch.net"},openx:{source:"openx.net"},magnite:{source:"rubiconproject.com"},medianet:{source:"media.net"},pubmatic:{source:"pubmatic.com"},index:{source:"liveintent.indexexchange.com"},uid2:{source:"uidapi.com"}};function pt(n){var t=[],i={user:{ext:{eids:t}}};return Object.entries(ht).forEach((function(i){var e=i[0],r=i[1];if(void 0!==n[e]){var o={source:r.source,uids:[{id:n[e]}]};!0!==r.noExtraDefaults&&(o.uids[0].atype=3,o.uids[0].ext={provider:"liveintent.com"}),t.push(o)}})),i}var mt="cxm/liveintent/set",wt="cxm/arcspan/set",yt="cxm/anomymised/set",bt=new Map([["cxm/vendors/set",function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,Promise.all([t.record(mt),t.record(wt),t.record(yt)])];case 1:return n.sent(),[2,j.completed]}}))}))}],[mt,function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){try{n=function(n){var t,i,e;try{e=n.readLocalStorage("__tamLIResolveResult")}catch(n){if(n instanceof Error)throw new lt(n)}if(null!=e&&(void 0===n.globalContext.liModuleEnabled&&(n.globalContext.liModuleEnabled=Math.random()<.95,null===(i=null===(t=n.globalContext)||void 0===t?void 0:t.googletag)||void 0===i||i.cmd.push((function(){n.globalContext.googletag.pubads().setTargeting("li-module-enabled",n.globalContext.liModuleEnabled?["on"]:["off"])}))),n.globalContext.liModuleEnabled)){var r=void 0;try{r=pt(JSON.parse(e))}catch(n){r=pt(JSON.parse(decodeURIComponent(e)))}if(void 0!==r)return{data:{default:r}}}}(t)}catch(n){if(n instanceof lt)return[2,{status:j.cancelled,analytics:{statusReason:n.message}}];throw n}return void 0===n?[2,j.cancelled]:(t.update(ft,(function(t){var e;return i(i({},t),((e={}).liveintent=n,e))})),[2,j.completed])}))}))}],[wt,function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){return n=function(n){var t=n.globalContext.arcobj1,i=n.globalContext.arcobj2,e=[],r=[],o=[];if(void 0!==t){if(void 0!==t.page_iab_codes.text&&(e=e.concat(t.page_iab_codes.text)),void 0!==t.page_iab_codes.images&&(e=e.concat(t.page_iab_codes.images)),void 0!==t.page_keywords){var u="string"==typeof t.page_keywords?t.page_keywords.split(","):t.page_keywords;o=o.concat(u),void 0!==(null==i?void 0:i.compcohorts)&&(o=o.concat(i.compcohorts))}void 0!==t.page_iab_newcodes.text&&(r=c([],a(new Set(c(c([],a(r),!1),a(t.page_iab_newcodes.text),!1))),!1)),void 0!==t.page_iab_newcodes.images&&(r=c([],a(new Set(c(c([],a(r),!1),a(t.page_iab_newcodes.images),!1))),!1));var d={name:"arcspan",segment:[],ext:{segtax:6}};r.forEach((function(n){d.segment=d.segment.concat({id:n})}));var s={data:[]};return s.data=s.data.concat(d),{data:{default:{site:{name:"arcspan",cat:e,sectioncat:e,pagecat:e,keywords:o.toString(),content:s,domain:new URL(n.globalContext.location.href).hostname,page:n.globalContext.location.href,ref:n.globalContext.document.referrer}}}}}}(t),void 0===n?[2,j.cancelled]:(t.update(ft,(function(t){return i(i({},t),{arcspan:n})})),[2,j.completed])}))}))}],[yt,function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){try{n=function(n){var t;try{t=n.readLocalStorage("cohort_ids")}catch(n){if(n instanceof Error)throw new lt(n)}if("string"==typeof t){for(var i=JSON.parse(t),e="",r=0;r<i.length;r++){var o=i[r];e+="perid=".concat(o),e+=r<i.length-1?",":""}return{data:{default:{user:{keywords:e}}}}}}(t)}catch(n){if(n instanceof lt)return[2,{status:j.cancelled,analytics:{statusReason:n.message}}];throw n}return void 0===n?[2,j.cancelled]:(t.update(ft,(function(t){var e;return i(i({},t),((e={}).anonymised=n,e))})),[2,j.completed])}))}))}]]),gt={key:"cxm/ids",default:void 0},Et={key:"cxm/metadata",default:void 0};function _t(n,t){var e=n(t);return null!=e?(t.update(gt,(function(n){return i(i({},n),e)})),{status:j.completed}):{status:j.cancelled}}function St(n,t){var e=n(t);return null!=e?(t.update(Et,(function(n){return i(i({},n),e)})),{status:j.completed}):{status:j.cancelled}}var jt,Ct="33across",kt=new tn({scope:"cxm",object:"33across",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(It,t)]}))}))}}),It=function(n){var t,i=n.readLocalStorage("33acrossId");return null!=i?((t={})[Ct]=decodeURIComponent(i),t):null},xt="audigent",Ot=new tn({scope:"cxm",object:"audigent",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(At,t)]}))}))}}),At=function(n){var t,i,e=null!==(i=n.readLocalStorage("hadronId"))&&void 0!==i?i:n.readLocalStorage("auHadronId");return null!=e?((t={})[xt]=e,t):null},Rt="id5id",Pt=new tn({scope:"cxm",object:"id5",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(Mt,t)]}))}))}}),Mt=function(n){var t,i=n.readLocalStorage(Rt);return null!=i?((t={}).id5=JSON.parse(decodeURIComponent(i)).universal_uid,t):null},Nt="liveRamp",Dt="_lr_env",Ut="idl_env",Tt="apstagLiveRampTimestamp";!function(n){n[n.oldTimestamp=0]="oldTimestamp",n[n.newTimestamp=1]="newTimestamp",n[n.noTimestamp=2]="noTimestamp"}(jt||(jt={}));var Lt,zt=new tn({scope:"cxm",object:"liveramp",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,i,e,r;return o(this,(function(o){return n=Ft(Jt(t),t),i=function(){var t;return null!=n?((t={})[Nt]=n.id,t):null},e=function(){var t;return null!=n?((t={})[Nt]=n.newGen,t):null},[2,(r=_t(i,t)).status===j.completed?St(e,t):r]}))}))}}),Jt=function(n){var t=n.readLocalStorage(Dt);if(null!=t)return t;var i=n.readCookieStorage(Dt);if(null!=i)return i;var e=n.readLocalStorage(Ut);if(null!=e)return e;var r=n.readCookieStorage(Ut);return null!=r?r:null},Ft=function(n,t){if(null!=n&&""!==n)try{var i=JSON.parse(atob(decodeURIComponent(n))),e={id:i.envelope,newGen:jt.noTimestamp};if(null!=i.timestamp){var r=t.readLocalStorage(Tt);null==r||r<i.timestamp?(e.newGen=jt.newTimestamp,t.writeLocalStorage(Tt,i.timestamp.toString())):e.newGen=jt.oldTimestamp}return e}catch(t){return{id:decodeURIComponent(n),newGen:jt.noTimestamp}}return null},qt={},Bt=new Set([Rt,Ut,Dt]),Vt={},Kt=new tn({scope:"cxm",object:"lockr",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(Gt,t)]}))}))}}),Gt=function(n){var t=n.readLocalStorage("lockr_identity_providers");if(t){var i={};return t.split(",").filter((function(n){return!Bt.has(n)})).forEach((function(t){var e=Ht(n,t);null!==e&&(i[qt[t]||t]=decodeURIComponent(e))})),i}return null},Ht=function(n,t){var i=n.readLocalStorage(t);if(!i)return null;if(Vt[t])try{i=JSON.parse(decodeURIComponent(i)),Vt[t].split(".").forEach((function(n){i=null==i?void 0:i[n]}))}catch(n){throw new Error("Malformed json at ".concat(t,": ").concat(n))}return i||null},Qt="lotame",Wt=new tn({scope:"cxm",object:"lotame",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(Yt,t)]}))}))}}),Yt=function(n){var t,i=n.readLocalStorage("panoramaId");return null!=i?((t={})[Qt]=i,t):null},Zt="pubcommon",Xt=new tn({scope:"cxm",object:"pubcommon",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t($t,t)]}))}))}}),$t=function(n){var t,i,e=null!==(i=n.readLocalStorage("_pubcid"))&&void 0!==i?i:n.readLocalStorage("_sharedID");return null!=e?((t={})[Zt]=e,t):null},ni="publink",ti=["_publink","_publink_srv","_pbjs_publink"],ii=new tn({scope:"cxm",object:"publink",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(ei,t)]}))}))}}),ei=function(n){var t,i,e;try{for(var r=u(ti),o=r.next();!o.done;o=r.next()){var a=o.value,c=n.readCookieStorage(a);if(null!=c){var d=JSON.parse(c).publink;if(null!=d)return(e={})[ni]=d,e}}}catch(n){t={error:n}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return null},ri="yahoo",oi="connectId",ui=new tn({scope:"cxm",object:"yahoo",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(ai,t)]}))}))}}),ai=function(n){var t,i=n.readLocalStorage(oi);return null!=i&&(i=JSON.parse(i)[oi]),null!=i?((t={})[ri]=i,t):null},ci=new tn({scope:"cxm",object:"fabrick",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,_t(di,t)]}))}))}}),di=function(n){var t,i=null,e=n.readCookieStorage("pbjs_fabrickId");if(null!=e){var r=decodeURIComponent(e);i=JSON.parse(r).fabrickId}return null!=i?((t={}).fabrick=i,t):null},si=new tn({scope:"cxm",object:"ids",action:"get",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,Promise.all([t.recordListener(kt),t.recordListener(Ot),t.recordListener(Pt),t.recordListener(zt),t.recordListener(Kt),t.recordListener(Wt),t.recordListener(Xt),t.recordListener(ii),t.recordListener(ui),t.recordListener(ci)])];case 1:return n.sent(),[2,{status:j.completed}]}}))}))}}),vi=en([kt,Ot,Pt,si,zt,Kt,Wt,Xt,ii,ui,ci]),li="analytics/sampling/set",fi=new Map([[li,function(n){n.account;var t=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,i,e,r,u;return o(this,(function(o){return void 0===(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.rates)?[2,j.cancelled]:(void 0!==(null===(e=null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.rates)||void 0===e?void 0:e.error)&&b.setEventSamplingRates({error:t.detail.rates.error}),void 0!==(null===(u=null===(r=null==t?void 0:t.detail)||void 0===r?void 0:r.rates)||void 0===u?void 0:u.status)&&b.setEventSamplingRates({feature:t.detail.rates.status}),[2,j.completed])}))}))}],["log/analytics/setSampling",function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){throw new Error("log/analytics/setSampling has been deprecated. Will be removed after 3/1/2024.")}))}))}],["log/analytics/setInterval",function(n){n.account;var t=n.customEvent;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){if("number"!=typeof(null===(n=t.detail)||void 0===n?void 0:n.interval))throw new Error("Invalid 'interval' param passed");return b.setEventProcessingInterval(t.detail.interval),[2,j.completed]}))}))}],["log/library/didError",function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){throw new Error("log/library/didError has been deprecated. Will be removed after 3/1/2024.")}))}))}],["log/library/didUseFeature",function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){throw new Error("log/library/didUseFeature has been deprecated. Will be removed after 3/1/2024.")}))}))}]]),hi=new tn({scope:"debug",object:"version",action:"show",handler:function(n){return n.account,n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:j.completed,value:{LIBRARY_VERSION:d}}]}))}))}}),pi="debug/events/show",mi="debug/prepend/add",wi="debug/prepend/remove",yi="debug/store/show",bi="ad/debugSession/start",gi=new Map([[pi,function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){return(n=c(c(c(c([],a((null!=t.store.get(v)?t.store.get(v):[]).map((function(n){return{type:n.type,status:"created",detail:n.detail,timestamp:n.timeStamp}}))),!1),a(t.queue.map((function(n){return{type:n.type,status:"created",detail:n.detail,timestamp:n.timeStamp}}))),!1),a((null!=t.store.get(v)?t.store.get(v):[]).map((function(n){return null!=n.statusEvents?n.statusEvents.map((function(t){return{type:n.type,status:t.type,detail:n.detail,timestamp:t.timeStamp}})):[]})).flat()),!1),a(t.queue.map((function(n){return null!=n.statusEvents?n.statusEvents.map((function(t){return{type:n.type,status:t.type,detail:n.detail,timestamp:t.timeStamp}})):[]})).flat()),!1).filter((function(n){return!n.type.startsWith("debug/")}))).sort((function(n,t){return n.timestamp-t.timestamp})),console.groupCollapsed(" Account ID: ".concat(t.id)),console.table(n),console.groupEnd(),[2,j.completed]}))}))}],[mi,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a,c,d;return o(this,(function(o){if(void 0===(null===(c=i.detail)||void 0===c?void 0:c.eventName))throw new Error("Missing event information");return n=null!==(d=t.read(on,{persist:!0}))&&void 0!==d?d:"[]",e=JSON.parse(n),r=i.detail,u=r.eventName,a=r.eventDetail,e.unshift({eventName:u,eventDetail:a}),t.write(on,JSON.stringify(e),{persist:!0}),[2,j.completed]}))}))}],["debug/prepend/clear",function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.delete(on,{persist:!0}),[2,j.completed]}))}))}],[wi,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a,c;return o(this,(function(o){if(void 0===(null===(a=i.detail)||void 0===a?void 0:a.eventName))throw new Error("Missing event information");return n=null!==(c=t.read(on,{persist:!0}))&&void 0!==c?c:"[]",e=JSON.parse(n),r=i.detail.eventName,u=e.filter((function(n){return n.eventName!==r})),t.write(on,JSON.stringify(u),{persist:!0}),[2,j.completed]}))}))}],[yi,function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){return n=c([],a(t.store.entries()),!1),console.groupCollapsed(" Account ID: ".concat(t.id)),console.table(n),console.groupEnd(),[2,j.completed]}))}))}],[bi,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return function(n){return n.status!==j.waiting}(i)&&(function(n,t){var i;void 0!==(null===(i=n.detail)||void 0===i?void 0:i.minutes)&&function(n,t){var i,e=new Date;n.write(rn,e.setMinutes(Number(e.getMinutes())+Number(null===(i=t.detail)||void 0===i?void 0:i.minutes)).toString(),{persist:!0})}(t,n),function(n){var t;n.globalContext.apstagDEBUG=null!==(t=n.globalContext.apstagDEBUG)&&void 0!==t?t:{},n.globalContext.apstagDEBUG.url=function(n){var t,i,e,r,o=new URL(null!==(e=null===(i=null===(t=null==n?void 0:n.top)||void 0===t?void 0:t.location)||void 0===i?void 0:i.href)&&void 0!==e?e:null===(r=null==n?void 0:n.document)||void 0===r?void 0:r.referrer);return o.searchParams.set("amzn_debug_mode","1"),o.toString()}(n.globalContext)}(t)}(i,t),function(n){return n.queue.filter((function(n){return n.type===bi})).length>1}(t))?[2,j.completed]:function(n){var t=n.read(rn,{persist:!0});return void 0!==t&&new Date>=new Date(Number(t))}(t)?(function(n){n.delete(rn,{persist:!0}),function(n){var t;null===(t=n.globalContext.apstagDEBUG)||void 0===t||delete t.url}(n)}(t),[2,j.completed]):(function(n){n.record(pi).catch((function(n){})),n.record(yi).catch((function(n){}))}(t),[2,j.waiting])}))}))}],["debug/listeners/show",function(n){return n.account,r(void 0,void 0,void 0,(function(){var n,t,i;return o(this,(function(e){return n=new hn,t=n.store.get(s),i=c([],a(t.entries()),!1),console.groupCollapsed(" Listeners"),console.table(i),console.groupEnd(),[2,j.completed]}))}))}]]),Ei=[hi],_i=new Map(c(c([],a(gi),!1),a(en(Ei)),!1));!function(n){n[n.unspecifiedUnknown=0]="unspecifiedUnknown",n[n.lowEntropy=1]="lowEntropy",n[n.highEntropy=2]="highEntropy"}(Lt||(Lt={}));var Si=["brands","mobile","platform"],ji=["architecture","bitness","fullVersionList","model","platformVersion"];function Ci(n,t,i){return r(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i.getHighEntropyValues(c(c([],a(Si),!1),a(ji),!1))];case 1:return e=r.sent(),n.write(t,JSON.stringify(ki(e)),{persist:!0}),[3,3];case 2:return r.sent(),[3,3];case 3:return[2,j.completed]}}))}))}function ki(n){var t,i,e,r={};return r.architecture=n.architecture,r.bitness=n.bitness,r.mobile=n.mobile?1:0,r.model=n.model,r.source=(e=n,ji.some((function(n){return e[n]}))?Lt.highEntropy:Si.some((function(n){return e[n]}))?Lt.lowEntropy:Lt.unspecifiedUnknown),"string"==typeof n.platform&&(r.platform={brand:n.platform,version:null===(t=n.platformVersion)||void 0===t?void 0:t.split(".")}),Array.isArray(n.fullVersionList)?i=n.fullVersionList:Array.isArray(n.brands)&&(i=n.brands),i instanceof Array&&(r.browsers=i.map((function(n){var t;return{brand:n.brand,version:null===(t=n.version)||void 0===t?void 0:t.split(".")}}))),r}var Ii,xi,Oi,Ai="deviceSignal/sua/set",Ri=new Map([[Ai,function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n,i,e,r,u;return o(this,(function(o){switch(o.label){case 0:return n="deviceSignal/sua",i=null===(r=t.globalContext.navigator)||void 0===r?void 0:r.userAgentData,"string"==typeof(e=t.read(n,{persist:!0}))?t.write(n,e):i instanceof Object&&function(n,t,i){n.write(t,JSON.stringify(ki(i)))}(t,n,i),!1!==(null===(u=t.globalContext.apstag)||void 0===u?void 0:u.isGDPRRegion)?[2,j.completed]:"function"!=typeof(null==i?void 0:i.getHighEntropyValues)?[3,2]:[4,Ci(t,n,i)];case 1:o.sent(),o.label=2;case 2:return[2,j.completed]}}))}))}]]),Pi={key:"deviceSignal/cookieDeprecationLabel",default:void 0},Mi=new tn({scope:"deviceSignal",object:"cookieDeprecationLabel",action:"set",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,i;return o(this,(function(e){switch(e.label){case 0:return void 0===(null==(n=t.globalContext.navigator.cookieDeprecationLabel)?void 0:n.getValue)||"function"!=typeof n.getValue?[2,{status:j.cancelled}]:[4,t.executeFuncWithConsent(n,n.getValue)];case 1:return void 0===(i=e.sent())||""===i?[2,{status:j.cancelled}]:(t.update(Pi,(function(){return i})),[2,{status:j.completed,analytics:{gcdl:i}}])}}))}))}}),Ni=en([Mi]);!function(n){n.OpenRTB3_0="OpenRTB3_0"}(Ii||(Ii={})),function(n){n.Display="display",n.Video="video",n.MultiFormat="multi-format"}(xi||(xi={})),function(n){n.Googletag="googletag",n.AppNexus="appnexus",n.SAS="sas"}(Oi||(Oi={}));var Di=function(n){var t,e={id:n.slotID,spec:{placement:{tagid:null!==(t=n.slotName)&&void 0!==t?t:n.slotID}}};return void 0!==n.floor&&(e.flr=n.floor.value,e.flrcur=n.floor.currency),void 0!==n.slotParams&&(e.spec.placement.ext=n.slotParams),e.spec.placement=i(i({},e.spec.placement),Ui(n)),e},Ui=function(n){var t={};return n.mediaType===xi.MultiFormat?t=Ti(n.multiFormatProperties,n.companions):n.mediaType===xi.Video?(t.video={},void 0!==n.sizes&&n.sizes.length>0&&(t.video={w:n.sizes[0][0],h:n.sizes[0][1]}),void 0!==n.companions&&n.companions.length>0&&(t.video.comp=n.companions.map((function(n){return{id:n}})))):n.mediaType===xi.Display&&(t.display={},void 0!==n.sizes&&n.sizes.length>0&&(t.display.displayfmt=n.sizes.map((function(n){return{w:n[0],h:n[1]}})))),t},Ti=function(n,t){var i,e={};if(void 0!==n&&(void 0!==n.display&&(e.display={displayfmt:void 0!==n.display.sizes?n.display.sizes.map((function(n){return{w:n[0],h:n[1]}})):void 0}),void 0!==n.video)){var r=null===(i=n.video.sizes)||void 0===i?void 0:i[0];e.video={w:void 0!==r?r[0]:void 0,h:void 0!==r?r[1]:void 0},void 0!==t&&(e.video.comp=t.map((function(n){return{id:n}})))}return e},Li=function(n,t){var i={};return Object.keys(n).forEach((function(e){"object"==typeof n[e]&&null!==n[e]&&(e===t?Object.assign(i,n[e]):Object.assign(i,Li(n[e],t)))})),i},zi=function(n){return void 0!==n.video&&void 0!==n.display?xi.MultiFormat:void 0!==n.video?xi.Video:xi.Display},Ji=function(n){var t={multiFormatProperties:{}};return void 0!==n.video&&(t.multiFormatProperties.video={sizes:qi(n.video)},void 0!==n.video.comp&&(t.companions=Bi(n.video))),void 0!==n.display&&(t.multiFormatProperties.display={sizes:Fi(n.display)}),t},Fi=function(n){var t=[];return void 0!==n&&(void 0!==n.displayfmt&&n.displayfmt.length>0&&(t=c(c([],a(t),!1),a(n.displayfmt.map((function(n){return[n.w,n.h]}))),!1)),void 0!==n.h&&void 0!==n.w&&(t=c(c([],a(t),!1),[[n.w,n.h]],!1))),t},qi=function(n){var t=[];return void 0!==n&&void 0!==n.h&&void 0!==n.w&&(t=c(c([],a(t),!1),[[n.w,n.h]],!1)),t},Bi=function(n){var t;return void 0!==(null==n?void 0:n.comp)&&n.comp.length>0&&(t=n.comp.map((function(n){return n.id}))),t},Vi=["187","189","306","312","313","314","317","318","290","291","292","293","294","296","297","300","301","302","303","304","305","307","308","310","311","405","454","456","457","458","459","460","461","462","463"],Ki=["Rm3SiT","Z7rJBM","HxqYV1","pg0WhF","j9PaO9","mm3UXx","6i4dB6","8FD8nI"],Gi={3:c([],a(["4-10","5-14","6-1","7-6","7-7","6-7","6-8","7-2","7-3","7-8","7-9","7-10","7-11","7-12","7-13","7-14","7-16","7-18","7-20","7-21","7-22","7-23","7-27","7-28","7-29","7-30","7-34","7-36","7-37","7-39","7-40","7-41","7-42","7-43","7-44","13-2","14-2","14-3","14-8","15-1","23-1","23-2","23-3","23-4","23-5","23-6","23-7","23-8","23-9","23-10","25","25-1","25-2","25-3","25-4","25-5","25-6","25-7","26","26-1","26-2","26-3","26-4"].map((function(n){return"IAB".concat(n)}))),!1),4:c([],a(Vi),!1),5:c([],a(Vi),!1),6:c(c([],a(Vi),!1),a(Ki),!1),7:c(c([],a(Vi),!1),a(Ki),!1)},Hi={site:{id:"id",name:"name",domain:"domain",cattax:1,cat:["1"],sectioncat:["first","second"],pagecat:["first","second"],page:"page",ref:"ref",search:"search",mobile:1,privacypolicy:1,publisher:{id:"id",name:"name",cattax:1,cat:["1"],domain:"domain",ext:{}},content:{id:"id",episode:1,title:"title",series:"series",season:"season",artist:"artist",genre:"genre",album:"album",isrc:"isrc",producer:{id:"id",name:"name",cattax:1,cat:["1"],domain:"domain",ext:{}},url:"url",cattax:1,cat:["1"],prodq:1,context:1,contentrating:"contentrating",userrating:"userrating",qagmediarating:1,keywords:"first, second",kwarray:["first","second"],livestream:1,sourcerelationship:1,len:1,language:"language",langb:"langb",embeddable:1,data:[{id:"id",name:"name",segment:[{id:"id",name:"name",value:"value",ext:{}}],ext:{}}],network:{id:"id",name:"name",domain:"domain",ext:{}},channel:{id:"id",name:"name",domain:"domain",ext:{}},ext:{}},keywords:"first, second",kwarray:["first","second"],ext:{}}},Qi=function(n,t){var i=Object.keys(n).reduce((function(i,e){var r,o=e;if(void 0!==(null==t?void 0:t[o])){var u=n[o];"object"==typeof(r=u)&&!Array.isArray(r)&&Object.keys(r).length>0?i[o]=Qi(u,t[o]):i[o]=function(n,t){var i,e=t.cattax,r=t[n];return(null!==(i=Gi[e])&&void 0!==i?i:[]).length>0&&("cat"===n||"sectcat"===n||"sectioncat"===n||"pagecat"===n)&&Array.isArray(r)?r.filter((function(n){return!Gi[e].includes("".concat(n))})):r}(o,t)}return i}),{});return i},Wi={key:"ad/slots",default:new Map},Yi=new tn({scope:"ad",object:"slot",action:"define",validators:{detail:{detail:Y,"detail.item":$(Z),"detail.item[]":$(Y),"detail.item[].id":Q,"detail.item[].spec":Y,"detail.item[].spec.placement":Y,"detail.item[].spec.placement.ext":null,"detail.item[].spec.placement.tagid":$(Q),"detail.item[].spec.placement.display":$(Y),"detail.item[].spec.placement.display.ext":null,"detail.item[].spec.placement.display.h":$(H),"detail.item[].spec.placement.display.displayfmt":$(Z),"detail.item[].spec.placement.display.displayfmt[]":$(Y),"detail.item[].spec.placement.display.displayfmt[].w":H,"detail.item[].spec.placement.display.displayfmt[].h":H,"detail.item[].spec.placement.video":$(Y),"detail.item[].spec.placement.video.h":H,"detail.item[].spec.placement.video.w":H,"detail.item[].spec.placement.video.ext":null,"detail.item[].spec.placement.video.comp":$(Z),"detail.item[].spec.placement.video.comp[]":Y,"detail.item[].spec.placement.video.comp[].id":$(Q),"detail.item[].spec.placement.video.comp[].display":$(Y),"detail.item[].spec.placement.video.comp[].display.ext":null,"detail.item[].spec.placement.video.comp[].display.displayfmt":$(Z),"detail.item[].spec.placement.video.comp[].display.displayfmt[]":$(Y),"detail.item[].spec.placement.video.comp[].display.displayfmt[].w":H,"detail.item[].spec.placement.video.comp[].display.displayfmt[].h":H,"detail.item[].spec.placement.video.mime":$(Z),"detail.item[].spec.placement.video.mime[]":Q,"detail.item[].version":$(Q),"detail.item[].flr":$(H),"detail.item[].flrcur":$(Q),"detail.item[].deal":$(Z),"detail.item[].deal[]":$(Y),"detail.item[].deal[].id":$(Q),"detail.slots":$(Z),"detail.slots[]":$(Y),"detail.slots[].slotID":Q,"detail.slots[].slotName":$(Q),"detail.slots[].sizes":$(Z),"detail.slots[].sizes[]":Z,"detail.slots[].sizes[][]":H,"detail.slots[].mediaType":$(X([xi.Display,xi.Video,xi.MultiFormat])),"detail.slots[].slotParams":null,"detail.slots[].floor":$(Y),"detail.slots[].floor.currency":X("USD"),"detail.slots[].floor.value":H,"detail.slots[].multiFormatProperties":$(Y),"detail.slots[].multiFormatProperties.display":$(Y),"detail.slots[].multiFormatProperties.display.sizes":$(Z),"detail.slots[].multiFormatProperties.display.sizes[]":Z,"detail.slots[].multiFormatProperties.display.sizes[][]":H,"detail.slots[].multiFormatProperties.video":$(Y),"detail.slots[].multiFormatProperties.video.sizes":$(Z),"detail.slots[].multiFormatProperties.video.sizes[]":Z,"detail.slots[].multiFormatProperties.video.sizes[][]":H,"detail.slots[].companions":$(Z),"detail.slots[].companions[]":Q}},handler:function(n){var t=n.account,i=n.detail;return r(void 0,void 0,void 0,(function(){var n,e,r,u;return o(this,(function(o){if(0===(n=c(c([],a(null!==(e=i.item)&&void 0!==e?e:[]),!1),a(null!==(u=null===(r=i.slots)||void 0===r?void 0:r.map(Di))&&void 0!==u?u:[]),!1)).length)throw new Error("Expecting a non-empty array for 'item' (OpenRTB) or 'slots' (legacy)");return n.forEach((function(n){t.update(Wi,(function(t){return t.set(n.id,n)}))})),[2,{status:j.completed}]}))}))}}),Zi="ad/ASRSlot/render",Xi=new Map([[Zi,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){if(void 0===(null===(n=i.detail)||void 0===n?void 0:n.id)||void 0===(null===(e=i.detail)||void 0===e?void 0:e.targeting))throw new Error("Missing event detail");return function(n,t,i,e){var r,o,u,a=i.globalContext.document.createElement("iframe"),c=null===(r=t.get("amznsz"))||void 0===r?void 0:r.split("x"),d=t.get("amzniid"),s=n;if(!(void 0===d||void 0===s||void 0===c||c.length<2)){a.style.marginLeft="0",a.style.marginTop="0",a.style.height="".concat(c[1],"px"),a.style.width="100%",a.setAttribute("scrolling","no"),a.setAttribute("frameborder","0");var v=i.globalContext.document.createElement("div"),l=null!==(o=null==e?void 0:e.location)&&void 0!==o?o:"afterend",f=i.globalContext.document.getElementById(s);if(null!=f){f.insertAdjacentElement(l,v),v.appendChild(a);var h=null===(u=null==a?void 0:a.contentWindow)||void 0===u?void 0:u.document;void 0!==h&&(h.open(),h.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><style>html{height:100%}body{height:100%;margin:0;overflow:hidden}</style></head><body><script>window.parent.apstag.renderImp(document, "'+d+'", {"inheritSize": true});<\/script></body></html>'),h.close())}}}(i.detail.id,i.detail.targeting,t),[2,j.completed]}))}))}]]);function $i(n){return n.get=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var i=Map.prototype.get.apply(this,n);return Map.prototype.delete.apply(this,n),i},n}var ne,te,ie={key:"ad/targeting",default:new Map,postProcessor:$i};function ee(n,t){return r(this,void 0,void 0,(function(){var e,r;return o(this,(function(o){switch(o.label){case 0:return function(n){n.forEach((function(n){if(void 0===n.deal)return n;n.deal.some((function(n){return n.id===ne.equinoxWidget}))&&function(n){void 0!==n.spec.placement.display&&(n.spec.placement.display.displayfmt=[{w:999,h:999}])}(n)}))}(n),[4,oe(n,t)];case 1:return o.sent(),e=function(n){var t={};return n.forEach((function(n){var e=function(n){var t,e,r,o,u,a={},c="93b7dd52-a8ce-11ed-afa1-0242ac120002";return void 0!==(null===(t=n.deal)||void 0===t?void 0:t.find((function(n){return n.id==="amazon:".concat(c)})))&&(a=i(i({},a),{program:"apscustom"})),i(i({},a),null!==(u=null===(o=null===(r=null===(e=n.spec.placement.display)||void 0===e?void 0:e.ext)||void 0===r?void 0:r.amazon)||void 0===o?void 0:o[c])&&void 0!==u?u:{})}(n);t=i(i({},t),e)})),t}(n),[4,re(n,e,t)];case 2:return o.sent(),r=t.use(ie),[4,ue(n,r,t)];case 3:return o.sent(),[2]}}))}))}function re(n,t,i){return r(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return e={itemIds:n.map((function(n){return n.id})),publisherParams:t},function(n){return n.some((function(n){return function(n){var t;return!0===(null===(t=n.deal)||void 0===t?void 0:t.some((function(n){return n.id===ne.equinoxWidget})))}(n)}))}(n)&&(e._endpointDomain=te.equinoxWidget),[4,i.record(fe.ad_targeting_fetch,e)];case 1:return r.sent(),[2]}}))}))}function oe(n,t){return r(this,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return[4,t.recordListener(Yi,{item:n})];case 1:return i.sent(),[2]}}))}))}function ue(n,t,i){return r(this,void 0,void 0,(function(){var e,r,a,c,d,s,v;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),e=u(n),r=e.next(),o.label=1;case 1:return r.done?[3,4]:(a=r.value,void 0===(c=t.get(a.id))?[3,3]:[4,ae(a,c,i)]);case 2:o.sent(),o.label=3;case 3:return r=e.next(),[3,1];case 4:return[3,7];case 5:return d=o.sent(),s={error:d},[3,7];case 6:try{r&&!r.done&&(v=e.return)&&v.call(e)}finally{if(s)throw s.error}return[7];case 7:return[2]}}))}))}function ae(n,t,i){var e;return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return!0!==(null===(e=n.deal)||void 0===e?void 0:e.some((function(n){return n.id===ne.equinoxWidget})))?[3,2]:[4,i.record(Zi,{id:n.id,targeting:t})];case 1:return r.sent(),[3,3];case 2:throw new Error("Not implemented: The ad/slot/render event can only be used with specific deal IDs currently");case 3:return[2]}}))}))}!function(n){n.equinoxWidget="amazon:93b7dd52-a8ce-11ed-afa1-0242ac120002"}(ne||(ne={})),function(n){n.equinoxWidget="aax-us-east.amazon-adsystem.com"}(te||(te={}));var ce={key:"ad/attachTargeting",default:void 0},de={key:"cxm/isConfigLoadInitiated",default:!1};function se(n){var t=n.account,e=n.selectedSlots,u=n.publisherParams,c=n.timeout,d=n._endpointDomain,s=n.initConfig;return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=function(n){return n.map((function(n){return function(n){if(void 0!==n.version&&n.version!==Ii.OpenRTB3_0)throw new Error("Invalid OpenRTB version specified");var t=n.spec.placement,e=i({slotID:n.id,slotName:t.tagid},function(n){var t,e=zi(n),r={mediaType:e};return e===xi.MultiFormat?r=i(i({},r),Ji(n)):e===xi.Display?r.sizes=Fi(n.display):e===xi.Video&&(r.sizes=qi(n.video),void 0!==(null===(t=n.video)||void 0===t?void 0:t.comp)&&(r.companions=Bi(n.video))),r}(t)),r=function(n){var t=Li(n,"ext");return Object.entries(t).forEach((function(n){var i=a(n,2),e=i[0],r=i[1];"string"!=typeof r&&(t[e]=JSON.stringify(r))})),0!==Object.keys(t).length?t:void 0}(n);if(void 0!==r&&(e.slotParams=r),void 0!==n.flr){if(void 0!==n.flrcur&&"USD"!==n.flrcur)throw new Error('item.flrcur: only "USD" is currently supported');e.floor={value:n.flr,currency:"USD"}}return e}(n)}))}(e),[4,ve({account:t,legacySlots:n,publisherParams:u,timeout:c,_endpointDomain:d,initConfig:s})];case 1:return[2,r.sent()]}}))}))}function ve(n){var t=n.account,i=n.legacySlots,e=n.publisherParams,u=n.timeout,a=n._endpointDomain,c=n.initConfig;return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){if(void 0===t.globalContext.apstag)throw new Error("apstag undefined in global scope");t.globalContext.apstag.clientFetchBids({slots:i,params:e,timeout:null!=u?u:6e4,_endpointDomain:a},(function(t){n(t)}),{initConfig:c})}))];case 1:return[2,n.sent()]}}))}))}var le,fe={ad_schain_define:"ad/schain/define",ad_slot_import:"ad_slot_import",ad_slot_render:"ad/slot/render",ad_targeting_fetch:"ad/targeting/fetch",ad_targeting_attach:"ad/targeting/attach",ad_signals_define:"ad/signals/define",cxm_config_load:"cxm/config/load"},he=new Map(c(c([],a(en([Yi])),!1),[[fe.ad_slot_import,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){if(void 0===(null===(n=i.detail)||void 0===n?void 0:n.adServer))throw new Error("adServer: a valid value must be provided");if(i.detail.adServer===Oi.Googletag)return t.write("ad/googletagSlotAutoImport",!0),[2,j.completed];throw new Error("adServer: value provided isn't currently supported")}))}))}],[fe.ad_schain_define,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){if(void 0===(null===(n=i.detail)||void 0===n?void 0:n.schain))throw new Error("Missing schain object");return t.write("ad/schain",i.detail.schain),[2,j.completed]}))}))}],[fe.ad_slot_render,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){switch(r.label){case 0:return void 0===(n=null===(e=i.detail)||void 0===e?void 0:e.item)?[3,2]:[4,ee(n,t)];case 1:return r.sent(),[2,j.completed];case 2:throw new Error('Not implemented: The ad/slot/render event can only be used with the "item" attribute currently')}}))}))}],[fe.ad_targeting_fetch,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,c,d,s,v,l;return o(this,(function(o){switch(o.label){case 0:return void 0===t.globalContext.apstag?[2,j.waiting]:(function(n){n.use(de)||(n.update(de,(function(){return!0})),n.record(fe.cxm_config_load).catch((function(n){})))}(t),function(n){(function(n){return!function(n){var t,i;try{for(var e=u(n.queue),r=e.next();!r.done;r=e.next()){var o=r.value;if(o.type===bi&&o.status===j.waiting)return!0}}catch(n){t={error:n}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}return!1}(n)&&void 0!==n.read(rn,{persist:!0})})(n)&&n.record(bi).catch((function(n){}))}(t),n=function(n){return Array.from(n.use(Wi).values())}(t),e=function(n,t){var i=n;return void 0!==t&&t.length>0&&(i=n.filter((function(n){return t.includes(n.id)}))),i}(n,null===(d=i.detail)||void 0===d?void 0:d.itemIds),r=null===(s=i.detail)||void 0===s?void 0:s.publisherParams,[4,se({account:t,selectedSlots:e,publisherParams:r,timeout:null===(v=i.detail)||void 0===v?void 0:v.timeout,_endpointDomain:null===(l=i.detail)||void 0===l?void 0:l._endpointDomain,initConfig:{pubID:t.id,isSelfServePub:36===t.id.length,deals:!0}})]);case 1:return c=o.sent(),function(n,t){n.update(ie,(function(n){return function(n,t){t.forEach((function(t){n.set(t.slotID,new Map)}))}(n,t),function(n,t){t.forEach((function(t){Object.entries(t.targeting).forEach((function(i){var e=a(i,2),r=e[0],o=e[1];Map.prototype.get.apply(n,[t.slotID]).set(r,o)}))}))}(n,t),n}))}(t,c),function(n){var t=function(t){var i=t.adServer,e=t.itemIds;n.record(fe.ad_targeting_attach,{itemIds:e,adServer:i}).catch((function(n){}))};n.update(ce,(function(){return t}))}(t),[2,j.completed]}}))}))}],[fe.ad_targeting_attach,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u;return o(this,(function(o){if(void 0===(n=null===(r=i.detail)||void 0===r?void 0:r.adServer))throw new Error("adServer must be defined");if(!Object.values(Oi).includes(n))throw new Error("adServer: ".concat(n," isn't currently supported"));return e={pubID:t.id},t.globalContext.apstag.setDisplayBids(null===(u=i.detail)||void 0===u?void 0:u.itemIds,{initConfig:e,adServer:n}),[2,j.completed]}))}))}],[fe.ad_signals_define,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){if(void 0===i.detail||!("context"in i.detail))throw new Error("Missing detail object");return n=null!=i.detail.context?Qi(Hi,i.detail.context):i.detail.context,t.update(tt,(function(){return n})),[2,j.completed]}))}))}],[fe.cxm_config_load,function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,i,e;return o(this,(function(r){switch(r.label){case 0:return void 0===(null===(e=t.globalContext.apstag)||void 0===e?void 0:e._load3PLibraryConfig)?[2,j.waiting]:(n=t.id,36===t.id.length&&(n="600",i=t.id),[4,new Promise((function(e,r){var o;if(void 0===(null===(o=t.globalContext.apstag)||void 0===o?void 0:o._load3PLibraryConfig))throw new Error("apstag._load3PLibraryConfig is undefined");t.globalContext.apstag._load3PLibraryConfig(t.id,{sourceID:n,publisherUUID:i},e,r)}))]);case 1:return r.sent(),[2,j.completed]}}))}))}]],!1));!function(n){n.equinoxWidget="amazon:93b7dd52-a8ce-11ed-afa1-0242ac120002"}(le||(le={}));var pe,me=new Map([["ad/container/didInitialize",function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a;return o(this,(function(o){switch(o.label){case 0:return n=null===(u=i.detail)||void 0===u?void 0:u.id,e=null===(a=i.detail)||void 0===a?void 0:a.labels,void 0!==n&&void 0!==e&&e.includes(le.equinoxWidget)?(r=[{id:n,spec:{placement:{display:{}}},deal:[{id:le.equinoxWidget}]}],[4,t.record(fe.ad_slot_render,{item:r})]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2,j.completed]}}))}))}]]),we={key:"_monitoring/statusesByEventIdentifier",default:new Map},ye=function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a;return o(this,(function(o){if(void 0===(n=null===(a=i.detail)||void 0===a?void 0:a.eventIdentifier))throw new Error("Missing eventIdentifier parameter");return e=t.use(we),r="".concat(i.type,":").concat(n),void 0!==(u=e.get(r))?[2,u]:[2,j.waiting]}))}))},be=function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a,c;return o(this,(function(o){if(void 0===(n=null===(u=i.detail)||void 0===u?void 0:u.eventIdentifier))throw new Error("Missing eventIdentifier parameter");if(void 0===(e=null===(a=i.detail)||void 0===a?void 0:a.statusUpdate))throw new Error("Missing statusUpdate parameter");if(!(e in j))throw new Error("Invalid statusUpdate parameter. Expected one of ".concat(Object.values(j).join(", ")));if(void 0===(r=null===(c=i.detail)||void 0===c?void 0:c.pairedEvents)||r.length<1||r.some((function(n){return"string"!=typeof n})))throw new Error("Parameter pairedEvents must be a non-empty array of string");return r.forEach((function(i){var r="".concat(i,":").concat(n);t.update(we,(function(n){return n.set(r,e)}))})),[2,j.completed]}))}))},ge=new Map([["_monitor/testing/only",ye],["_update/testing/only",be],["_legacy/bidRequest/monitor",ye],["_legacy/bidRequest/didComplete",be]]),Ee=new tn({scope:"prebid",object:"analyticsEvent",action:"track",handler:function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r,u,a,c,d,s;return o(this,(function(o){switch(o.label){case 0:return void 0===(null===(u=e.detail)||void 0===u?void 0:u.eventType)||void 0===(null===(a=e.detail)||void 0===a?void 0:a.eventArgs)||void 0===(null===(s=null===(d=null===(c=e.detail)||void 0===c?void 0:c.config)||void 0===d?void 0:d.options)||void 0===s?void 0:s.accountID)?[2,{status:j.cancelled}]:(n={eventType:e.detail.eventType,metadata:e.detail.metadata,config:e.detail.config},[4,t.globalContext.fetch("".concat("https://prod.us-east-1.cxm-bcn.publisher-services.amazon.dev/v1/events/prebid"),_e(e.detail))]);case 1:return(r=o.sent()).ok?[2,{status:j.completed,analytics:n}]:[2,{status:j.cancelled,analytics:i(i({},n),{message:"Request failed: ".concat(r.status)})}]}}))}))}}),_e=function(n){var t={accountId:n.config.options.accountID,events:[{eventArgs:n.eventArgs,eventType:n.eventType}]};return{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},Se={key:"prebid/config",default:void 0};!function(n){n.NotStarted="NOT STARTED",n.Loading="LOADING",n.Complete="COMPLETE"}(pe||(pe={}));var je,Ce,ke={key:"prebid/configRequestState",default:pe.NotStarted},Ie=new tn({scope:"prebid",object:"config",action:"fetch",handler:function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r,u,a,c,d,s,v,l;return o(this,(function(o){switch(o.label){case 0:if((n=t.use(ke))===pe.Loading)return[2,{status:j.waiting}];if(r={metadata:null===(l=null==e?void 0:e.detail)||void 0===l?void 0:l.metadata},n===pe.Complete&&void 0!==(u=t.use(Se)))return[2,{status:j.completed,value:JSON.parse(u),analytics:r}];o.label=1;case 1:return o.trys.push([1,4,,5]),t.update(ke,(function(){return pe.Loading})),a="".concat("https://c.amazon-adsystem.com/cdn/prod/config","?src=").concat(t.id),[4,t.globalContext.fetch(a)];case 2:return c=o.sent(),t.update(ke,(function(){return pe.Complete})),c.ok?[4,c.json()]:[2,{status:j.cancelled,analytics:i(i({},r),{message:"Config request failed"})}];case 3:return d=o.sent(),s=xe(t,d),t.update(Se,(function(){return JSON.stringify(s)}),{persist:!0}),[2,{status:j.completed,value:s,analytics:r}];case 4:return v=o.sent(),[2,{status:j.cancelled,analytics:i(i({},r),{message:v.message})}];case 5:return[2]}}))}))}}),xe=function(n,t){var i,e,r,o;return{analyticsConfig:{options:{accountID:n.id,sampling:null===(i=t.pbjs)||void 0===i?void 0:i.sampleRate},includeEvents:null===(e=t.pbjs)||void 0===e?void 0:e.allowedEvents},idConfig:{params:{accountID:n.id,enabled:null===(r=t.pbjs)||void 0===r?void 0:r.enabled,treatments:null===(o=t.pbjs)||void 0===o?void 0:o.treatments}}}},Oe={key:"prebid/eidsConfig",default:"{}"};!function(n){n.APSSignalIQ="_apsIdTreatment",n.Audigent="hadronId",n.ID5="id5id",n.Liveramp="idl_env",n.Lotame="lotamePanoramaId",n.Pubcommon="pubcid",n.Publink="publinkId",n.ThirtyThree="33acrossId",n.Yahoo="connectId"}(Ce||(Ce={}));var Ae=new Map([[xt,Ce.Audigent],["id5",Ce.ID5],[Nt,Ce.Liveramp],[Qt,Ce.Lotame],[Zt,Ce.Pubcommon],[ni,Ce.Publink],[Ct,Ce.ThirtyThree],[ri,Ce.Yahoo]]),Re=((je={})[Ce.Audigent]={source:"audigent.com",atype:1},je[Ce.ID5]={source:"id5-sync.com",atype:1},je[Ce.Liveramp]={source:"liveramp.com",atype:3},je[Ce.Lotame]={source:"crwdcntrl.net",atype:1},je[Ce.Pubcommon]={source:"pubcid.org",atype:1},je[Ce.Publink]={source:"epsilon.com",atype:3},je[Ce.ThirtyThree]={source:"33across.com",atype:1},je[Ce.Yahoo]={source:"yahoo.com",atype:3},je),Pe=new tn({scope:"prebid",object:"eidsConfig",action:"get",handler:function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r,u,a;return o(this,(function(o){return void 0===(null===(r=t.globalContext.apstag)||void 0===r?void 0:r._atsaaiod)?[2,{status:j.waiting}]:(t.update(Oe,(function(){return JSON.stringify(i({},Re))}),{persist:!0}),n={metadata:null===(u=null==e?void 0:e.detail)||void 0===u?void 0:u.metadata,config:null===(a=null==e?void 0:e.detail)||void 0===a?void 0:a.config},[2,{status:j.completed,analytics:n}])}))}))}}),Me=new Set(c(["CONTROL_HOLD_OUT","CLEAN"],a(Ae.keys()),!1));var Ne={key:"prebid/ids",default:void 0},De=new tn({scope:"prebid",object:"ids",action:"get",handler:function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r,c,d,s,v,l,f;return o(this,(function(o){switch(o.label){case 0:return void 0===(null===(s=t.globalContext.apstag)||void 0===s?void 0:s._atsaaiod)?[2,{status:j.waiting}]:(t.recordListenerNonBlocking(si),void 0!==(n=t.use(gt))&&(r=Object.fromEntries(Object.entries(n).map((function(n){var t=a(n,2),i=t[0],e=t[1];return[Ae.get(i),e]})))),[4,t.recordListener(Ie,{metadata:null===(v=null==e?void 0:e.detail)||void 0===v?void 0:v.metadata})]);case 1:return c=o.sent(),d={metadata:null===(l=null==e?void 0:e.detail)||void 0===l?void 0:l.metadata},null!==(f=c.idConfig.params.enabled)&&void 0!==f&&f?(null!=c.idConfig.params.treatments&&(r=function(n,t){if(!function(n){var t=n.reduce((function(n,t){return n+t.percent}),0),i=100===t,e=n.reduce((function(n,t){var i=t.treatment;return n&&Me.has(i)}),!0);return i&&e}(t))return n;var e=function(n){var t,i,e=100*Math.random(),r=0;try{for(var o=u(n),a=o.next();!a.done;a=o.next()){var c=a.value;if(e<=(r+=c.percent))return c.treatment}}catch(n){t={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}throw new Error("Invalid treatment percentages")}(t);return function(n,t){var e,r=((e={})[Ce.APSSignalIQ]=t,e),o=Ae.get(t);switch(t){case"CONTROL_HOLD_OUT":return i(i({},n),r);case"CLEAN":return r;default:return void 0!==o&&void 0!==(null==n?void 0:n[o])&&(r[o]=n[o]),r}}(n,e)}(r,c.idConfig.params.treatments)),t.update(Ne,(function(){return r})),[2,{status:j.completed,value:r,analytics:d}]):[2,{status:j.cancelled,analytics:d}]}}))}))}}),Ue=en([Ee,Ie,Pe,De]),Te=new Map([["ad/record/delete",function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.dpa)?[2,j.waiting]:[4,new Promise((function(n,i){var e;try{null===(e=t.globalContext.apstag)||void 0===e||e.dpa((function(){return n()}))}catch(n){i(new Error("apstag.dpa error: ".concat(n)))}}))];case 1:return i.sent(),[2,j.completed]}}))}))}],["ad/record/renew",function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){switch(e.label){case 0:return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.rpa)?[2,j.waiting]:[4,new Promise((function(n,e){var r,o;if(void 0===(null===(r=i.detail)||void 0===r?void 0:r.config))throw new Error("Missing tokenConfig object");try{null===(o=t.globalContext.apstag)||void 0===o||o.rpa(i.detail.config,(function(){return n()}),i.detail.setCookie,t.id)}catch(n){e(new Error("apstag.rpa error: ".concat(n)))}}))];case 1:return e.sent(),[2,j.completed]}}))}))}],["ad/record/rr",function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){if(void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.rr))return[2,j.waiting];if(void 0===(null===(r=e.detail)||void 0===r?void 0:r.config))throw new Error("Missing config object");return t.globalContext.apstag.rr(i({accountID:t.id},e.detail.config)),[2,j.completed]}))}))}],["ad/record/update",function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){switch(e.label){case 0:return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.upa)?[2,j.waiting]:[4,new Promise((function(n,e){var r,o;if(void 0===(null===(r=i.detail)||void 0===r?void 0:r.config))throw new Error("Missing tokenConfig object");try{null===(o=t.globalContext.apstag)||void 0===o||o.upa(i.detail.config,(function(){return n()}),i.detail.setCookie,"api",t.id)}catch(n){e(new Error("apstag.upa error: ".concat(n)))}}))];case 1:return e.sent(),[2,j.completed]}}))}))}]]);function Le(n){return r(this,void 0,void 0,(function(){var t,i,e,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,crypto.subtle.importKey("jwk",{alg:"A128CTR",ext:!0,k:"ERTYQsuodPO_Um-5jFmOLg",key_ops:["encrypt"],kty:"oct"},"AES-CTR",!0,["encrypt"])];case 1:return t=o.sent(),i=(new TextEncoder).encode(n),r=Uint8Array.bind,[4,crypto.subtle.encrypt({name:"AES-CTR",counter:new Uint8Array(16),length:128},t,i)];case 2:return e=new(r.apply(Uint8Array,[void 0,o.sent()])),[2,btoa(String.fromCharCode.apply(String,c([],a(e),!1)))];case 3:return o.sent(),[2,null];case 4:return[2]}}))}))}var ze="google/secureSignals/initialize",Je=new Map([["google/secureSignals/set",function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return void 0===t.globalContext.googletag&&(t.globalContext.googletag={}),void 0===t.globalContext.googletag.secureSignalProviders&&(t.globalContext.googletag.secureSignalProviders=[]),t.globalContext.googletag.secureSignalProviders.push({networkCode:"amazon.com",collectorFunction:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.record(ze)];case 1:return[2,n.sent().encryptedSignal]}}))}))}}),[2,j.completed]}))}))}],[ze,function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,i,e,r,u,a,c,d;return o(this,(function(o){switch(o.label){case 0:return void 0===(n=null===(c=t.globalContext.apstag)||void 0===c?void 0:c._getSlotIdToNameMapping)?[2,{status:j.waiting}]:(i=n(),0===Object.keys(i).length?[2,{status:j.waiting}]:(void 0===(e=null===(d=t.globalContext.location)||void 0===d?void 0:d.href)&&(e=""),r="".concat(e,";").concat(JSON.stringify(i)).substr(0,225),u={status:j.completed},a={},[4,Le(r)]));case 1:return[2,(u.value=(a.encryptedSignal=o.sent(),a),u)]}}))}))}]]),Fe="widget/toolbox/open",qe="widget/toolbox/start",Be=new Map([["widget/toolbox/end",function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.record(wi,{eventName:qe}).catch((function(n){})),[2,j.completed]}))}))}],[Fe,function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return function(n,t){var i=t.globalContext.document.createElement("script");i.src="https://c.toolbox.aps.amazon-adsystem.com/toolbox.js",i.async=!0,t.globalContext.document.head.appendChild(i)}(0,t),[2,j.completed]}))}))}],[qe,function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.record(mi,{eventName:i.type}).catch((function(n){})),t.record(Fe).catch((function(n){})),[2,j.completed]}))}))}]]),Ve="_config/events/activations",Ke="_config/events/deactivations",Ge=new Map([["_config/events/activate",function(n){var t=n.customEvent,i=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){return(n=null!=i.store.get(Ve)?i.store.get(Ve):new Set).add(t.detail.name),i.store.set(Ve,n),[2,j.completed]}))}))}],["_config/events/deactivate",function(n){var t=n.customEvent,i=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){return(n=null!=i.store.get(Ke)?i.store.get(Ke):new Set).add(t.detail.name),i.store.set(Ke,n),[2,j.completed]}))}))}]]),He={key:"sessionMarker/marker",default:void 0},Qe=new Map([["sessionMarker/marker/sync",function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return"object"!=typeof t.globalContext.crypto||"function"!=typeof t.globalContext.crypto.randomUUID?[2,j.cancelled]:(function(n){var t,i=n.use(He,{persist:!0});if(0===(null!=i?i:"").length)return!1;var e=null!==(t=null==i?void 0:i.split("_")[1])&&void 0!==t?t:"";if(0===e.length)return!1;var r=new Date(e);return!((new Date).valueOf()-r.valueOf()>=2592e6)}(t)||(function(n){n.delete(He.key,{persist:!0})}(t),function(n){var t=n.globalContext.crypto.randomUUID();if(36!==t.length)throw new Error("Invalid PEID generated: ".concat(t));var i="".concat(t,"_").concat((new Date).toISOString());n.update(He,(function(){return i}),{persist:!0})}(t)),function(n){var t=n.use(He,{persist:!0});n.update(He,(function(){return t}))}(t),[2,j.completed])}))}))}]]),We=new tn({scope:"legacy",object:"rpa",action:"enqueue",validators:{detail:{detail:Y,"detail.tokenConfig":null,"detail.callback":null,"detail.setCookie":$(W)}},handler:function(n){var t=n.account,i=n.detail;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.rpa)||void 0===(null===(e=t.globalContext.apstag)||void 0===e?void 0:e.debug)?[2,{status:j.waiting}]:(t.globalContext.apstag.rpa(i.tokenConfig,i.callback,i.setCookie,t.id),[2,{status:j.completed}])}))}))}}),Ye=new tn({scope:"legacy",object:"dpa",action:"enqueue",validators:{detail:{detail:Y,"detail.callback":null}},handler:function(n){var t=n.account,i=n.detail;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.dpa)||void 0===(null===(e=t.globalContext.apstag)||void 0===e?void 0:e.debug)?[2,{status:j.waiting}]:(t.globalContext.apstag.dpa(i.callback),[2,{status:j.completed}])}))}))}}),Ze=new tn({scope:"legacy",object:"upa",action:"enqueue",validators:{detail:{detail:Y,"detail.tokenConfig":null,"detail.callback":null,"detail.setCookie":$(W)}},handler:function(n){var t=n.account,i=n.detail;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.upa)||void 0===(null===(e=t.globalContext.apstag)||void 0===e?void 0:e.debug)?[2,{status:j.waiting}]:(t.globalContext.apstag.upa(i.tokenConfig,i.callback,i.setCookie,"bootstrap",t.id),[2,{status:j.completed}])}))}))}}),Xe=new tn({scope:"legacy",object:"queue",action:"push",validators:{detail:{detail:Y,"detail.callback":null}},handler:function(n){var t=n.detail;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return void 0!==t.callback&&null!==t.callback&&t.callback(),[2,{status:j.completed}]}))}))}}),$e=new Map([["legacy/init/enqueue",function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u;return o(this,(function(o){return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.init)||void 0===(null===(e=t.globalContext.apstag)||void 0===e?void 0:e.debug)?[2,j.waiting]:(t.globalContext.apstag.init(null===(r=i.detail)||void 0===r?void 0:r.config,null===(u=i.detail)||void 0===u?void 0:u.callback),[2,j.completed])}))}))}],["legacy/fetchBids/enqueue",function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u;return o(this,(function(o){return void 0===(null===(n=t.globalContext.apstag)||void 0===n?void 0:n.fetchBids)||void 0===(null===(e=t.globalContext.apstag)||void 0===e?void 0:e.debug)?[2,j.waiting]:(t.globalContext.apstag.fetchBids(null===(r=i.detail)||void 0===r?void 0:r.bidConfig,null===(u=i.detail)||void 0===u?void 0:u.callback),[2,j.completed])}))}))}]]),nr=[Ze,Ye,We,Xe],tr=new Map(c(c([],a($e),!1),a(en(nr)),!1)),ir={key:"adExchangeBidFetching/bidURLs",default:new Map,postProcessor:$i},er={key:"adExchangeBidFetching/useFetch",default:!1},rr={key:"protectedAudience/defaultAuctionEnvironment",default:void 0},or={key:"protectedAudience/slotAuctionEnvironment",default:new Map},ur={key:"regulations/regsString",default:""},ar=new tn({scope:"adExchangeBidFetching",object:"bidURLs",action:"update",handler:function(n){var t=n.account,e=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,r,u,d,s,v,l,f,h;return o(this,(function(o){if(void 0===e.detail||void 0===e.detail.legacyURL)throw new Error("Missing legacyURL");return n=new URL(e.detail.legacyURL),(r=t.use(ur)).length>0&&n.searchParams.set("regs",r),t.use(er)&&n.searchParams.set("rt","j"),null!=(u=n.searchParams.get("slots"))&&(d=JSON.parse(u),cr(t,d),n.searchParams.set("slots",JSON.stringify(d))),s=n.toString(),v=null===(h=e.detail)||void 0===h?void 0:h.bidRequestIndex,t.update(ir,(function(n){if(void 0===e.detail||void 0===v)throw new Error("Missing bidRequestIndex");return n.set(e.detail.bidRequestIndex,s)})),l={urlLength:s.length},f=function(n){var t={};try{var i=new URL(n);return c([],a(new URLSearchParams(i.search)),!1).forEach((function(n){var i=a(n,2),e=i[0],r=i[1];t[e]=r.length})),t}catch(n){}}(s),void 0!==f&&(l=i(i({},l),{urlParamLengths:f})),[2,{status:j.completed,analytics:l}]}))}))}}),cr=function(n,t){var i=n.use(rr),e=n.use(or);t.forEach((function(n){var t,r=e.get(null!==(t=n.sd)&&void 0!==t?t:"");n.ae=void 0!==r?r:i}))},dr=new tn({scope:"adExchangeBidFetching",object:"fetch",action:"activate",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.update(er,(function(){return!0})),[2,{status:j.completed}]}))}))}}),sr=new tn({scope:"protectedAudience",object:"gptSlotConfig",action:"set",handler:function(n){n.account;var t=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a,c,d,s,v;return o(this,(function(o){if(void 0===(null===(c=t.detail)||void 0===c?void 0:c.gptSlot))return[2,{status:j.cancelled}];if(void 0===(null===(d=t.detail)||void 0===d?void 0:d.componentAuctionConfig))throw new Error("Auction config must be defined.");if(n=t.detail,e=n.gptSlot,void 0===(r=n.componentAuctionConfig).decisionLogicURL||null===r.decisionLogicURL)throw new Error("Auction config must have a decisionLogicURL.");return u=h(),a={printDebugSignalsToConsole:u,debugURL:"https://analytics.aps.amazon-adsystem.com/logevent/putRecord"},u&&(null===(s=r.interestGroupBuyers)||void 0===s||s.push("https://web-client-scenarios.aps.amazon.dev"),null===(v=r.interestGroupBuyers)||void 0===v||v.push("https://aps-sandbox.net")),e.setConfig({componentAuction:[{configKey:r.decisionLogicURL,auctionConfig:i(i({},r),{sellerSignals:i(i({},a),r.sellerSignals)})}]}),[2,{status:j.completed}]}))}))}}),vr=new tn({scope:"protectedAudience",object:"componentAuctionData",action:"attach",handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r;return o(this,(function(o){return void 0===(null===(r=null===(e=i.detail)||void 0===e?void 0:e.igi)||void 0===r?void 0:r.igs)?[2,{status:j.cancelled}]:(n=i.detail.igi.igs,t.globalContext.googletag.cmd.push((function(i){void 0===i&&(i=n);var e=t.globalContext.googletag.pubads().getSlots(),r=new Map(e.map((function(n){return[n.getSlotElementId(),n]})));i.forEach((function(n){var i;null===(i=n.impids)||void 0===i||i.forEach((function(i){t.recordListenerNonBlocking(sr,{gptSlot:r.get(i),componentAuctionConfig:n.config})}))}))})),[2,{status:j.completed}])}))}))}}),lr=new tn({scope:"adExchangeBidFetching",object:"amazonAdExchange",action:"fetch",handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a;return o(this,(function(o){switch(o.label){case 0:if(void 0===(null===(a=null==i?void 0:i.detail)||void 0===a?void 0:a.URL))throw new Error("Bid URL must be defined.");return void 0===t.globalContext.apstag?[2,{status:j.waiting}]:[4,t.globalContext.fetch(i.detail.URL)];case 1:if(!(n=o.sent()).ok)throw new Error("Fetch failed with status: ".concat(n.status));return[4,n.json()];case 2:return e=o.sent(),r=e.contextual,u=e.igi,void 0!==r&&t.globalContext.apstag.bids(r),void 0!==u&&t.recordListener(vr,{igi:u}).catch((function(n){})),[2,{status:j.completed}]}}))}))}}),fr=en([ar,dr,lr]),hr=new tn({scope:"cellophane",object:"xhrBidOnLoad",action:"enter",handler:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:j.completed}]}))}))}}),pr=new tn({scope:"cellophane",object:"bids",action:"enter",handler:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:j.completed}]}))}))}}),mr=new tn({scope:"cellophane",object:"fetchBids",action:"enter",handler:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:j.completed}]}))}))}}),wr={key:"cellophane/config",default:void 0},yr=new tn({scope:"cellophane",object:"init",action:"enter",handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a,c;return o(this,(function(o){switch(o.label){case 0:return n=null===(r=i.detail)||void 0===r?void 0:r.config,(e=[]).push(t.record(li,{rates:{error:.001,status:1e-4}}),t.record(Ai),t.record(B),t.record(J),t.record(fe.ad_signals_define,{context:null===(u=null==n?void 0:n.signals)||void 0===u?void 0:u.ortb2})),!0!==(null===(c=null===(a=i.detail)||void 0===a?void 0:a.config)||void 0===c?void 0:c.disableConfigCall)&&e.push(t.record(P)),t.update(wr,(function(){return n})),[4,Promise.all(e)];case 1:return o.sent(),[2,{status:j.completed}]}}))}))}}),br={key:"ad/amzniidRenderHistory",default:new Set},gr=new tn({scope:"cellophane",object:"renderImp",action:"enter",handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e,r,u,a;return o(this,(function(o){if(void 0===(null===(a=i.detail)||void 0===a?void 0:a.renderImpArgs))throw new Error("renderImpArgs must be defined.");if(n=i.detail.renderImpArgs,e=n.bidID,r=n.doc,void 0===(u=null!=e?e:r.amzniid))throw new Error("Invalid bID.");if(t.use(br).has(u))throw new Error("Targeting reuse detected.");return t.update(br,(function(n){return n.add(u)})),[2,{status:j.completed}]}))}))}}),Er=en([hr,pr,mr,yr,gr,new tn({scope:"cellophane",object:"setDisplayBids",action:"enter",handler:function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return[2,{status:j.completed}]}))}))}})]),_r=new tn({scope:"protectedAudience",object:"slot",action:"activate",handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){if("string"!=typeof(null===(e=i.detail)||void 0===e?void 0:e.slotId)||""===i.detail.slotId.trim())throw new Error("Invalid slotId. Must be a non-empty string.");return t.recordListener(dr).catch((function(n){})),n=i.detail.slotId,t.update(or,(function(t){return t.set(n,1)})),[2,{status:j.completed}]}))}))}}),Sr=new tn({scope:"protectedAudience",object:"slot",action:"deactivate",handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){if("string"!=typeof(null===(e=i.detail)||void 0===e?void 0:e.slotId)||""===i.detail.slotId.trim())throw new Error("Invalid slotId. Must be a non-empty string.");return t.recordListener(dr).catch((function(n){})),n=i.detail.slotId,t.update(or,(function(t){return t.set(n,0)})),[2,{status:j.completed}]}))}))}}),jr=new tn({scope:"protectedAudience",object:"allSlots",action:"activate",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.recordListener(dr).catch((function(n){})),t.update(rr,(function(){return 1})),[2,{status:j.completed}]}))}))}}),Cr=new tn({scope:"protectedAudience",object:"allSlots",action:"deactivate",handler:function(n){var t=n.account;return n.customEvent,r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.recordListener(dr).catch((function(n){})),t.update(rr,(function(){return 0})),[2,{status:j.completed}]}))}))}}),kr=en([vr,sr,_r,Sr,jr,Cr]),Ir={key:"regulations/dsa",default:void 0},xr=new tn({scope:"regulations",object:"regsString",action:"update",handler:function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){return null==(n=t.use(Ir))?t.update(ur,(function(){return""})):t.update(ur,(function(){return JSON.stringify({dsa:n})})),[2,{status:j.completed}]}))}))}}),Or=new tn({scope:"regulations",object:"dsa",action:"define",validators:{detail:{detail:Y,"detail.dsa":$((function(n){try{JSON.stringify(n)}catch(n){throw new Error("must be JSON stringifiable")}}))}},handler:function(n){var t=n.account,i=n.customEvent;return r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){switch(r.label){case 0:if(void 0===(n=i.detail))throw new Error("A dsa object is expected as parameter");return e=n.dsa,t.update(Ir,(function(){return e})),[4,t.recordListener(xr)];case 1:return r.sent(),[2,{status:j.completed,analytics:{dsa:null!=e?Ar(e):0}}]}}))}))}}),Ar=function(n){return JSON.stringify(n).length},Rr=en([Or,xr]),Pr={key:"documentReady/readyState",default:void 0},Mr=new tn({scope:"documentReady",object:"readyState",action:"didChange",handler:function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.update(Pr,(function(){return t.globalContext.document.readyState})),[2,{status:j.completed}]}))}))}}),Nr=new tn({scope:"documentReady",object:"eventListeners",action:"add",handler:function(n){var t=n.account;return r(void 0,void 0,void 0,(function(){return o(this,(function(n){return t.recordListenerNonBlocking(Mr),t.globalContext.document.addEventListener("readystatechange",(function(){return t.recordListenerNonBlocking(Mr,{source:S.webpage})})),[2,{status:j.completed}]}))}))}}),Dr=en([Nr,Mr]),Ur={key:"nativeCommerceAds/timings",default:[]},Tr=function(n){var t=/(.*\/x\/c\/[a-zA-Z0-9_-]*\/)(.*)(https.*)/;try{if(t.test(n)){var i=t.exec(n);return null!==i&&i.length>=3&&i[2].startsWith("{")&&i[2].endsWith("}")?"".concat(i[1]).concat(encodeURI(i[2])).concat(i[3]):n}}catch(t){return n}return n},Lr=function(n,t,i){n.update(Ur,(function(n){return n.push({time:performance.now(),key:"".concat(t,"/").concat(i)}),n}))},zr="NCA",Jr={key:"nativeCommerceAds/asinPerRequest",default:14},Fr={key:"nativeCommerceAds/asinProcessIter",default:5},qr={key:"nativeCommerceAds/asinProcessDelay",default:250},Br={key:"nativeCommerceAds/contextURL",default:void 0},Vr={key:"nativeCommerceAds/getAdsEndpoint",default:"https://c.aps.amazon-adsystem.com/e/dtb/custombid"},Kr={key:"nativeCommerceAds/getAdsIsKey",default:"082f8778403939df819c59b1e735a614"},Gr={key:"nativeCommerceAds/bidParams",default:{}},Hr={key:"nativeCommerceAds/recordMaps",default:new Map},Qr=new tn({scope:"nativeCommerceAds",object:"adMarkup",action:"append",validators:{detail:{detail:Y,"detail.response":null,"detail.iteration":H}},handler:function(n){var t=n.account,i=n.detail;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,e,r;return o(this,(function(o){return n=i.response,e=Gn(t.globalContext.document,null===(r=t.globalContext.navigator)||void 0===r?void 0:r.connection,t.globalContext.innerWidth,t.globalContext.innerHeight),"loading"===t.use(Pr)?[2,{status:j.waiting,analytics:{browserInfo:e}}]:(null!==(null==n?void 0:n.amznadm)&&void 0!==(null==n?void 0:n.amznadm)&&""!==(null==n?void 0:n.amznadm)&&(Lr(t,zr,"".concat(i.iteration,":appendAdMarkup/start")),function(n,t){var i,e=null!==(i=n.querySelector("a[data-aps-asin]"))&&void 0!==i?i:void 0;if(null!=e){var r=n.createElement("iframe");r.style.marginLeft="0",r.style.marginTop="0",r.style.height="1px",r.style.width="1px",r.setAttribute("data-testid","amzn-nca-ad"),r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),r.srcdoc=null!=t?t:"",null==e||e.insertAdjacentElement("afterend",r)}}(t.globalContext.document,null==n?void 0:n.amznadm),Lr(t,zr,"".concat(i.iteration,":appendAdMarkup/end"))),[2,{status:j.completed,analytics:{browserInfo:e}}])}))}))}}),Wr=new tn({scope:"nativeCommerceAds",object:"krypton",action:"didRespond",validators:{detail:{detail:Y,"detail.response":null,"detail.iteration":H,"detail.map":null}},handler:function(n){var t=n.account,e=n.detail;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,r,a,c,d,s,v,l,f,h,p,m,w,y;return o(this,(function(o){switch(o.label){case 0:if(Lr(t,zr,"".concat(e.iteration,":processKryptonResponse/start")),n=Gn(t.globalContext.document,null===(w=t.globalContext.navigator)||void 0===w?void 0:w.connection,t.globalContext.innerWidth,t.globalContext.innerHeight),r=e.response,a=e.map,"loading"===t.use(Pr))return[2,{status:j.waiting,value:{didRespond:!1},analytics:{browserInfo:n}}];if(!Array.isArray(null==r?void 0:r.slotBids)||0===(null==r?void 0:r.slotBids.length))return Lr(t,zr,"".concat(e.iteration,":processKryptonResponse/empty")),[2,{status:j.cancelled,value:{didRespond:!1},analytics:{browserInfo:n}}];c=t.use(Hr),o.label=1;case 1:o.trys.push([1,6,7,8]),d=u(r.slotBids),s=d.next(),o.label=2;case 2:return s.done?[3,5]:(v=s.value,""!==(l=v.asin)&&null!=l&&(f=null!==(y=c.get(l))&&void 0!==y?y:{apsAsin:"",apsAscTag:"",apsAscSubtag:"",response:void 0,elementStatus:new Map},c.set(l,i(i({},f),{clickUrl:v.clickUrl,impUrl:v.impUrl,tqUrl:v.tqUrl}))),"r"!==v.mode?[3,4]:[4,Yr(t,v,a)]);case 3:o.sent(),o.label=4;case 4:return s=d.next(),[3,2];case 5:return[3,8];case 6:return h=o.sent(),p={error:h},[3,8];case 7:try{s&&!s.done&&(m=d.return)&&m.call(d)}finally{if(p)throw p.error}return[7];case 8:return t.update(Hr,(function(){return c})),Lr(t,zr,"".concat(e.iteration,":processKryptonResponse/end")),[2,{status:j.completed,value:{didRespond:!0},analytics:{browserInfo:n}}]}}))}))}});function Yr(n,t,i){var e;return r(this,void 0,void 0,(function(){var a,c,d,s,v,l,f,h,p,m=this;return o(this,(function(w){switch(w.label){case 0:if(a=function(t,i){return r(m,void 0,void 0,(function(){var e,r,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e="nativeCommerceAds/clickUrl/update",void 0===(null==(r=n.read("listeners"))?void 0:r.get(e))?[3,2]:[4,n.record(e,{url:t,element:i})];case 1:return u=o.sent(),null==new URL(u.url)?[2,t]:[2,u.url];case 2:return[3,4];case 3:return o.sent(),[3,4];case 4:return[2,t]}}))}))},null==i&&(i=new Map,c=Array.from(n.globalContext.document.querySelectorAll("[data-aps-asin=".concat(t.asin,"]"))),i.set(t.asin,c)),!i.has(t.asin))return[3,8];c=null!==(e=i.get(t.asin))&&void 0!==e?e:[],w.label=1;case 1:w.trys.push([1,6,7,8]),d=u(c),s=d.next(),w.label=2;case 2:return s.done?[3,5]:(v=s.value,null===t.clickUrl||void 0===t.clickUrl||""===t.clickUrl?[2]:(y=t.impUrl,(new Image).src=y,l=v,[4,a(Tr(t.clickUrl),v)]));case 3:l.href=w.sent(),v.setAttribute("data-aps-status","success"),w.label=4;case 4:return s=d.next(),[3,2];case 5:return[3,8];case 6:return f=w.sent(),h={error:f},[3,8];case 7:try{s&&!s.done&&(p=d.return)&&p.call(d)}finally{if(h)throw h.error}return[7];case 8:return[2]}var y}))}))}var Zr=new tn({scope:"nativeCommerceAds",object:"krypton",action:"fetch",validators:{detail:{detail:Y,"detail.bidUrl":Q,"detail.iteration":H}},handler:function(n){var t=n.account,i=n.detail;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,e;return o(this,(function(r){switch(r.label){case 0:return Lr(t,zr,"".concat(i.iteration,":fetchKryptonResponse/start")),[4,fetch(i.bidUrl,{credentials:"include"})];case 1:return[4,r.sent().json()];case 2:return n=r.sent(),Lr(t,zr,"".concat(i.iteration,":fetchKryptonResponse/end")),[2,{status:j.completed,value:{kryptonResponse:n},analytics:{browserInfo:Gn(t.globalContext.document,null===(e=t.globalContext.navigator)||void 0===e?void 0:e.connection,t.globalContext.innerWidth,t.globalContext.innerHeight)}}]}}))}))}}),Xr={key:"nativeCommerceAds/injectTQ",default:void 0},$r={key:"nativeCommerceAds/tqLibUrl",default:"https://c.aps.amazon-adsystem.com/tqsmartpixel.js"},no=new tn({scope:"nativeCommerceAds",object:"trafficQuality",action:"load",validators:{detail:{detail:Y,"detail.iteration":H}},handler:function(n){var t=n.account,i=n.detail;return r(void 0,void 0,void 0,(function(){var n,e,r;return o(this,(function(o){switch(o.label){case 0:return n=Gn(t.globalContext.document,null===(r=t.globalContext.navigator)||void 0===r?void 0:r.connection,t.globalContext.innerWidth,t.globalContext.innerHeight),e=t.use($r),null!=t.use(Xr)?[2,{status:j.completed,analytics:{browserInfo:n}}]:(Lr(t,zr,"".concat(i.iteration,":loadTQModule/start")),[4,import(e).then((function(n){t.update(Xr,(function(){return n})),Lr(t,zr,"".concat(i.iteration,":loadTQModule/end"))}))]);case 1:return o.sent(),[2,{status:j.completed,analytics:{browserInfo:n}}]}}))}))}}),to=new tn({scope:"nativeCommerceAds",object:"trafficQualityUrls",action:"process",validators:{detail:{detail:Y,"detail.response":null,"detail.iteration":H}},handler:function(n){var t=n.account,i=n.detail;return n.customEvent,r(void 0,void 0,void 0,(function(){var n,e,r,u;return o(this,(function(o){switch(o.label){case 0:return n=Gn(t.globalContext.document,null===(u=t.globalContext.navigator)||void 0===u?void 0:u.connection,t.globalContext.innerWidth,t.globalContext.innerHeight),e=i.response,Array.isArray(null==e?void 0:e.slotBids)&&0!==(null==e?void 0:e.slotBids.length)?(r=null==e?void 0:e.slotBids.map((function(n){return n.tqUrl})),[4,t.recordListener(no,{iteration:i.iteration}).then((function(){Lr(t,zr,"".concat(i.iteration,":injectTQ/start"));var n=t.use(Xr);r.forEach((function(t){var i;return null===(i=null==n?void 0:n.default)||void 0===i?void 0:i.call(n,t)})),Lr(t,zr,"".concat(i.iteration,":injectTQ/end"))}))]):[2,{status:j.cancelled,value:{isProcessed:!1},analytics:{browserInfo:n}}];case 1:return o.sent(),[2,{status:j.completed,value:{isProcessed:!0},analytics:{browserInfo:n}}]}}))}))}}),io=new tn({scope:"nativeCommerceAds",object:"ads",action:"get",validators:{detail:{detail:Y,"detail.nativeContentConfig":null,"detail.iteration":H,"detail.asinMap":null}},handler:function(n){var t=n.account,i=n.detail;return n.customEvent,r(void 0,void 0,void 0,(function(){var n;return o(this,(function(e){switch(e.label){case 0:return[4,eo(t,i.nativeContentConfig,i.iteration,i.asinMap)];case 1:return e.sent(),[2,{status:j.completed,analytics:{browserInfo:Gn(t.globalContext.document,null===(n=t.globalContext.navigator)||void 0===n?void 0:n.connection,t.globalContext.innerWidth,t.globalContext.innerHeight)}}]}}))}))}});function eo(n,t,e,u){var a;return r(this,void 0,void 0,(function(){var r,c,d,s,v,f;return o(this,(function(o){switch(o.label){case 0:return r=n.id,c=36===n.id.length,d={src:r,pubid:r,u:oo(n,n.use(Br)),sg:encodeURIComponent(JSON.stringify(ro(n,t))),pj:encodeURIComponent(JSON.stringify({is:n.use(Kr)})),pid:(h=new hn,h.store.get(l))},c&&(d.src="600"),d=i(i({},d),n.use(Gr)),s=Object.keys(d).filter((function(n){return"undefined"!==d[n]&&""!==d[n]&&null!==d[n]})).map((function(n){var t=d[n];return void 0!==t?"".concat(n,"=").concat(String(t)):null})).filter((function(n){return null!==n})).join("&"),v=n.use(Hr),null===(a=t.sourceAsins)||void 0===a||a.forEach((function(n){"object"==typeof n&&null!==n&&v.set(n.apsAsin,i(i({},n),{elements:null==u?void 0:u.get(n.apsAsin)}))})),n.update(Hr,(function(){return v})),[4,n.recordListener(Zr,{bidUrl:"".concat(n.use(Vr),"?").concat(s),iteration:e})];case 1:return f=o.sent().kryptonResponse,[4,Promise.all([n.recordListener(Wr,{response:f,iteration:e,map:u}),n.recordListener(to,{response:f,iteration:e}),n.recordListener(Qr,{response:f,iteration:e})])];case 2:return o.sent(),[2]}var h}))}))}function ro(n,t){var r,o,u,a,c,d,s={ortb2:{}},v=function(n){try{var t=n.use(tt);return void 0!==t&&"user"in t?(t.user,{ortb2:e(t,["user"])}):{ortb2:t}}catch(n){return{}}}(n);return s.ortb2=v.ortb2,s.ortb2=i(i({},null!==(r=s.ortb2)&&void 0!==r?r:{}),{site:i(i({},null!==(u=null===(o=s.ortb2)||void 0===o?void 0:o.site)&&void 0!==u?u:{}),{ext:i(i({},null!==(d=null===(c=null===(a=s.ortb2)||void 0===a?void 0:a.site)||void 0===c?void 0:c.ext)&&void 0!==d?d:{}),t)})}),s}function oo(n,t){try{var i=null!=t?t:function(n){var t,i;try{if(void 0!==(null===(t=n.globalContext.top)||void 0===t?void 0:t.location.href))return null===(i=n.globalContext.top)||void 0===i?void 0:i.location.href}catch(n){}try{if(n.globalContext.top!==n.globalContext.self)return n.globalContext.document.referrer}catch(n){}}(n);if(void 0!==i)return encodeURIComponent(i)}catch(n){}return""}var uo=["apsStatus"],ao=new tn({scope:"nativeCommerceAds",object:"service",action:"enable",validators:{},handler:function(n){var t=n.account;return n.detail,n.customEvent,r(void 0,void 0,void 0,(function(){var n,i,e,u;return o(this,(function(a){switch(a.label){case 0:return n=Gn(t.globalContext.document,null===(u=t.globalContext.navigator)||void 0===u?void 0:u.connection,t.globalContext.innerWidth,t.globalContext.innerHeight),"loading"===t.use(Pr)?[2,{status:j.waiting,analytics:{browserInfo:n}}]:[4,co(t,0)];case 1:a.sent(),i=t.use(qr),e=1,a.label=2;case 2:return e<=t.use(Fr)?[4,(c=i,d=co(t,e),r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){setTimeout(n,c)})).then((function(){return r(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,d];case 1:return[2,n.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))})))]:[3,5];case 3:a.sent(),a.label=4;case 4:return e++,[3,2];case 5:return[2,{status:j.completed,analytics:{browserInfo:n}}]}var c,d}))}))}}),co=function(n,t){return void 0===t&&(t=0),r(void 0,void 0,void 0,(function(){var i,e,r,a,c,d,s,v;return o(this,(function(o){switch(o.label){case 0:return 0!==(i=vo(n,t)).size?[3,2]:[4,Promise.resolve()];case 1:case 3:return[2,o.sent()];case 2:e=[],function(n,t){for(var i=[],e=0;e<n.length;e+=t)i.push(n.slice(e,e+t));return i}(Array.from(i.keys()),n.use(Jr)).forEach((function(n){return e.push({sourceAsins:n.map((function(n){var t;return so((null!==(t=i.get(n))&&void 0!==t?t:[])[0])}))})})),r=[];try{for(a=u(e),c=a.next();!c.done;c=a.next())d=c.value,r.push(n.recordListener(io,{nativeContentConfig:d,iteration:t,asinMap:i}))}catch(n){s={error:n}}finally{try{c&&!c.done&&(v=a.return)&&v.call(a)}finally{if(s)throw s.error}}return[4,Promise.all(r).then((function(){}))]}}))}))},so=function(n){var t={};return void 0!==n&&Object.keys(n.dataset).filter((function(t){return t.startsWith("aps")&&!uo.includes(t)&&n.dataset[t]})).forEach((function(i){return t[i]=n.dataset[i]})),t},vo=function(n,t){void 0===t&&(t=0),Lr(n,zr,"".concat(t,":fetchEligibleElements/start"));var i=0,e=Array.from(n.globalContext.document.querySelectorAll("a[data-aps-asin]")).map((function(n){return n})).filter((function(n){return function(n){return null!==n.dataset.apsAsin&&void 0!==n.dataset.apsAsin&&""!==n.dataset.apsAsin&&"null"!==n.dataset.apsAsin}(n)&&"read"!==n.dataset.apsStatus&&"success"!==n.dataset.apsStatus})).reduce((function(n,t){var e,r=t.dataset.apsAsin;return void 0!==r&&(void 0===n.get(r)&&n.set(r,[]),null===(e=n.get(r))||void 0===e||e.push(t),t.setAttribute("data-aps-status","read"),i++),n}),new Map);return 0===e.size?Lr(n,zr,"".concat(t,":fetchEligibleElements/empty")):Lr(n,zr,"".concat(t,":fetchEligibleElements/asins/").concat(e.size,"/elements/").concat(i)),e},lo=en([ao,io,Qr,Wr,to,Zr,no]),fo="publisher";!function(n){void 0===n&&(n={});var t=i(i({},k),n),e=t.j,r=t.R;try{e((function(){!function(n){void 0===n&&(n={});var t=i(i({},k),n),e=t.C,r=t.O,o=t.A,u=t.R;try{var a=e();if(void 0===a||0===a.length)return;!function(n,t){if(!t()){E(p.postulate,n);var i=t.toString(),e="Assertion failed: ".concat(i);throw n&&(e+=" - ".concat(n)),new Error(e)}}("5c098d",(function(){return Array.isArray(a)}));var c=a.shift();if(void 0===c)return;r(p.postulate,c.hash,o(c.context,n.I||k.I))}catch(n){u(n)}}(i(i({},k),n))}),3e3)}catch(n){r(n)}}();try{b.fireReferencePixel(fo);var ho=new Map(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c([],a(M),!1),a(K),!1),a(Be),!1),a(me),!1),a(_i),!1),a(he),!1),a(Xi),!1),a(Te),!1),a(R),!1),a(Ge),!1),a(fi),!1),a(Je),!1),a(vt),!1),a(ge),!1),a(Ri),!1),a(Qe),!1),a(tr),!1),a(bt),!1),a(Ni),!1),a(Fn),!1),a(vi),!1),a(fr),!1),a(Er),!1),a(Ue),!1),a(kr),!1),a(Rr),!1),a(Dr),!1),a(lo),!1)),po=new On,mo=po.registerEventSource(fo);mo.recordListener(Mi,{restrictions:{block:{accounts:[fn]}}}),mo.recordListener(Nr,{restrictions:{block:{accounts:[fn]}}}),po.load({listeners:ho})}catch(n){b.logCoreError({id:fo,error:n,account:null}),h()&&wn.error(n)}}();/*! @amzn/apswebapstaglibrary - apstag-legacy - 24.1209.2037 */
!function(t){var e={};function n(r){var o;return(e[r]||(o=e[r]={i:r,l:!1,exports:{}},t[r].call(o.exports,o,o.exports,n),o.l=!0,o)).exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=39)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){try{var e=parseInt(t,10);if(!isNaN(e))return!(e<=0)&&(100<=e||100*Math.random()<=e)}catch(t){}return!1}function i(t,e){var n=parseInt(e,10),r=[],o=0;if(u(t)){if(isNaN(n)||n<1)return[t];for(var i=t.length;o<i;){var a=o;o+=n,r.push(t.slice(a,o))}}return r}function a(){return"".concat(Math.round(1e12*Math.random())).concat(Date.now())}function c(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=new Array(t),r=0;r<t;r++)n[r]=e[Math.floor(Math.random()*e.length)];return n.join("")}function s(t){return"object"===r(t)&&null!==t}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function l(t,e){return s(t)&&void 0!==t[e]&&""!==t[e]}function d(t,e){return-1!==t.indexOf(e)}function f(t){var e=new Date;return e.setDate(e.getDate()+t),e.toUTCString()}function b(t){try{var e=t.innerWidth||t.document.documentElement.clientWidth||t.document.body.clientWidth,n=t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight;return"".concat(e,"x").concat(n)}catch(t){}return"x"}function p(t,e){return decodeURIComponent(t).split("?")[0].split("#")[0]===decodeURIComponent(e).split("?")[0].split("#")[0]}function y(t){var e=Object.keys(t);return e.filter((function(e){return t[e]})).length===e.length}n.d(e,"l",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"j",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return b})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return y}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return y}));e=n(0);var r=n(3),o=n(2),i=n(8),a=n(9),c=n(16),s=n(4),u=Object(e.l)(10),l=[],d=(!0===Object(i.c)("exposeErrors")&&(window.apstagErrors=l),function(t,e,n){try{var r=Date.now(),o={eventSource:"apstag",eventTime:r,eventCategory:"error",eventName:null!=n?n:"unknown",eventProperties:{accountID:t,libraryVersion:s.l,url:Object(a.g)(window),error:{name:"string"==typeof e?e:e.name,message:"string"==typeof e?e:e.message}}},i={Data:window.btoa(JSON.stringify(o)),PartitionKey:r};fetch("https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/putRecords?encoded=true",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"5e0b19374596b1c8abfb0560fcb956220131d0a7f7100979de5d18cfada355d5"},body:JSON.stringify({Records:[i]})}).catch((function(){}))}catch(t){}});function f(t,e,n){try{(null!=n&&n.makeVisibleToAllUsers||Object(i.d)("errors"))&&console.error(t);var s,f,b={ts:Date.now(),url:encodeURIComponent(Object(a.g)(window)),r:encodeURIComponent(Object(a.h)(window)),_type:"apsLibraryError",e:{et:t.name,el:e,msg:t.message}};return l.push(b),o.a.dispatch({type:"LOG_ERROR",error:b}),Math.random()<=.001&&(f=null!=(s=null==n?void 0:n.accountId)?s:Object(c.unsafelyGuessAccountID)(),d(f,t,e)),!!u&&(Object(r.b)(b),!0)}catch(t){console.error(t)}return!1}function b(t,e,n,r){return f({name:e,message:"".concat(t," was of type '").concat(e,"' instead of '").concat(n,"'")},"TypeError-".concat(t),r)}function p(t,e){return function(){try{return t.apply(null,arguments)}catch(t){return f(t,e,{makeVisibleToAllUsers:!0}),null}}}function y(t){(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||Object(i.d)("errors"))&&console.warn(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r,o=n(4),i=(e=n(6),n(0));n=n(8);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?d(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f={AAXReqs:[],aaxViewabilityEnabled:!1,bidConfigs:{},bidReqs:{},bsPixels:{},cfg:{v:-1,CSM_JS:"//c.amazon-adsystem.com/aax2/csm.js.gz",CSM_RTB_COMMUNICATOR_JS:"".concat(o.w,"c.amazon-adsystem.com/bao-csm/aps-comm/aps_csm.js"),DEBUG_APP_HTML:"//c.amazon-adsystem.com/aax2/debugApp.html",DEBUG_APP_HTML_V2:"//c.amazon-adsystem.com/aax2/debug_app_v2.html",DEFAULT_TIMEOUT:2e3,DTB_PATH:"/e/dtb",TEST_PATH_FREQUENCY:0,TEST_BID_ENDPOINT:null,TEST_PATH_LATENCY_SAMPLE_RATE:null,PIXEL_PATH:"/x/px/",LATENCY_SAMPLING_RATE:1,COOKIE_MATCH_DELAY:0,MAX_SLOTS_PER_REQUEST:1,SLOT_RENDER_SAMPLING_RATE:1,FEATURE_SAMPLING_RATE:1,CONFIG_CALL_ENABLED:!1,LIB_CONFIG_PATH:"/cdn/prod/config"},cmpFired:!1,config:{pubID:""},displayAdServer:{noBidSlotIDs:[],shouldSampleRender:!1,slotRenderEndedSet:!1},errors:[],eventLog:[],experiments:{},gamSlotFetchLog:[],gamSlotRenderPixel:{aaxReqOffset:0,gamSlotFetchLogOffset:0},hosts:{DEFAULT_AAX_BID_HOST:"aax.amazon-adsystem.com",DEFAULT_AAX_PIXEL_HOST:"aax.amazon-adsystem.com",DEFAULT_CXM_HOST:"c.amazon-adsystem.com",DEFAULT_BS_HOST:"cxm-bcn.publisher-services.amazon.dev"},identityState:{},libraryLoadCallLatency:0,Q:[],slotBids:{},targetingKeys:{},tcfParseTime:0,outstream:{renderStart:0,shouldSample:!1},consentManagementPlatform:{}};function b(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f,e=1<arguments.length?arguments[1]:void 0;return{AAXReqs:function(t,e){switch(e.type){case"RECORD_AAX_REQUEST":return[].concat(l(t),[e.data]);case"RECORD_AAX_REQ_PROP":return t.map((function(t){return(t=s({},t)).bidReqID===e.bidReqID&&(t[e.key]=e.value),t}));default:return l(t)}}(t.AAXReqs,e),aaxViewabilityEnabled:function(t,e){return"SET_VIEWABILITY"!==e.type?t:e.viewability}(t.aaxViewabilityEnabled,e),bidConfigs:function(t,e){return"RECORD_ORIGINAL_BID_CONFIG"!==e.type?s({},t):s(s({},t),{},u({},e.bidConfig.bidReqID,e.bidConfig))}(t.bidConfigs,e),bidReqs:function(t,e){var n;switch(e.type){case"ADD_CHUNKED_REQUESTS":return s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{networkReqs:new Array(e.numChunks)})));case"NEW_FETCH_BID_REQUEST":return s(s({},t),{},u({},e.fid,{pto:e.pto,hasCallbackExecuted:!1,networkReqs:[]}));case"RECORD_CALLBACK":return s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{hasCallbackExecuted:!0})));case"RECORD_NETWORK_EXCHANGE":var r=t[e.fid].networkReqs;return r[e.networkID]=s(s({},r[e.networkID]),{},(u(n={},"".concat(e.exchangeType,"Time"),e.timestamp),u(n,"inFlight","request"===e.exchangeType),n)),s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{networkReqs:r})));case"RECORD_TIMEOUT":return s(s({},t),{},u({},e.fid,s(s({},t[e.fid]),{},{networkReqs:t[e.fid].networkReqs.map((function(t){return t.inFlight?s(s({},t),{},{timeOut:e.timeOut}):t}))})));default:return s({},t)}}(t.bidReqs,e),bsPixels:function(t,e){return"RECORD_BID_INFO_SENT"!==e.type?s({},t):s(s({},t),{},u({},e.bidInfo.iid,e.bidInfo.state))}(t.bsPixels,e),cfg:function(t,e){return"SET_CFG"!==e.type?s({},t):s(s({},t),e.cfg)}(t.cfg,e),cmpFired:function(t,e){return"CMP_FIRED"===e.type||t}(t.cmpFired,e),config:function(t,e){return"SET_CONFIG"!==e.type?s({},t):s(s({},e.config),{},{gdpr:s({cmpTimeout:e.defaultCmpTimeout},e.config.gdpr),isSelfServePub:void 0!==e.config.pubID&&5<=e.config.pubID.length})}(t.config,e),displayAdServer:function(t,e){switch(e.type){case"SLOT_RENDER_ENDED_SET":return s(s({},t),{},{slotRenderEndedSet:!0});case"NO_BID_ON_ADSERVER_SLOTS":return s(s({},t),{},{noBidSlotIDs:t.noBidSlotIDs.concat(e.slotIDs)});case"REQUESTED_BID_FOR_ADSERVER_SLOTS":return s(s({},t),{},{noBidSlotIDs:t.noBidSlotIDs.filter((function(t){return!Object(i.h)(e.slotIDs,t)}))});case"SHOULD_SAMPLE_SLOT_RENDER":return s(s({},t),{},{shouldSampleRender:e.value});default:return s(s({},t),{},{noBidSlotIDs:l(t.noBidSlotIDs)})}}(t.displayAdServer,e),errors:function(t,e){return"LOG_ERROR"!==e.type?l(t):[].concat(l(t),[s({},e.error)])}(t.errors,e),eventLog:function(t,e){return"LOG_EVENT"!==e.type?l(t):[].concat(l(t),[s({},e.event)])}(t.eventLog,e),experiments:function(t,e){switch(e.type){case"SHOULD_CHUNK_REQUESTS":return s({chunkRequests:!0===t.shouldSampleLatency&&e.value},t);case"SHOULD_SAMPLE_LATENCY":return s(s({},t),{},{shouldSampleLatency:e.value});case"SHOULD_SAMPLE_FEATURES":return s(s({},t),{},{shouldSampleFeatures:e.value});case"SHOULD_USE_TEST_BID_ENDPOINT":return s(s({},t),{},{shouldUseTestBidEndpoint:e.value});default:return s({},t)}}(t.experiments,e),gamSlotFetchLog:function(t,e){return"LOG_GAM_EVENT"!==e.type?l(t):[].concat(l(t),[s({},e.event)])}(t.gamSlotFetchLog,e),gamSlotRenderPixel:function(t,e){return"UPDATE_RENDER_OFFSETS"!==e.type?s({},t):s(s({},t),e.offsets)}(t.gamSlotRenderPixel,e),hosts:function(t,e){return"SET_HOST"!==e.type?s({},t):s(s({},t),{},u({},e.hostName,e.hostValue))}(t.hosts,e),identityState:function(t,e){return"RECORD_IDENTITY_STATE"!==e.type?t:s(s({},t),{},u({},e.vendor,Object(i.k)(t,e.vendor)?t[e.vendor]:e.identityState))}(t.identityState,e),libraryLoadCallLatency:function(t,e){return"RECORD_LIBRARY_LOAD_CALL_LATENCY"!==e.type?t:e.latency}(t.libraryLoadCallLatency,e),Q:function(t,e){return"SET_Q"!==e.type?l(t):l(e.Q)}(t.Q,e),slotBids:function(t,e){switch(e.type){case"BID_STATE_CHANGE":return s(s({},t),{},u({},e.slotID,t[e.slotID].map((function(t){return t._targetingSetID===e._targetingSetID&&(t.bidState=e.bidState,e.bidState===o.c.rendered?t.timing.renderTime=e.ts:e.bidState===o.c.set&&t.timing.setAtTimes.push(e.ts)),t}))));case"UPDATE_BID_INFO_PROP":return void 0===t[e.slotID]||t[e.slotID].filter((function(t){return t.matchesBidCacheId(e.iid)})).length<1?s({},t):s(s({},t),{},u({},e.slotID,t[e.slotID].map((function(t){return t.matchesBidCacheId(e.iid)&&(t[e.key]=e.value),t}))));case"UPDATE_SLOT_BIDS":return s(s({},t),e.bids.reduce((function(e,n){return Object(i.k)(e,n.slotID)?e[n.slotID]=[].concat(l(e[n.slotID]),[n]):Object(i.k)(t,n.slotID)?e[n.slotID]=[].concat(l(t[n.slotID]),[n]):e[n.slotID]=[n],e}),{}));default:return s({},t)}}(t.slotBids,e),targetingKeys:function(t,e){return"UPDATE_SLOT_BIDS"!==e.type?s({},t):s(s({},t),e.bids.reduce((function(e,n){return Object(i.k)(t,n.slotID)?e[n.slotID]=[].concat(l(t[n.slotID]),l((n.bidConfig.targeting||o.i).filter((function(e){return-1===t[n.slotID].indexOf(e)})))):e[n.slotID]=n.bidConfig.targeting||o.i,e}),{}))}(t.targetingKeys,e),tcfParseTime:function(t,e){return"RECORD_TCF_PARSE_TIME"!==e.type?t:e.time}(t.tcfParseTime,e),outstream:function(t,e){switch(e.type){case"RECORD_OUTSTREAM_RENDER_START_TIME":return s(s({},t),{},{renderStart:e.time});case"OUTSTREAM_SHOULD_SAMPLE":return s(s({},t),{},{shouldSample:e.shouldSample});default:return t}}(t.outstream,e),consentManagementPlatform:function(t,e){switch(e.type){case"RECORD_CMP_LISTENED_TO":return s(s({},t),{},{isListenedTo:e.isListenedTo});case"RECORD_CMP_CONSENT_DATA":return s(s({},t),{},{tcData:e.tcData});default:return t}}(t.consentManagementPlatform,e)}}var p={getState:function(){return r},dispatch:function(t){r=b(r,t)}};(p=Object(n.d)("redux")&&Object(e.b)()&&Object(i.k)(window,"__REDUX_DEVTOOLS_EXTENSION__")?window.__REDUX_DEVTOOLS_EXTENSION__(b):p).dispatch({type:"NOOP"})},function(t,e,n){"use strict";n.d(e,"f",(function(){return p})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return S})),n.d(e,"b",(function(){return T})),n.d(e,"a",(function(){return D})),n.d(e,"g",(function(){return E})),n.d(e,"e",(function(){return _}));var r=n(4),o=n(2),i=n(8),a=n(0),c=n(1),s=n(9),u=n(14),l=n(11),d=[],f=!1,b=[];function p(t){var e=new Image;return e.src=t,b.push(e),e}!0===Object(i.c)("exposePixels")&&(window.apstagPixelQueue=d,window.apstagPixelsSent=b);var y,m={adServer:[],ampAdContext:[],appended:[],AaxSlotSizes:[],bidRender:[],bidRenderState:[],bidType:[],"blockedBidders-fetchBids":[],"blockedBidders-init":[],ccpa:[],cmpVar:[],creativeSize:[],deals:[],fetchBids:[],fifFlow:[],customFloor:[],gdpr:[],gpp:[],id:[],idRemap:[],iframe:[],renderFootprint:[],resizeIframe:[],schain:[],simplerGpt:[],slots:[],slotType:[],targeting:[],tcfVar:[],unusedDeal:[],useSafeFrames:[],trustToken:[],hasLocalStorage:[],renderImp:[],configOrder:[]},g=[],h=!1;function O(){h&&(clearTimeout(y),h=!1),Object(a.c)(g,5).forEach((function(t){T({_type:"featureUsage",p:t,u:Object(s.g)(window)})})),g=[]}function v(){h||(h=!0,y=setTimeout(O,2e3))}function j(t,e){try{return!!o.a.getState().experiments.shouldSampleFeatures&&(void 0!==m[t]&&!Object(a.h)(m[t],e)&&(m[t].push(e),g.push({cat:t,feat:e}),f&&v(),!0))}catch(t){return Object(c.b)(t,"sendFeaturePixel"),!1}}function S(){try{var t,e,n,r=o.a.getState().libraryLoadCallLatency,i=Object(u.c)(window,new RegExp("aax2/apstag-legacy.js"));null===i&&0===r||(t=Object(u.e)(window,"navigationStart"),e={_type:"libLatency",pid:l.b,ns:t},null!==i&&(e.fs=Object(u.a)(i,"fetchStart"),e.re=Object(u.a)(i,"responseEnd"),null!==(n=Object(u.f)(i)))&&(e.c=n?1:0),0!==r&&(e.tcc=r),T(e))}catch(t){Object(c.b)(t,"sendInitLatencyPixel")}}function w(t){try{var e;return f?(e=function(){try{var t=o.a.getState(),e=t.cfg.PIXEL_PATH,n=t.hosts.DEFAULT_AAX_PIXEL_HOST,a=Object(i.c)("pixelHost",n);return"".concat(r.s).concat(a).concat(e)}catch(t){return Object(c.b)(t,"buildPixelBaseUrl"),""}}(),void 0===t.bidId?e+="p/PH/":e+="".concat(t.bidId,"/"),p(e+=function(t){try{t._tl="aps-tag";var e=o.a.getState(),n=null,i="";Object(a.k)(e,"config")&&Object(a.k)(e.config,"pubID")&&""!==e.config.pubID&&(n=e.config.isSelfServePub,i=e.config.pubID),null!==n&&(n?(t.src=r.t,t.pubid=i):t.src=i),t.lv=r.l;var s=function(t){try{return t.replace(/\\.{1}/g,"")}catch(t){return Object(c.b)(t,"escapeJsonForAax"),""}}(JSON.stringify(t));return encodeURIComponent(s)}catch(t){return Object(c.b)(t,"objectToUrlPath"),""}}(t.payload))):(d.push(t),!1)}catch(t){return!1}}function T(t){return w({payload:t})}function D(t,e){return w({payload:e,bidId:t})}function E(){try{f||(f=!0,d.forEach(w),0<g.length&&v())}catch(t){Object(c.b)(t,"sendPixels")}}function _(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;try{return w({payload:{_type:"outstreamRender",bi:e,loc:t,lt:n}})}catch(t){return Object(c.b)(t,"outstreamPixel"),!1}}!0===Object(i.c)("exposePixels")&&(window.apstagFeaturePixelQueue=g)},function(t,e,n){"use strict";n.d(e,"m",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"A",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"h",(function(){return u})),n.d(e,"z",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"d",(function(){return b})),n.d(e,"p",(function(){return p})),n.d(e,"n",(function(){return y})),n.d(e,"e",(function(){return m})),n.d(e,"y",(function(){return g})),n.d(e,"x",(function(){return h})),n.d(e,"o",(function(){return o})),n.d(e,"v",(function(){return O})),n.d(e,"j",(function(){return v})),n.d(e,"u",(function(){return i})),n.d(e,"t",(function(){return j})),n.d(e,"l",(function(){return S})),n.d(e,"s",(function(){return w})),n.d(e,"w",(function(){return T})),n.d(e,"b",(function(){return D})),n.d(e,"k",(function(){return E})),n.d(e,"a",(function(){return _})),n.d(e,"r",(function(){return I})),n.d(e,"q",(function(){return k})),n.d(e,"C",(function(){return P})),n.d(e,"B",(function(){return R}));var r,o,i,a=25,c=["amznbid","amzniid","amznsz","amznp"],s=["amznbid","amzniid","amznp","r_amznbid","r_amzniid","r_amznp"],u=((n=r=r||{}).new="NEW",n.exposed="EXPOSED",n.set="SET",n.rendered="RENDERED","apstagDebug"),l=["redux","fake_bids","verbose","console","console_v2","errors"],d="apstagDebugHeight",f="apstagDEBUG",b="apstagCfg",p=0,y=0,m="apstagCxMEnabled",g="3pmetadata",h=5,O=((e=o=o||{}).amznbid="testBid",e.amzniid="testImpression",e.amznp="testP",e.crid="testCrid",["amznbid","amznp"]),v=new Map([["__apsid","ck"],["__aps_id_p","ckp"]]),j=((n=i=i||{}).noRequest="0",n.bidInFlight="1",n.noBid="2","600"),S="24.1209.2037",w="https://",T="http".concat("s://"),D="".concat(w,"aax.amazon-adsystem.com/e/dtb/vast?"),E="function"==typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials,_="apstagLOADED",I=13,k=1e4,P=/^1[NY\-]{3}$/,R='<!DOCTYPE html>\n<html>\n  <head>\n    <title>APS Video Ads</title>\n    <script src="https://video-player.aps.amazon-adsystem.com/apsvid.js" onerror="$$apsvidonerror$$"><\/script>\n  </head>\n  <body>\n    <div id="amazon-ads-container" style="height: 100%; width: 100%; position: absolute;">\n    </div>\n    <script type="text/javascript">\nconst adsContainer = document.querySelector("#amazon-ads-container")\nconst companionContainers =\n  window.AmazonVideoAds.findCompanionDivs($$apstagCompanionContainers$$)\nconst videoPlayerProps = $$videoPlayerProps$$\n\nconst amazonVideoAds = new window.AmazonVideoAds(adsContainer,\n{ ...videoPlayerProps,\n  companions: companionContainers });\nwindow.adsM;\n\nfunction addListeners(adsM, amazonVideoAds) {\n  adsM.addListener(amazonVideoAds.eventNames.AdVideoPlayerEvents.COMPLETED, (e) => {\n    window.top.postMessage({"apsVideoPlayer": true, "event": "completed"}, window.top.location.origin);\n  })\n  adsM.addListener(amazonVideoAds.eventNames.AdVideoPlayerEvents.LOADED, (e) => {\n    window.top.postMessage({"apsVideoPlayer": true, "event": "loaded"}, window.top.location.origin);\n  })\n}\n \nwindow.requestAndPlay = () => {\n  amazonVideoAds.fetchAdsFromUrl("$$apstagVastTag$$")\n    .then(adsManager => {\n      adsM = adsManager;\n \n      adsM.init({\n        fullscreen: true,\n        muted: true,\n        volume: .3,\n        autoplay: false,\n        controls: false,\n        preload: "auto"\n      })\n\n      addListeners(adsM, amazonVideoAds);\n      adsM.startAds(2000, {shouldVideoRemainAfterPlay: true});\n    })\n    .catch(function(err) {\n      console.log("apstag failed to get APS ads manager", err);\n    });\n  }\n \n  requestAndPlay();\n    <\/script>\n  </body>\n</html>'},function(t,e,n){"use strict";var r,o;function i(t){return void 0!==t.amzniid}function a(t){return void 0!==t.kvMap}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return a})),(n=r=r||{}).DISPLAY="display",n.VIDEO="video",n.MULTI_FORMAT="multi-format",(e=o=o||{}).MANAGED_WEB="mw",e.SELF_SERVE_WEB="ssw"},function(t,e,n){"use strict";n.d(e,"b",(function(){return S})),n.d(e,"a",(function(){return _}));var r,o,i,a,c=n(1),s=n(3),u=n(17),l=n(23),d=n(2);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);n=e?(n=m(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===f(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return y(r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function O(t,e,n){e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function v(t,e,n){(e=j(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function j(t){return t=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==f(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===f(t)?t:String(t)}function S(){try{var t,e,n,r;return!(null==(t=window)||null==(e=t.localStorage)||!e.setItem||null==(n=window)||null==(r=n.localStorage)||!r.removeItem)||(Object(s.c)("hasLocalStorage","absent"),!1)}catch(t){return Object(s.c)("hasLocalStorage","exception"),!1}}(e=r=r||{}).sessionStorage="sessionStorage",e.localStorage="localStorage",(o=o||{}).document="document",(n=i=i||{}).clear="clear",n.getItem="getItem",n.key="key",n.removeItem="removeItem",n.setItem="setItem",n.length="length",(a=a||{}).cookie="cookie";var w=["AMZN-NoCookieConsent"],T=function(){function t(e,n){g(this,t),v(this,"globalContext",void 0),v(this,"stateContainer",void 0),this.globalContext=e,this.stateContainer=n}return O(t,[{key:"privacyRegulationApplies",value:function(){var t=null==(e=l.a.readStoredConsentData(this.stateContainer))?void 0:e.tcString,e=null==e?void 0:e.gdprApplies;return!!("string"==typeof t&&0<t.length||null!=(t=this.globalContext.apstag)&&t.isGDPRRegion||e)}},{key:"allowedToStoreAndAccessInformationOnDevice",value:function(){if(this.privacyRegulationApplies()){var t;if(!(t=null==(t=l.a.readStoredConsentData(this.stateContainer))?void 0:t.tcString)||"string"!=typeof t)return{allowed:!1,failures:["Invalid tcString: ".concat(t)]};var e=Object(u.c)(t);if(!e)return{allowed:!1,failures:["Invalid tcString: ".concat(t)]};if((t=Object(u.b)(e)).length)return{allowed:!1,failures:t}}return{allowed:!0,failures:[]}}},{key:"ensureStorageUsageIsAllowedOrThrowOnError",value:function(t,e,n){var r=(o=this.allowedToStoreAndAccessInformationOnDevice()).allowed,o=o.failures;if(!(r||n&&0<n.length&&0<=w.indexOf(n[0])))throw new Error("Not allowed to store or access information on device: ".concat(o));if(!(r=this.globalContext[t]))throw new ReferenceError("Object ".concat(t," isn't available"));if(void 0===r[e])throw new ReferenceError("Method ".concat(e," isn't available"))}},{key:"executeFunction",value:function(t,e,n,r,o){return e=this.globalContext[e],(n=(r=r||e[n]).apply(e,t))&&null!=o&&o.isJson?JSON.parse(n):n}},{key:"executeFunctionOrThrowOnError",value:function(t,e,n,r,o){return this.ensureStorageUsageIsAllowedOrThrowOnError(e,n,t),this.executeFunction(t,e,n,r,o)}},{key:"regulatedMethod",value:function(t,e,n,r){var o=this;return function(){try{for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return o.executeFunctionOrThrowOnError(a,t,e,n,r)}catch(i){if(null==r||!r.ignoreFailure)throw Object(c.b)(i,"RegulatedDataContainer-regulatedMethod"),i}}}}]),t}(),D=function(){b(e,T);var t=p(e);function e(){var n;g(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return v(y(n=t.call.apply(t,[this].concat(i))),"_getItem",(function(t){var e=n.globalContext.document.cookie.split("; ").reduce((function(e,n){return(n=n.split("="))[0]===t?decodeURIComponent(n.slice(1).join("=")):e}),"");return 0<e.length?e:null})),v(y(n),"_removeItem",(function(t){n.setItem(t,"",0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/")})),v(y(n),"_setItem",(function(t,e,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"/";r=new Date(r);if(!n.isValidDate(r))throw new Error("Invalid expiration date");n.globalContext.document.cookie="".concat(t,"=").concat(e,"; expires=").concat(r.toUTCString(),"; path=").concat(o,";")})),v(y(n),"getItem",(function(t,e){return n.regulatedMethod(o.document,a.cookie,n._getItem,e)(t)})),v(y(n),"setItem",(function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"/";return n.regulatedMethod(o.document,a.cookie,n._setItem,4<arguments.length?arguments[4]:void 0)(t,e,r,i)})),v(y(n),"removeItem",(function(t,e){return n.regulatedMethod(o.document,a.cookie,n._removeItem,e)(t)})),n}return O(e,[{key:"isValidDate",value:function(t){return t instanceof Date&&!isNaN(t)}}]),e}(),E=function(){b(e,T);var t=p(e);function e(n,r,o){var a;return g(this,e),v(y(a=t.call(this,n,r)),"storageType",void 0),v(y(a),"clear",(function(t){return a.regulatedMethod(a.storageType,i.clear,null,t)()})),v(y(a),"getItem",(function(t,e){return a.regulatedMethod(a.storageType,i.getItem,null,e)(t)})),v(y(a),"key",(function(t,e){return a.regulatedMethod(a.storageType,i.key,null,e)(t)})),v(y(a),"removeItem",(function(t,e){return a.regulatedMethod(a.storageType,i.removeItem,null,e)(t)})),v(y(a),"setItem",(function(t,e,n){return a.regulatedMethod(a.storageType,i.setItem,null,n)(t,e)})),a.storageType=o,a}return O(e,[{key:"length",get:function(){return this.ensureStorageUsageIsAllowedOrThrowOnError(this.storageType,i.length),this.globalContext[this.storageType].length}}]),e}(),_=function(){function t(e){g(this,t),v(this,"globalContext",void 0),v(this,"stateContainer",void 0),this.globalContext=e.globalContext,this.stateContainer=e.stateContainer}return O(t,[{key:"sessionStorage",get:function(){try{return new E(this.globalContext,this.stateContainer,r.sessionStorage)}catch(t){throw Object(c.b)(t,"RegulatedDataContainers-sessionStorage"),t}}},{key:"localStorage",get:function(){try{return new E(this.globalContext,this.stateContainer,r.localStorage)}catch(t){throw Object(c.b)(t,"RegulatedDataContainers-localStorage"),t}}},{key:"cookie",get:function(){try{return new D(this.globalContext,this.stateContainer)}catch(t){throw Object(c.b)(t,"RegulatedDataContainers-cookie"),t}}},{key:"indexedDB",get:function(){throw new ReferenceError("Interface isn't yet defined")}},{key:"allowedToStoreAndAccessInformationOnDevice",value:function(){try{return new T(this.globalContext,this.stateContainer).allowedToStoreAndAccessInformationOnDevice().allowed}catch(t){return Object(c.b)(t,"RegulatedDataContainers-allowedToStoreAndAccessInformationOnDevice"),!1}}}],[{key:"getDefault",value:function(){return new t({globalContext:window,stateContainer:d.a})}}]),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function c(t){return t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==r(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===r(t)?t:String(t)}n.d(e,"a",(function(){return l}));var s=function(){function t(e){if(e=e.accountID,!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"accountID",void 0),this.accountID=e,this.init()}var e,n;return e=t,(n=[{key:"queue",get:function(){var t;return null==(t=window._aps.get(this.accountID))?void 0:t.queue}},{key:"init",value:function(){window._aps=window._aps||new Map,window._aps.has(this.accountID)||window._aps.set(this.accountID,{queue:[],store:new Map})}},{key:"safelyRecord",value:function(t,e){this.record(t,e).catch((function(){}))}},{key:"record",value:function(t,e){var n=this;return new Promise((function(r,i){window._aps.get(n.accountID).queue.push(new window.CustomEvent(t,{detail:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({resolve:r,reject:i,source:"apstag"},e)}))}))}},{key:"read",value:function(t){var e;return null==(e=window._aps)?void 0:e.get(this.accountID).store.get(t)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u={},l=function(t){return"string"!=typeof t&&(t=t.toString()),window._aps&&window._aps.has(t)&&u[t]||(u[t]=new s({accountID:t})),u[t]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return D})),n.d(e,"c",(function(){return _})),n.d(e,"e",(function(){return k}));var r=n(2),o=n(6),i=n(0),a=n(4),c=n(10),s=n(3),u=n(1),l=["getLog","getState"];function d(t,e,n){try{switch(Object(i.h)(l,t)&&(Object(u.b)(new Error("Debug call made: ".concat(t)),"debugPublicApi-call-".concat(t)),l=l.filter((function(e){return e!==t}))),t){case"getLog":return r.a.getState().eventLog;case"getState":return r.a.getState();case"enable":return E("fake_bids",!0),"DEBUG MODE ENABLED";case"disable":return E("fake_bids",!1),"DEBUG MODE DISABLED";case"enableConsole":return g(!1,"command"),"Debug console enabled";case"enableConsoleV2":return g(!0,"command"),"Debug console v2 enabled";case"disableConsole":try{E("console",!1),E("console_v2",!1),null!==f&&document.body.removeChild(f),m=!1,Object(o.b)()&&o.a.getDefault().localStorage.removeItem(a.f)}catch(e){Object(u.b)(e,"disableDebugConsole",{makeVisibleToAllUsers:!0})}return"Debug console disabled";case"setDebug":return(E(e,n)?"Set debug mode '":"Failed to set debug mode '").concat(e,"' to '").concat(n,"'");default:return"unknown debug argument"}}catch(e){return Object(u.b)(e,"debugPublicApi",{makeVisibleToAllUsers:!0}),"error"}}var f,b,p,y,m=!1;function g(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=1<arguments.length?arguments[1]:void 0;try{E(e?"console_v2":"console",!0),m||(t={url:e?r.a.getState().cfg.DEBUG_APP_HTML_V2:r.a.getState().cfg.DEBUG_APP_HTML,onload:h,onerror:function(){return Object(u.b)(new Error("Error Loading Debug Console"),"enableDebugConsole-".concat(e?"v2":"v1","-onerror"),{makeVisibleToAllUsers:!0})}},Object(c.d)(t),setTimeout((function(){try{var t={_type:"debugLoad",mode:e?2:1};Object(i.k)(r.a.getState().config,"pubID")&&(t.src=r.a.getState().config.pubID),null!==n&&(t.method=n),Object(s.b)(t)}catch(t){Object(u.b)(t,"enableDebugConsole-setTimeout",{makeVisibleToAllUsers:!0})}}),5e3))}catch(t){Object(u.b)(t,"enableDebugConsole",{makeVisibleToAllUsers:!0})}}function h(t){try{var e=t.responseText,n=(f=document.createElement("div"),b=document.createElement("div"),p=document.createElement("iframe"),200);D("console_v2")&&(n=330),Object(o.b)()&&null!==o.a.getDefault().localStorage.getItem(a.f)&&(n=parseInt(o.a.getDefault().localStorage.getItem(a.f),10)),(isNaN(n)||n>window.innerHeight)&&(n=200),f.style.background="#eaeded",f.style.zIndex="2147483647",f.style.bottom="0",f.style.position="fixed !important",f.style.display="block !important",f.style.left="0",f.style.right="0",f.style.height="".concat(n,"px"),b.style.cursor="row-resize",b.style.height="2px",b.style.position="absolute",b.style.top="0",b.style.left="0",b.style.right="0",b.style.backgroundColor="RGBA(0,0,0,0)",f.appendChild(b),p.frameBorder="0",p.marginHeight="0",p.marginWidth="0",p.scrolling="no",p.id="apstag-debug-iframe",p.src="about:blank",p.style.display="block",p.style.width="100%",p.style.height="".concat(n,"px"),f.appendChild(p),document.body.appendChild(f),null!==p.contentDocument&&(p.contentDocument.open(),p.contentDocument.write(e),p.contentDocument.close()),b.addEventListener("mousedown",j)}catch(t){Object(u.b)(t,"renderDebugConsole",{makeVisibleToAllUsers:!0})}}function O(t){try{var e=window.innerHeight-t.clientY;return e<200&&(e=200),f.style.height="".concat(e,"px"),p.style.height="".concat(e,"px"),e}catch(t){return Object(u.b)(t,"resizeDebugConsole",{makeVisibleToAllUsers:!0}),200}}function v(t){try{return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1}catch(t){return Object(u.b)(t,"preventEvent",{makeVisibleToAllUsers:!0}),!1}}function j(){try{void 0===y&&((y=document.createElement("div")).style.position="fixed",y.style.left="0",y.style.right="0",y.style.top="0",y.style.bottom="0",y.style.zIndex="9999999999"),f.appendChild(y),window.addEventListener("mouseup",w),window.addEventListener("mousemove",S)}catch(t){Object(u.b)(t,"resizeBarMouseDownListener",{makeVisibleToAllUsers:!0})}}function S(t){try{return O(t),v(t)}catch(t){return Object(u.b)(t,"resizeBarMouseMoveListener",{makeVisibleToAllUsers:!0}),!1}}function w(t){try{null!==y&&f.removeChild(y),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",w);var e=O(t);return Object(o.b)()&&o.a.getDefault().localStorage.setItem(a.f,"".concat(e)),v(t)}catch(t){return Object(u.b)(t,"resizeBarMouseUpListener",{makeVisibleToAllUsers:!0}),!1}}function T(){try{if(!Object(o.b)())return[];var t=o.a.getDefault().localStorage.getItem(a.h,{ignoreFailure:!0}),e=(null===t||"false"===t?t="[]":"true"===t&&(t='["fake_bids"]'),[]);try{e=JSON.parse(t)}catch(t){}return(e=Object(i.i)(e)?e:[]).filter((function(t){return Object(i.h)(a.z,t)}))}catch(t){return[]}}function D(t){try{return Object(i.h)(T(),t)}catch(t){return!1}}function E(t,e){try{var n;if(Object(o.b)()&&-1!==a.z.indexOf(t))return n=T(),e&&-1===n.indexOf(t)?n.push(t):e||(n=n.filter((function(e){return e!==t}))),0===n.length?o.a.getDefault().localStorage.removeItem(a.h):o.a.getDefault().localStorage.setItem(a.h,JSON.stringify(n)),k(),1}catch(e){Object(u.b)(e,"setDebugMode")}}function _(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{if(Object(i.k)(window,a.g)&&Object(i.k)(window[a.g],t))return window[a.g][t]}catch(t){Object(u.b)(t,"getDebugValue")}return e}var I=[];function k(){try{T().filter((function(t){return-1===I.indexOf(t)})).forEach((function(t){Object(u.b)(new Error("Debug method enabled: ".concat(t)),"debugPublicApi-enabled-".concat(t),{makeVisibleToAllUsers:!0}),I.push(t)}))}catch(t){Object(u.b)(t,"pixelDebugModes")}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"j",(function(){return b})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return y})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return h})),n.d(e,"i",(function(){return v})),n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return S})),n.d(e,"k",(function(){return w}));var r=n(8),o=n(0),i=n(6),a=n(1),c=n(4),s=n(2),u=n(3),l=n(16);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){try{return t.split("_").pop()}catch(t){return Object(a.b)(t,"getAmpAmznBidValue"),""}}function b(t){try{return!Object(o.k)(t,"slots")}catch(t){return Object(a.b)(t,"isAAXPunt"),!0}}function p(t){try{var e,n=Object(r.c)("url");if(null!==n)return encodeURIComponent(n);try{w(t,!1)?(Object(u.c)("ampAdContext","getCurrentUrl"),e=null,t.context&&(e=t.context.canonicalUrl||t.context.sourceUrl)):e=t.top.location.href}catch(t){e=null}if(null===e||!e||void 0===e){e="";try{t.top!==t.self&&(e=t.document.referrer)}catch(t){}}return encodeURIComponent(e)}catch(t){return Object(a.b)(t,"getCurrentUrl"),""}}function y(t){try{var e,n="",o=Object(r.c)("url");if(null!==o)return encodeURIComponent(o);try{try{e=(w(t,!1)&&(Object(u.c)("ampAdContext","getReferrerUrl"),t.context)||t.top.document).referrer}catch(n){e=t.document.referrer}n=encodeURIComponent(e)}catch(n){}return n}catch(n){return Object(a.b)(n,"getReferrerUrl"),""}}function m(){try{var t={cookiesParams:""};return c.j.forEach((function(e,n){(n=i.a.getDefault().cookie.getItem(n))&&(t.cookiesParams+="&".concat(e,"=").concat(n))})),t}catch(t){return Object(a.b)(t,"getApsFirstPartyCookies"),{cookiesParams:""}}}function g(t,e){try{var n=Object(l._getInitConfig)({overrides:null==e?void 0:e.initConfig}).blockedBidders,r=(Object(o.k)(t,"blockedBidders")&&Object(o.i)(t.blockedBidders)&&(n=t.blockedBidders),"");return Object(o.i)(n)?JSON.stringify(n):r}catch(t){return Object(a.b)(t,"getBlockedBidders",{makeVisibleToAllUsers:!0}),""}}function h(){try{var t;return Object(i.b)()?(t=s.a.getState(),Object(o.k)(t,"cfg")&&Object(o.k)(t.cfg,"v")&&-1!==t.cfg.v?t.cfg.v:null):c.p}catch(t){return Object(a.b)(t,"getCfgVersion"),null}}function O(t){try{if(-1===["string","number"].indexOf(d(t)))return!1;var e=Math.floor(Number(t));if(e>c.n)return e}catch(t){Object(a.b)(t,"parseTimeout",{makeVisibleToAllUsers:!0})}return!1}function v(t,e){try{var n=O(t.timeout);return!1===(n=!1===n?O(e.config.bidTimeout):n)?O(e.cfg.DEFAULT_TIMEOUT):n}catch(t){return Object(a.b)(t,"getTimeout",{makeVisibleToAllUsers:!0}),2e3}}function j(t,e){var n,r=!1;function o(e){if(!r)try{t(e)}catch(e){Object(a.b)(e,"executeFunctionOnceWithTimeout-wrappedFunction",{makeVisibleToAllUsers:!0})}clearTimeout(n),r=!0}try{return n=setTimeout(o,e,!0),o.bind(null,!1)}catch(e){return Object(a.b)(e,"executeFunctionOnceWithTimeout",{makeVisibleToAllUsers:!0}),function(){}}}function S(t){var e=!1;return function(n){if(!e)try{t(n)}catch(n){Object(a.b)(n,"executeFunctionOnceWithTimeout-wrappedFunction",{makeVisibleToAllUsers:!0})}e=!0}}function w(t,e){try{var n=e?t.AMP_CONTEXT_DATA:t.context;return Boolean(n&&Object(o.k)(n,"tagName")&&"AMP-AD"===n.tagName)}catch(t){return Object(a.b)(t,"isInAmpAd"),!1}}},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s}));var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){var e,n=t.url,i=t.onload,a=t.onerror,c=t.ontimeout,s=t.withCredentials,u=void 0===(u=t.body)?null:u,l=void 0===(e=t.headers)?null:e,d=(t=void 0===(e=t.trustTokenParameter)?null:e,new window.XMLHttpRequest);try{if(""===n)void 0!==a&&a.call(d,"error");else{d.onload=i.bind(null,d),void 0!==a&&(d.onerror=a),void 0!==c&&(d.ontimeout=c),void 0!==s&&(d.withCredentials=s);var f=null!==u?"POST":"GET";d.open(f,n),null!==l&&"object"===o(l)&&Object.keys(l).forEach((function(t){d.setRequestHeader(t,l[t])}));try{null!==t&&"object"===o(t)&&window.location===window.parent.location&&d.setTrustToken(t)}catch(t){Object(r.b)(t,"setTrustToken")}d.send(u)}}catch(t){void 0!==a&&a.call(d,"error"),Object(r.b)(t,"xhrRequest")}}function a(t,e,n,o){try{if(void 0===n&&(n=document),void 0===t)return"function"==typeof e&&e(!0),!1;var i=n.getElementsByTagName("script")[0]||n.body.firstChild,a=n.createElement("script");if(a.type="text/javascript",a.async=!0,a.src=t,e&&c(a,e),c(a,o||function(){Object(r.b)(new Error("Error Loading Script Tag"),"loadScriptTag-onerror")},[],"onerror"),null!==i.parentNode)return i.parentNode.insertBefore(a,i),!0}catch(t){Object(r.b)(t,"loadScriptTag",{makeVisibleToAllUsers:!0})}return!1}function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"onload";try{return"function"==typeof e&&(t[o]=function(){e.apply(null,n)},!0)}catch(t){return Object(r.b)(t,"addCallbackFunction"),!1}}function s(t){try{return encodeURIComponent(JSON.stringify(t))}catch(t){return Object(r.b)(t,"objToUrlParam"),""}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return P})),n.d(e,"h",(function(){return A})),n.d(e,"d",(function(){return C})),n.d(e,"g",(function(){return z})),n.d(e,"c",(function(){return x})),n.d(e,"f",(function(){return L})),n.d(e,"e",(function(){return q}));var r=n(2),o=n(8),i=n(4),a=n(0),c=n(10),s=n(1),u=n(9),l=n(13),d=n(5),f=n(20),b=n(3),p=n(12),y=n(15),m=n(28),g=n(16),h=n(7);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||T(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,e)||T(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){var n;if(t)return"string"==typeof t?D(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(t,e):void 0}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function _(t,e,n){(e=I(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function I(t){return t=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==O(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===O(t)?t:String(t)}var k=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");_(this,"bidConfig",void 0),_(this,"bidState",i.c.new),_(this,"_targetingSetID",void 0),_(this,"timing",{setAtTimes:[]}),_(this,"pixelSent",!1),_(this,"useSafeFrames",!1),_(this,"bidReqID",""),_(this,"host",void 0),_(this,"ev",void 0),_(this,"cfe",void 0),_(this,"isAmp",!1),_(this,"doc",void 0),_(this,"inheritSize",void 0),this.bidConfig=e,this._targetingSetID=Object(a.d)(),r.a.getState().config.useSafeFrames&&(this.useSafeFrames=!0),this.useSafeFrames&&Object(a.k)(e,"targeting")&&e.targeting.push("amznhost"),Object(a.k)(e,"meta")?Object(a.i)(e.meta)||(this.reportError({name:"TypeError",message:"'meta' is not an 'array': ".concat(JSON.stringify(e.meta))},"constructor-meta"),e.meta=[]):e.meta=[];try{var n="d",o=(this.bidConfig.mediaType!==d.a.VIDEO&&"v"!==this.bidConfig.mediaType||(n="v"),[]);Object(a.k)(this.bidConfig,"amzndeals")&&(Object(b.c)("bidType","".concat(n,"-amzndeals")),o=this.bidConfig.amzndeals.map((function(t){return"".concat(t,"amzniid")}))),this.bidConfig.targeting.filter((function(t){return-1!==t.indexOf("amzniid")&&!Object(a.h)(o,t)})).forEach((function(t){return Object(b.c)("bidType","".concat(n,"-").concat(t))})),Object(a.k)(this.bidConfig,"fif")&&"1"===this.bidConfig.fif?Object(b.c)("bidRender","friendly"):Object(b.c)("bidRender","unfriendly")}catch(e){this.reportError(e,"pixeling")}}var e,n;return e=t,(n=[{key:"reportError",value:function(t,e,n){Object(s.b)(t,"Bid-".concat(e),n)}},{key:"mediaType",get:function(){var t="d";return this.bidConfig.mediaType!==d.a.VIDEO&&"v"!==this.bidConfig.mediaType&&"v"!==this.bidConfig.mediaType_sp?t:d.a.VIDEO}},{key:"targeting",get:function(){var t=this;try{return this.bidConfig.targeting.map((function(e){return"amznhost"===e?[e,encodeURIComponent(t.host)]:Object(a.k)(t.bidConfig,e)&&Object(a.i)(t.bidConfig[e])?[e,encodeURIComponent(t.bidConfig[e].join(","))]:Object(a.k)(t.bidConfig,e)?[e,encodeURIComponent(t.bidConfig[e])]:[e,""]})).map((function(t){var e=(t=w(t,2))[0];t=t[1];return"&".concat(e,"=").concat(t)})).join("")}catch(t){return this.reportError(t,"targeting"),""}}},{key:"bidObject",get:function(){try{var t={slotID:this.bidConfig.slotID,amzniid:this.bidConfig.amzniid,amznbid:this.bidConfig.amznbid,amznp:this.bidConfig.amznp,amznsz:this.bidConfig.amznsz,size:this.bidConfig.amznsz};return this.bidConfig.amznactt&&(t.amznactt=this.bidConfig.amznactt),Object(a.k)(this.bidConfig,"amznadm")&&(t.amznadm=this.bidConfig.amznadm),this.mediaType===d.a.VIDEO&&(t.mediaType=d.a.VIDEO,t.qsParams=this.targeting,t.encodedQsParams=encodeURIComponent(this.targeting),t.r_amznbid=this.bidConfig.r_amznbid,t.r_amzniid=this.bidConfig.r_amzniid,t.r_amznp=this.bidConfig.r_amznp),this.useSafeFrames&&(t.amznhost=this.host),t}catch(t){return this.reportError(t,"bidObject",{makeVisibleToAllUsers:!0}),{slotID:"",amzniid:"error",amznbid:"error",amznp:"error",amznsz:"error",size:"error"}}}},{key:"newBidObject",get:function(){var t=this;try{var e={slotID:this.bidConfig.slotID,size:this.bidConfig.amznsz,mediaType:this.mediaType,targeting:{},helpers:{targetingKeys:this.bidConfig.targeting,qsParams:function(){return t.targeting},encodedQsParams:function(){return encodeURIComponent(t.targeting)}}},n=["slotID","size","mediaType"];return this.bidConfig.meta.filter((function(t){return-1===n.indexOf(t)})).forEach((function(n){e[n]=t.bidConfig[n]})),this.bidConfig.targeting.forEach((function(n){e.targeting[n]="amznhost"===n?t.host:t.bidConfig[n]})),void 0!==this.slotID&&-1!==this.slotID.indexOf("_")&&(e.sasTargeting=e.helpers.targetingKeys.map((function(n){return"".concat(n,"_").concat(t.slotID.split("_")[1],"=").concat(e.targeting[n])})).join(";")),e}catch(t){return this.reportError(t,"newBidObject",{makeVisibleToAllUsers:!0}),{slotID:"",size:"",mediaType:"d",targeting:{},helpers:{targetingKeys:[],qsParams:function(){return""},encodedQsParams:function(){return""}}}}}},{key:"slotID",get:function(){try{return this.bidConfig.slotID}catch(t){return this.reportError(t,"slotID"),""}}},{key:"matchesBidCacheId",value:function(t){var e=this;try{return this.bidConfig.targeting.reduce((function(n,r){return n||-1!==r.indexOf("amzniid")&&e.bidConfig[r]===t}),!1)}catch(t){return this.reportError(t,"matchesBidCacheId"),!1}}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),P=Object(a.e)(i.r);function R(t,e,n){try{var r=Object(a.j)(t.config.params)?t.config.params:{},o=Object(a.j)(e.params)?e.params:{},i="string"==typeof n?function(t){if(t=Object(h.a)(t).read("deviceSignal/sua"))try{return{device:{sua:JSON.parse(t)}}}catch(t){Object(s.b)(t,"getDeviceNode")}return{}}(n):{},u=S(S(S({},r),o),i);return 0===Object.keys(u).length?"":Object(c.c)(u)}catch(t){return Object(s.b)(t,"getBidParams",{makeVisibleToAllUsers:!0}),""}}function A(t){var e="validateSupplyChainObject",n=!1;function r(t,r){return Object(s.b)({name:"TypeError",message:r},"".concat(e,"-").concat(t),{makeVisibleToAllUsers:!0}),!(n=!0)}try{return Object(a.j)(t)?(Object(a.k)(t,"complete")?-1===[1,0].indexOf(t.complete)&&r("schain-complete-type","The `schain.complete` property must be a `1` or `0`"):r("schain-complete","The `schain.complete` property must be provided"),Object(a.k)(t,"ver")?Object(p.b)(t.ver,["string"])||r("schain-ver-type","The `schain.ver` property must be a string"):r("schain-ver","The `schain.ver` property must be provided"),Object(a.k)(t,"nodes")?Object(a.i)(t.nodes)?t.nodes.reduce((function(t,e){return Object(a.j)(e)?(Object(a.k)(e,"asi")?Object(p.b)(e.asi,["string"])||r("schain-node-asi-type","All `schain.nodes` items must have an `asi` property of type `string`"):r("schain-node-asi","All `schain.nodes` items must have an `asi` property"),Object(a.k)(e,"sid")?Object(p.b)(e.sid,["string"])||r("schain-node-sid-type","All `schain.nodes` items must have an `sid` property of type `string`"):r("schain-node-sid","All `schain.nodes` items must have an `sid` property"),Object(a.k)(e,"hp")?-1===[1,0].indexOf(e.hp)&&r("schain-node-hp-type","All `schain.nodes` items must have an `hp` property which is `1` or `0`"):r("schain-node-hp","All `schain.nodes` items must have an `hp` property"),Object(p.b)(e.rid,["string","undefined"])||r("schain-node-rid-type","If provided, the `rid` property on an `schain.nodes` item must be of type `string`"),Object(p.b)(e.name,["string","undefined"])||r("schain-node-name-type","If provided, the `name` property on an `schain.nodes` item must be of type `string`"),Object(p.b)(e.domain,["string","undefined"])||r("schain-node-domain-type","If provided, the `domain` property on an `schain.nodes` item must be of type `string`"),t&&!n):r("schain-node-type","All `schain.nodes` items must be objects")}),!n):r("schain-nodes-type","The `schain.nodes` property must be an `Array`"):r("schain-nodes","The `schain.nodes` property must be provided")):r("schain","The `schain` value must be an object")}catch(t){return Object(s.b)(t,e,{makeVisibleToAllUsers:!0}),!1}}function C(t,e,n,l,p){try{var O,j,w,T,D,E=null!=(O=null==p||null==(j=p.initConfig)?void 0:j.pubID)?O:null==(w=r.a.getState().config)?void 0:w.pubID,_=r.a.getState(),I=t._endpointDomain||Object(o.c)("host",_.hosts.DEFAULT_AAX_BID_HOST),k=_.cfg.DTB_PATH,C="bid",z=(_.experiments.shouldUseTestBidEndpoint&&null!==_.cfg.TEST_BID_ENDPOINT&&(C=_.cfg.TEST_BID_ENDPOINT),{src:Object(g._getInitConfig)({overrides:null==p?void 0:p.initConfig}).pubID,u:null!=p&&p.contextURL?encodeURIComponent(p.contextURL):Object(u.g)(window),pr:Object(u.h)(window),pid:P,cb:t.bidReqID,ws:Object(a.g)(window),v:i.l,t:e,slots:function(t){try{return Object(c.c)(t.map((function(t){var e;if(Object(a.k)(t,"mediaType")&&t.mediaType===d.a.VIDEO||t.mediaType===d.a.MULTI_FORMAT)e=t.aaxSlot;else{if(!(Object(a.k)(t,"sizes")&&0<t.sizes.length&&Object(a.k)(t,"slotID")))return Object(s.b)({name:"SlotError",message:"There was an error with the configuration for this slot: ".concat(JSON.stringify(t.rawSlot))},"buildSlotsUrlParam-invalidSlot",{makeVisibleToAllUsers:!0}),{id:"ERROR",mt:f.a.VIDEO,error:!0};var n=t.aaxSlot;Object(a.k)(t,"slotName")&&t.slotName!==t.slotID?(Object(b.c)("idRemap","y"),n.sd=t.slotID,n.sn=t.slotName):Object(b.c)("idRemap","n"),e=n}return e})).filter((function(t){return!0!==t.error})))}catch(t){return Object(s.b)(t,"buildSlotsUrlParam",{makeVisibleToAllUsers:!0}),""}}(t.validSlots),pj:R(_,t,E),sg:Object(m.a)(E),cfgv:Object(u.f)(),bb:Object(u.e)(t),schain:function(t,e){try{var n,r=Object(h.a)(e).read("ad/schain");if(Object(a.k)(t.config,"schain"))n=t.config.schain;else{if(!r||!A(r))return"";n=r}return encodeURIComponent(["".concat(n.ver,",").concat(n.complete)].concat(v(n.nodes.map((function(t){return["asi","sid","hp","rid","name","domain"].map((function(e){return Object(a.k)(t,e)?t[e]:""})).map((function(t){return encodeURIComponent(t)})).map((function(t){return t.replace(/\!/g,"%21")})).join(",")})))).join("!"))}catch(t){return Object(s.b)(t,"getSupplyChainObject",{makeVisibleToAllUsers:!0}),""}}(_,E)});try{var x=Object(h.a)(E).read("deviceSignal/cookieDeprecationLabel");x&&""!==x&&(z.cdep=encodeURIComponent(x))}catch(t){}try{var L=Object(h.a)(E).read("consent/GPPData")||{},q=L.gppString,U=L.applicableSections,B=0<(q||"").length,F=0<(U||[]).length;B&&(z.gpp=encodeURIComponent(q)),F&&(z.gpp_sid=encodeURIComponent(JSON.stringify(U)));var M,N=(V={isGPPPresent:B,isSectionPresent:F}).isGPPPresent,V=V.isSectionPresent;M=N&&V?"all":N?"gpp":V?"section":"none",Object(b.c)("gpp",M)}catch(t){Object(s.b)(t,"gpp")}if("[]"===z.slots||""===z.slots)throw new Error("No slots available for bid request");try{var H=Object(h.a)(E).read("sessionMarker/marker");0<(null!=H?H:"").length&&(z.sm=encodeURIComponent(H.split("_")[0]))}catch(t){}r.a.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:t,bidReqID:t.bidReqID,timeout:e,ws:z.ws,url:z.u,rqTs:Date.now()}}),_.experiments.chunkRequests&&(D=t.bidReqID.split("-"),r.a.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:D[0],networkID:parseInt(D[1],10),timestamp:Date.now(),exchangeType:"request"})),Object(g._getInitConfig)({overrides:null==p?void 0:p.initConfig}).isSelfServePub&&(z.pubid=z.src,z.src=600);var G=Object(u.d)(),X=Object(o.c)("bidParams"),Q=(Object(a.j)(X)&&(z=S(S({},z),X)),Object(a.j)(n)&&(Object(a.k)(n,"enabled")&&(z.gdpre=encodeURIComponent(n.enabled)),Object(a.k)(n,"consent")&&(z.gdprc=encodeURIComponent(n.consent)),Object(a.k)(n,"log"))&&(z.gdprl=Object(c.c)(n.log)),Object(a.k)(Object(g._getInitConfig)({overrides:null==p?void 0:p.initConfig}),"useSafeFrames")&&Object(g._getInitConfig)({overrides:null==p?void 0:p.initConfig}).useSafeFrames&&(z.sf="1"),Object(y.b)()),J=(Q&&(Object(b.c)("id","bidReq-attachToken"),l.ids.at=Q),z.vm=function(t,e){var n=!t||0===Object.keys(t.ids).length,r=n?"":Object(c.c)({ids:t.ids,md:t.md});try{Object(h.a)(e).safelyRecord("cxm/vendors/set");var o=Object(h.a)(e).read("cxm/vendors");o&&(r=n?Object(c.c)({vendors:o}):Object(c.c)({ids:t.ids,md:t.md,vendors:o}))}catch(t){Object(s.b)(t,"getVmParam")}return r}(l,E),Object.keys(z).filter((function(t){return Object(a.k)(z,t)&&"undefined"!==z[t]&&""!==z[t]&&null!==z[t]})).map((function(t){return"".concat(t,"=").concat(z[t])})).join("&")),$=(G.cookiesParams&&(J+=G.cookiesParams),"".concat(i.s).concat(I).concat(k,"/").concat(C,"?").concat(J)),K=(Object(h.a)(E).safelyRecord("adExchangeBidFetching/bidURLs/update",{legacyURL:$,bidRequestIndex:t.bidReqID}),null==(T=Object(h.a)(E).read("adExchangeBidFetching/bidURLs"))?void 0:T.get(t.bidReqID)),W=(K&&0!==K.length||Object(s.b)(new Error("Missing updatedURL from client"),"buildBidUrl-readBidURLS"),null!=K?K:$);return r.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.bidReqID,key:"urlLength",value:W.length}),W}catch(t){return Object(s.b)(t,"buildBidUrl",{makeVisibleToAllUsers:!0}),""}}function z(t,e){try{return Object(a.k)(t,"deals")&&!0===t.deals||!0===e.needNewBidObject}catch(t){return Object(s.b)(t,"isNewBidObjectRequired"),!1}}function x(t,e,n){try{var r=t.map(l.c),o=e.slots.filter(Object(l.d)(d.a.DISPLAY,d.a.MULTI_FORMAT)).map(l.c).filter((function(t){return!Object(a.h)(r,t)})),c=n?i.u.bidInFlight:i.u.noBid;return t.concat(o.map((function(t){return new k({size:"0x0",crid:"",slotID:t,mediaType:"d",meta:["slotID","mediaType","size"],amznbid:c,amzniid:"",amznp:c,amznsz:"0x0",targeting:["amzniid","amznbid","amznp","amznsz"]})})))}catch(e){return Object(s.b)(e,"addStateTrackingBidsToRealBids"),t}}function L(t,e){try{var n;return!Object(a.h)(r.a.getState().displayAdServer.noBidSlotIDs,t.slotID)&&(n=r.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.bidReqID}))[0],!(Object(a.k)(n,"rqTs")&&Date.now()-n.rqTs>24e4||Object(a.k)(n,"url")&&!Object(a.b)(n.url,null!=e&&e.contextURL?encodeURIComponent(e.contextURL):Object(u.g)(window))||t.bidState===i.c.rendered))}catch(e){return Object(s.b)(e,"isBidEligible"),!1}}function q(t,e){try{var n=t.map(l.c),o=r.a.getState();return Object.keys(o.slotBids).filter((function(t){return Object(a.h)(n,t)})).reduce((function(t,n){var a=o.slotBids[n].filter((function(t){return t.bidState===i.c.new})).filter((function(t){return L(t,e)}));return 0<a.length&&(a=a[a.length-1],r.a.dispatch({type:"BID_STATE_CHANGE",slotID:n,_targetingSetID:a._targetingSetID,bidState:i.c.exposed}),t[n]=a),t}),{})}catch(t){return Object(s.b)(t,"getNewSlotBidsAndExposeForRequestedSlots"),{}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(1),o=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){try{return function(t){try{var e;return!!c(t,["number","string"])&&!(isNaN(t)||"number"!=typeof t&&(e=parseInt(t,10),isNaN(e)))}catch(t){return Object(r.b)(t,"isNumber"),!0}}(t)||void 0===t}catch(t){return Object(r.b)(t,"isNumberOrUndefined"),!0}}function c(t,e){try{return Object(o.h)(e,i(t))}catch(t){return Object(r.b)(t,"isVarOfTypes"),!0}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return s}));var r=n(1),o=n(0);function i(t){var e=[];try{t.hasAdServerObjectLoaded()&&(e=t.getSlots())}catch(t){Object(r.b)(t,"getDisplayAdServerSlots")}return e}function a(t){try{return Object(o.k)(t,"sizes")&&Object(o.i)(t.sizes)&&0!==t.sizes.length}catch(t){return Object(r.b)(t,"doesSlotHaveSizes"),!1}}function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){try{return!t.mediaType||-1<e.indexOf(t.mediaType)}catch(t){return Object(r.b)(t,"isSlotOfType"),!0}}}function s(t){try{return t.slotID}catch(t){return Object(r.b)(t,"getSlotID"),""}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return s}));function r(t,e){try{return"number"!=typeof t[e]?0:Math.round(t[e])}catch(t){return 0}}function o(t,e){try{var n=i(t,e)[0];if(void 0!==n)return n}catch(t){}return null}function i(t,e){try{return t.performance.getEntriesByType("resource").filter((function(t){return e.test(t.name)}))}catch(t){return[]}}function a(t,e){try{var n=t.performance.timing[e];return void 0===n?0:n}catch(t){return 0}}function c(t){try{var e;return 0===["redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","secureConnectionStart"].reduce((function(e,n){return e+r(t,n)}),0)?null:(e=r(t,"fetchStart"),["domainLookupStart","domainLookupEnd","connectStart","connectEnd"].reduce((function(n,o){return n&&r(t,o)===e}),!0))}catch(t){return null}}function s(){try{var t=window.performance.timeOrigin;return void 0===t?window.performance.timing.navigationStart:t}catch(t){return 0}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return S})),n.d(e,"e",(function(){return T})),n.d(e,"d",(function(){return D}));var r=n(1),o=n(17),i=n(10),a=n(3),c=n(9),s=n(0),u=n(6),l=n(16),d=n(2);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var b,p=["email"],y=/@/,m=/^[0-9a-fA-F]{64}$/,g=((e=b=b||{})[e.noConsent=0]="noConsent",e[e.token=1]="token","https://tk.amazon-adsystem.com/envelope"),h=function(t){return m.test(t||"")};function O(t){return t===b.noConsent?"AMZN-NoCookieConsent":"AMZN-Token"}function v(t,e,n){t=0<arguments.length&&void 0!==t?t:"",e=1<arguments.length&&void 0!==e?e:0,n=2<arguments.length&&void 0!==n?n:b.token;try{var o=new Date(e).toUTCString();u.a.getDefault().cookie.setItem(O(n),t,o)}catch(t){Object(r.b)(t,"setAmznToken-".concat(n))}}function j(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:b.token;try{var e=u.a.getDefault().cookie.getItem(O(t));return e||""}catch(e){return Object(r.b)(e,"getAmznToken-".concat(t)),""}}function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"api";try{if(void 0!==t&&"function"!=typeof t)throw new Error("Callback function must be a function, ".concat(f(t)," provided"));"function"!=typeof t&&(t=function(){}),v(),v("",0,b.noConsent),Object(a.c)("id","d-".concat(e))}catch(t){Object(r.b)(t,"deleteIdentity",{makeVisibleToAllUsers:!0})}t()}function w(t,e,n,o,u,d){try{n=Object(c.a)(n);var f,p,y=Object(l._getInitConfig)({overrides:null==d?void 0:d.initConfig});if(!Object(s.k)(y,"pubID")&&0===(null!=t?t:"").length)throw new Error("apstag.init must be called before ID functions");y.pubID=0<(null!=(f=y.pubID)?f:"").length?y.pubID:t;var m={url:g,onload:function(t){try{if(t.readyState===XMLHttpRequest.DONE&&200===t.status){if("string"!=typeof(p=JSON.parse(t.responseText)).AIPToken||"number"!=typeof p.cookieExpiry)return n(),void Object(r.b)(new Error("Invalid AIPES response"),"callAipes-response");""===p.AIPToken?(Object(a.c)("id","endReqAipes-tokenEmpty"),v("1",p.cookieExpiry,b.noConsent)):(Object(a.c)("id","endReqAipes-tokenAvailable"),Object(a.g)(),o&&v(p.AIPToken,p.cookieExpiry))}else t.readyState===XMLHttpRequest.DONE&&Object(r.b)(new Error("AIPES response code: ".concat(t.status)),"callAipes-onload",{makeVisibleToAllUsers:!0})}catch(t){Object(r.b)(t,"callAipes-onload",{makeVisibleToAllUsers:!0})}n(o?null:p)},onerror:function(){Object(r.b)(new Error("AIPES response code: ".concat(this.status)),"callAipes-onerror",{makeVisibleToAllUsers:!0}),n()},ontimeout:function(){Object(r.b)(new Error("AIPES request timeout"),"callAipes-ontimeout",{makeVisibleToAllUsers:!0}),n()},headers:{"Content-Type":"application/json"},body:function(t,e,n){try{var o={publisherId:e.pubID,hashedRecords:t.hashedRecords};return n.enabled?(o.gdpr=1,void 0!==n.consent&&(o.gdprConsent=n.consent)):0===n.enabled&&(o.gdpr=0),void 0!==t.ttl&&(o.ttl=t.ttl),JSON.stringify(o)}catch(t){return Object(r.b)(t,"buildAipesBody",{makeVisibleToAllUsers:!0}),""}}(e,y,u)};Object(a.c)("id","startReqAipes"),Object(i.d)(m)}catch(t){Object(r.b)(t,"callAipes",{makeVisibleToAllUsers:!0}),n()}}function T(t,e,n){var i,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"api",u=(u=4<arguments.length?arguments[4]:void 0)||d.a.getState().config.pubID;"function"!=typeof e&&(e=function(){}),"boolean"!=typeof n&&(n=!0);try{if(!Object(s.j)(t))throw new Error("'tokenConfig' must be an object, ".concat("object"===f(t)?"null":f(t)," provided"));t.optOut?S(e,"u-oo"):(S((function(){}),"u"),Object(a.c)("id","u-".concat(c)),function(t){try{var e=[];if(!Object(s.k)(t,"gdpr")||Object(s.j)(t.gdpr)&&!Object(s.i)(t.gdpr)?Object(s.k)(t,"gdpr")&&(Object(s.k)(t.gdpr,"enabled")&&-1===[!0,!1].indexOf(t.gdpr.enabled)&&e.push("`gdpr.enabled` must be a boolean"),Object(s.k)(t.gdpr,"consent"))&&"string"!=typeof t.gdpr.consent&&e.push("'gdpr.consent' must be a valid IAB-formatted string"):e.push("`gdpr` must be an Object"),Object(s.k)(t,"optOut")&&-1===[!0,!1].indexOf(t.optOut)&&e.push("'optOut' must be a boolean"),Object(s.k)(t,"hashedRecords")&&Object(s.i)(t.hashedRecords)?1!==t.hashedRecords.length?e.push("'hashedRecords' must contain exactly one item"):t.hashedRecords.forEach((function(t){Object(s.k)(t,"type")&&-1!==p.indexOf(t.type)||e.push("'type' must be 'email' in item '".concat(JSON.stringify(t),"'")),Object(s.k)(t,"encrypted")&&"boolean"!=typeof t.encrypted&&e.push("'encrypted' must be a boolean in item '".concat(JSON.stringify(t),"'")),Object(s.k)(t,"record")&&"string"==typeof t.record?t.encrypted||m.test(t.record)?t.encrypted&&y.test(t.record)&&e.push("'record' must NOT be an un-hashed, un-encrypted email"):e.push("'record' must be a SHA256 hash in item '".concat(JSON.stringify(t),"'")):e.push("'record' must be a string in item '".concat(JSON.stringify(t),"'"))})):e.push("'hashedRecords' must be an array"),Object(s.k)(t,"ttl")&&("number"!=typeof t.ttl||isNaN(t.ttl)||t.ttl<=0||t.ttl%1!=0)&&e.push("'ttl' must be a positive integer"),!(0<e.length))return 1;Object(r.b)({name:"TokenConfigValidationError",message:"There was an issue with the TokenConfig provided ".concat(JSON.stringify(t),":\n")+e.map((function(t){return"- ".concat(t)})).join("\n")},"validateTokenConfig-invalid",{makeVisibleToAllUsers:!0})}catch(t){Object(r.b)(t,"validateTokenConfig",{makeVisibleToAllUsers:!0})}}(t)?Object(o.a)(t.gdpr,w.bind(null,null!=(i=u)?i:"",t,e,n),u):e())}catch(t){Object(r.b)(t,"updateIdentity",{makeVisibleToAllUsers:!0}),e()}}function D(t,e,n,o){"function"!=typeof e&&(e=function(){}),"boolean"!=typeof n&&(n=!0);try{if(!Object(s.j)(t))throw new Error("'tokenConfig' must be an object, ".concat("object"===f(t)?"null":f(t)," provided"));t.optOut?S(e,"r-oo"):""!==j(b.noConsent)?e():""!==j()?(e(),Object(a.c)("id","r-noop")):T(t,e,n,"r",o)}catch(t){Object(r.b)(t,"renewIdentity",{makeVisibleToAllUsers:!0}),e()}}},function(o,t,e){"use strict";e.r(t),e.d(t,"unsafelyGuessAccountID",(function(){return ce})),e.d(t,"_getInitConfig",(function(){return ue}));var Ct=e(17),Rt=e(2),xt=e(9),zt=e(0),Lt=e(13),Ut=e(8),Bt=e(4),Nt=e(14),Vt=e(27),Mt=e(22),Ft=e(3),qt=e(1),Ht=e(10),le=e(29),n=e(31),Gt=e(30),Qt=e(11),i=e(18),Xt=e(5),Jt=e(12),$t=e(21),Kt=e(15),de=e(37),Wt=e(32),fe=e(36),Yt=e(26),be=e(38),pe=e(23),Zt=e(7),te=e(6),ee=e(33),ye=e(28),me=e(24);function ne(t){return u(t)||s(t)||c(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){var n;if(t)return"string"==typeof t?r(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}function s(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function u(t){if(Array.isArray(t))return r(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t,e,n){return(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){return"symbol"===re(t=f(t,"string"))?t:String(t)}function f(t,e){if("object"!==re(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!==re(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var ae=new i.a;function ce(t){try{var e;if("string"==typeof t&&0<t.trim().length)return t;if("number"==typeof t&&0<t)return t.toString();var n=null==(e=Rt.a.getState().config)?void 0:e.pubID;if(n&&"number"==typeof n&&0<n)return n.toString();if(n&&"string"==typeof n&&""!==n)return n;var r=Array.from(window._aps.keys()).filter((function(t){return"_system"!==t&&""!==t}))[0];if(r)return r}catch(t){}return"_system"}function se(t,e,n,r){try{Object(Zt.a)(t).safelyRecord("cellophane/".concat(e,"/enter"),ie({},r,n));var o=Object(Zt.a)(t).read("cellophane/".concat(r));void 0!==n&&void 0===o?Object(zt.l)(1)&&Object(qt.b)(new Error("Missing ".concat(r," from client")),"cellophaneWrap"):n=o}catch(t){Object(qt.b)(t,"cellophaneWrap")}return n}function ue(t){return t=t.overrides,oe(oe({},Rt.a.getState().config),t)}try{var b=Object(n.b)(window.apstag);b?Object(qt.b)(new Error("apstag has already loaded - preventing duplicate load"),"apstag-duplicateLoad"):(Object(n.a)(window)&&Object(qt.b)(new Error("apstag was loaded and then destroyed"),"apstag-destroyReload",{makeVisibleToAllUsers:!0}),window.apstagLOADED=!0,function(){var g=Object(Nt.e)(window,"navigationStart"),a=(Object(zt.l)(1)&&Object(qt.b)(new Error("apstag-".concat(Bt.l," reference pixel - Used to compute ratios for other errors")),"REFERENCE"),new pe.a({stateContainer:Rt.a,globalContext:window})),t=(a.attemptConsentDataSync(),"ls"),n=Object(Ut.d)("console")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=1")&&(t="url",!0)}catch(t){return!1}}(),L=Object(Ut.d)("console_v2")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=2")&&(t="url",!0)}catch(t){return!1}}();function U(t){try{return!Rt.a.getState().experiments.chunkRequests||0===Rt.a.getState().bidReqs[t.split("-")[0]].networkReqs.filter((function(t){return t.inFlight})).length}catch(t){return Object(qt.b)(t,"_isRequestComplete"),1}}function c(t,e){try{!Rt.a.getState().bidReqs[t].hasCallbackExecuted&&U(t)&&(Rt.a.dispatch({type:"RECORD_CALLBACK",fid:t}),e())}catch(t){Object(qt.b)(t,"_checkAndCallCallback")}}function s(t){try{Rt.a.getState().experiments.chunkRequests&&Rt.a.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:t[0],timestamp:Date.now(),exchangeType:"response",networkID:parseInt(t[1],10)})}catch(t){Object(qt.b)(t,"_recordResponse")}}function h(t,r,e,o){var i=e.split("-");if(!0===Object(Zt.a)(o).read("adExchangeBidFetching/useFetch"))Object(Zt.a)(o).record("adExchangeBidFetching/amazonAdExchange/fetch",{URL:t}).catch((function(){})).finally((function(){s(i),c(i[0],r)}));else{var n={url:t,withCredentials:!0,onload:function t(e){e=se(o,"xhrBidOnLoad",e,"xhr");try{(e.status<200||299<e.status)&&0!==e.status&&Object(Zt.a)(o).safelyRecord("_legacy/_xhrBid/didError",{error:new Error("".concat(e.status))})}catch(t){}try{s(i);var n=e.responseText;eval(n),c(i[0],r)}catch(t){Object(qt.b)(t,"_xhrBid-onload",{makeVisibleToAllUsers:!0})}},onerror:function(){try{"number"==typeof this.status&&0!==this.status&&Object(Zt.a)(o).safelyRecord("_legacy/_xhrBid/didError",{error:new Error("".concat(this.status))})}catch(t){}try{s(i),c(i[0],r)}catch(t){Object(qt.b)(t,"_xhrBid-onerror",{makeVisibleToAllUsers:!0})}}};try{Object(Ht.d)(n)}catch(t){Object(qt.b)(t,"_xhrBid",{makeVisibleToAllUsers:!0}),s(i),c(i[0],r)}}}function B(t){try{var e=new Date;return e.setTime(e.getTime()+1e3*t),e.toUTCString()}catch(t){return Object(qt.b)(t,"_getCookieExpiry"),"Thu, 01 Jan 1970 00:00:00 GMT"}}function N(t){try{Object(zt.k)(t,"cr")&&t.cr.forEach((function(t){var e=-1!==t.exp?B(t.exp):Object(zt.f)(365);te.a.getDefault().cookie.setItem(t.k,t.v,e)}))}catch(t){Object(qt.b)(t,"_setFirstPartyCookies")}}function V(t,e,n){try{var r;Object(zt.k)(t,"cb")&&(Rt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.cb,key:"resTs",value:Date.now()}),r=new RegExp("e/dtb/bid.*cb=".concat(t.cb)),Rt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.cb,key:"perf",value:Object(Nt.c)(window,r)})),Object(zt.k)(t,"cfg")&&Rt.a.dispatch({type:"SET_CFG",cfg:t.cfg}),at(t,e,n)}catch(t){Object(qt.b)(t,"_doOnAaxResponse",{makeVisibleToAllUsers:!0})}}function M(t){try{Object(ee.b)(t),N(t),Object(zt.k)(t,"cfg")&&te.a.getDefault().localStorage.setItem(Bt.d,JSON.stringify(t.cfg),{ignoreFailure:!0}),F(t),Object(xt.j)(t)||Object(Ft.g)()}catch(t){Object(qt.b)(t,"_doAfterAaxResponse",{makeVisibleToAllUsers:!0})}}function F(t){try{var e;Object(zt.k)(t,"fp")&&(e=t.fp,Object(zt.k)(e,"length"))&&e.forEach((function(t){var e=t.d||0;setTimeout((function(){Object(Ft.f)(t.s)}),e)}))}catch(t){Object(qt.b)(t,"fireAAXPixels")}}function q(){try{Rt.a.getState().Q.forEach((function(t){var e="init";switch(t[0]){case"i":e="init";break;case"f":e="fetchBids";break;case"di":e="deleteId";break;case"ri":e="renewId";break;case"ui":e="updateId";break;default:return}window.apstag[e].apply(null,t[1])}))}catch(t){Object(qt.b)(t,"_QHandler",{makeVisibleToAllUsers:!0})}}function H(t){try{Object(zt.j)(t)||(Object(qt.c)("init.config",re(t),"object"),t={pubID:"err"}),Object(Jt.b)(t.pubID,["string","number"])?"number"==typeof t.pubID&&(t.pubID="".concat(t.pubID)):Object(qt.c)("init.config.pubID",re(t.pubID),"string"),Object(Jt.b)(t.adServer,["undefined","string"])||Object(qt.c)("init.config.adServer",re(t.adServer),"string"),Object(Jt.a)(t.bidTimeout)||("string"==typeof t.bidTimeout?Object(qt.b)({name:"string-".concat(t.bidTimeout),message:"init.config.bidTimeout was a non-numeric string '".concat(t.bidTimeout,"'")},"TypeError-init.config.bidTimeout",{makeVisibleToAllUsers:!0}):Object(qt.c)("init.config.bidTimeout",re(t.bidTimeout),"number")),Object(Jt.b)(t.gdpr,["undefined","object"])?"object"!==re(t.gdpr)||Object(Jt.a)(t.gdpr.cmpTimeout)||(Object(Jt.b)(t.gdpr.cmpTimeout,["string","undefined"])?Object(qt.b)({name:"string-".concat(t.bidTimeout),message:"init.config.gdpr.cmpTimeout was a non-numeric string '".concat(t.gdpr.cmpTimeout,"'")},"TypeError-init.config.gdpr.cmpTimeout",{makeVisibleToAllUsers:!0}):Object(qt.c)("init.config.gdpr.cmpTimeout",re(t.gdpr.cmpTimeout),"number")):Object(qt.c)("init.config.gdpr",re(t.gdpr),"object"),Object(zt.k)(t,"params")&&!Object(zt.j)(t.params)?Object(qt.c)("init.config.params",re(t.params),"object"):Object(zt.k)(t,"params")&&Object.keys(t.params).forEach((function(e){return!(!Object(zt.k)(t,"params")||"string"!=typeof t.params[e]&&"number"!=typeof t.params[e]&&(Object(zt.i)(t.params[e])?!t.params[e].reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)&&(Object(qt.b)({name:"non-string array item",message:"'init.config.params.".concat(e," contains a non-string item")},"TypeError-init.config.params.".concat(e),{makeVisibleToAllUsers:!0}),1):(Object(qt.c)("init.config.params.".concat(e),re(t.params[e]),"string' or 'array"),1)))})),Object(zt.k)(t,"params")&&Object(zt.k)(t.params,"us_privacy")&&"string"==typeof t.params.us_privacy&&Bt.C.test(t.params.us_privacy)?Object(Ft.c)("ccpa","y"):Object(zt.k)(t,"params")&&Object(zt.k)(t.params,"us_privacy")?Object(Ft.c)("ccpa","i"):Object(Ft.c)("ccpa","n"),Object(zt.k)(t,"blockedBidders")&&!Object(zt.i)(t.blockedBidders)?Object(qt.c)("init.config.blockedBidders",re(t.blockedBidders),"array"):Object(zt.k)(t,"blockedBidders")&&Object(zt.i)(t.blockedBidders)&&(t.blockedBidders.reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||Object(qt.b)({name:"non-string array item",message:"'init.config.blockedBidders contains a non-string item"},"TypeError-init.config.blockedBidders",{makeVisibleToAllUsers:!0})),Object(zt.k)(t,"blockedBidders")?Object(Ft.c)("blockedBidders-init","y"):Object(Ft.c)("blockedBidders-init","n"),Object(Jt.b)(t.simplerGPT,["undefined","boolean"])||Object(qt.c)("init.config.simplerGPT",re(t.simplerGPT),"boolean"),t.simplerGPT?Object(Ft.c)("simplerGpt","y"):Object(Ft.c)("simplerGpt","n"),Object(Jt.b)(t.deals,["undefined","boolean"])||Object(qt.c)("init.config.deals",re(t.deals),"boolean"),t.deals?Object(Ft.c)("deals","y"):Object(Ft.c)("deals","n"),Object(Jt.b)(t.schain,["undefined","object"])&&null!==t.schain?Object(zt.k)(t,"schain")&&!Object(Qt.h)(t.schain)&&delete t.schain:(Object(qt.c)("init.config.schain",re(t.schain),"object"),delete t.schain),Object(zt.k)(t,"schain")?Object(Ft.c)("schain","y"):Object(Ft.c)("schain","n"),Object(Jt.b)(t.useSafeFrames,["undefined","boolean"])||(Object(qt.c)("init.config.useSafeFrames",re(t.useSafeFrames),"boolean"),delete t.useSafeFrames),t.useSafeFrames?Object(Ft.c)("useSafeFrames","y"):Object(Ft.c)("useSafeFrames","n"),Object(Jt.b)(t.signals,["undefined","object"])?delete t.signals:Object(qt.c)("init.config.signals",re(t.signals),"object")}catch(e){Object(qt.b)(e,"_validateAndStoreConfig-validateConfig")}try{var e=Rt.a.getState().config;Object(zt.k)(e,"pubID")&&Object(zt.k)(t,"pubID")&&e.pubID!==t.pubID&&Object(qt.b)(new Error("`apstag.init` was called multiple times with different pubIDs (".concat(e.pubID," then ").concat(t.pubID,")")),"_validateAndStoreConfig-diffPubId",{makeVisibleToAllUsers:!0}),Rt.a.dispatch({type:"SET_CONFIG",config:t,defaultCmpTimeout:Rt.a.getState().cfg.GDPR_CMP_TIMEOUT})}catch(e){Object(qt.b)(e,"_validateAndStoreConfig",{makeVisibleToAllUsers:!0})}}function i(t,e,n){try{var r=t.slotID,o=!1;Object(zt.k)(t.bidConfig,"amznbid")&&"o_"===t.bidConfig.amznbid.slice(0,2)&&(o=!0),Object(zt.k)(t.bidConfig,"mediaType")&&"v"===t.bidConfig.mediaType&&!1===o||(!window.IntersectionObserver&&o?Object(qt.b)({name:"IntersectionObserver",message:"IntersectionObserver not supported "},"_safeApplySlotTargeting"):e.hasAdServerObjectLoaded()?e.isCommandQueueDefined()?e.hasAdServerObjectLoaded()?null!==u(r,e)?f(t,e,n):Object(qt.a)("".concat(r," isn't defined when trying to set amazon bid!")):e.cmdQueuePush((function(){i(t,e,n)})):Object(qt.a)("displayAdServer Object's cmd queue hasn't been defined",!0):Object(qt.a)("displayAdServer Object hasn't been defined",!0))}catch(t){Object(qt.b)(t,"_safeApplySlotTargeting",{makeVisibleToAllUsers:!0})}}function u(t,e){var n=null;try{n=Object(Lt.b)(e).filter((function(e){return e.slotID===t}))[0]||null}catch(e){Object(qt.b)(e,"_getAdServerSlot")}return n}function o(t,e){try{var n=Rt.a.getState().targetingKeys[t.slotID];e.hasAdServerObjectLoaded()&&Object(zt.i)(n)&&n.forEach((function(e){return 0<t.getTargeting(e).length&&t.clearTargeting(e)}))}catch(e){Object(qt.b)(e,"_clearTargetingFromSlot",{makeVisibleToAllUsers:!0})}}function l(t){try{var e;Object(zt.k)(Rt.a.getState().slotBids,t.slotID)&&(e=Rt.a.getState().slotBids[t.slotID].filter((function(t){return t.bidState===Bt.c.set}))[0])&&e.bidState===Bt.c.set&&Rt.a.dispatch({type:"BID_STATE_CHANGE",slotID:t.slotID,_targetingSetID:e._targetingSetID,bidState:Bt.c.exposed})}catch(t){Object(qt.b)(t,"_clearBidSetOnSlot",{makeVisibleToAllUsers:!0})}}function G(t,e){try{return t.map((function(t){return Object(zt.h)(e,t)})).filter((function(t){return t})).length===t.length}catch(t){Object(qt.b)(t,"_hasAllItemsInArray")}}function d(t){var e={};try{Object.keys(Rt.a.getState().slotBids).forEach((function(n){var r=Rt.a.getState().slotBids[n].filter((function(e){return Object(Qt.f)(e,t)}));0<r.length&&(e[n]=r.map((function(t){var e=Rt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.bidReqID})),n=0;return 0<e.length?n=e[0].rqTs:(e=Rt.a.getState().AAXReqs.map((function(t){return t.bidReqID})).join(", "),Object(qt.b)({name:"BidError",message:"Request not found: ".concat(t.bidReqID," not found in ").concat(e)},"_getCurrentSlotBids-noRequest")),{rqTs:n,bid:t}})).reduce((function(t,e){return t.rqTs>e.rqTs?t:e})).bid)}))}catch(t){Object(qt.b)(t,"_getCurrentSlotBids",{makeVisibleToAllUsers:!0})}return e}function Q(t,e){try{return Object(zt.i)(Rt.a.getState().targetingKeys[t])?e?["amzniid_sp"]:Rt.a.getState().targetingKeys[t].filter((function(t){return-1<t.indexOf("amzniid")&&t.indexOf("amzniid_sp")<0})):["amzniid"]}catch(t){return Object(qt.b)(t,"_getAllBidIdKeys"),[]}}function X(t,e){var n,r;try{var o=Rt.a.getState().slotBids;Object.keys(o).forEach((function(i){o[i].forEach((function(o){Q(i,e).forEach((function(e){o.bidConfig[e]===t&&(n=o,"amzniid_sp"===e?r="sp":"amzniid"!==e&&(r=e.substr(0,e.indexOf("amzniid"))))}))}))}))}catch(t){Object(qt.b)(t,"_findSlotBidByBidID",{makeVisibleToAllUsers:!0})}return{slotBid:n,dealId:r}}function J(t,e,n){var r="";try{e.bidConfig[n+"amzniid"]===t&&(r=n.split("_").pop().trim())}catch(t){Object(qt.b)(t,"_getPMPBidSize")}return r}function $(t){try{var e;return void 0===t.slots?[]:(e={},t.slots.forEach((function(t){t.mediaType!==Xt.a.VIDEO&&"v"!==t.mediaType&&"v"!==t.mediaType_sp||(0<=t.slotID.indexOf("rsv-")&&(t={slotID:t.slotID.substring(4),r_amznbid:t.amznbid,r_amzniid:t.amzniid,r_amznp:t.amznp,mediaType:Xt.a.VIDEO,targeting:["r_amznbid","r_amzniid","r_amznp"],amznsz:t.amznsz,size:t.size,crid:t.crid,meta:t.meta}),!Object(zt.k)(e,t.slotID))?e[t.slotID]=new Qt.a(t):t.targeting.forEach((function(n){e[t.slotID].bidConfig[n]=t[n],-1===e[t.slotID].bidConfig.targeting.indexOf(n)&&e[t.slotID].bidConfig.targeting.push(n)}))})),Object.keys(e).map((function(t){return e[t]})))}catch(t){return Object(qt.b)(t,"_mergeVideoBids"),[]}}function K(t){var e=$(t),n=[];try{n=e.map((function(e){return e.bidReqID=t.cb,e.host=t.host,e.ev=t.ev,e.cfe=t.cfe,e}))}catch(e){Object(qt.b)(e,"_convertAaxResponse")}return n}function f(t,e,n){try{var r,o,i=t.slotID,a=t._targetingSetID;t.bidState!==Bt.c.set&&null!==(r=u(i,e))&&(l(r),o=t.newBidObject,Object($t.a)(n),Object.keys(o.targeting).forEach((function(t){return r.setTargeting(t,o.targeting[t])})),Rt.a.dispatch({type:"BID_STATE_CHANGE",slotID:i,_targetingSetID:a,bidState:Bt.c.set,ts:Date.now()}))}catch(t){Object(qt.b)(t,"_applyTargetingToAdServerSlot",{makeVisibleToAllUsers:!0})}}function W(t,e,n,r){try{var o=d(r);t.forEach((function(t){o[t]&&i(o[t],e,n)}))}catch(t){Object(qt.b)(t,"_applySuppliedSlotBidsToAdServerObject",{makeVisibleToAllUsers:!0})}}function Y(t,e,n){try{var r=d(n);Object.keys(r).forEach((function(n){return i(r[n],t,e)}))}catch(n){Object(qt.b)(n,"_applyAllCurrentSlotBidsTargetingToAdServerObject",{makeVisibleToAllUsers:!0})}}function Z(t,e,n,r){try{n?(Object(Ft.c)("targeting","setDisplayBids-list"),W(n,t,e,r)):(Object(Ft.c)("targeting","setDisplayBids-all"),Y(t,e,r)),Rt.a.getState().displayAdServer.slotRenderEndedSet||(t.cmdQueuePush((function(){try{t.slotRenderEndedEvent((function(e){try{o(e,t),l(e)}catch(e){Object(qt.b)(e,"_applySlotTargeting-cmdQueue-slotCb",{makeVisibleToAllUsers:!0})}}))}catch(t){Object(qt.b)(t,"_applySlotTargeting-cmdQueue",{makeVisibleToAllUsers:!0})}})),Rt.a.dispatch({type:"SLOT_RENDER_ENDED_SET"}))}catch(e){Object(qt.b)(e,"_applySlotTargeting",{makeVisibleToAllUsers:!0})}}function b(t,e){function n(){if(!o)if(20<=i++)Object(qt.b)({name:"LoopError",message:"Too many attempts to append to document.body"},"_safeDocumentBodyAppendChild-callback-loops",{makeVisibleToAllUsers:!0});else{try{if(t&&t.body&&null!==t.body&&"function"==typeof t.body.appendChild)return t.body.appendChild(e),r(),void(o=!0)}catch(t){Object(qt.b)(t,"_safeDocumentBodyAppendChild-callback")}setTimeout(n,100)}}var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},o=!1,i=0;try{"complete"===t.readyState||"interactive"===t.readyState?(Object(Ft.c)("appended","sync"),n()):(Object(Ft.c)("appended","async"),t.addEventListener("DOMContentLoaded",n))}catch(t){Object(qt.b)(t,"_safeDocumentBodyAppendChild")}}function tt(t){try{var e="".concat(t.host).concat(Rt.a.getState().cfg.DTB_PATH,"/imp"),n="".concat(t.host).concat(Rt.a.getState().cfg.DTB_PATH,"/adm");return t.cfe||t.isAmp||t.isSf?n:e}catch(t){return Object(qt.b)(t,"determineCreativeFetchEndpoint"),""}}function D(t){try{var e="?b=".concat(t.bidID,"&rnd=").concat(Object(zt.d)()),n=(Object(zt.k)(t,"pp")&&(e+="&pp=".concat(t.pp)),Object(zt.k)(t,"amznp")&&(e+="&p=".concat(t.amznp)),Object(zt.k)(t,"crID")&&(e+="&crid=".concat(t.crID)),Object(zt.k)(t,"isSharedPMP")&&!0===t.isSharedPMP&&(e+="&sp=true"),Object($t.e)()&&(e+="&ep=%7B%22ce%22%3A%221%22%7D"),tt(t));return(t.fif?"".concat(n,"j"):"".concat(n,"i")).concat(e)}catch(t){return Object(qt.b)(t,"_creativeURL"),""}}function p(t){try{var e=t.doc.createElement("iframe");return e.frameBorder="0",e.marginHeight="0",e.marginWidth="0",e.style.marginTop="0",e.style.marginLeft="0",e.scrolling="no",t.inheritSize?(e.style.width="100%",e.style.height="100%"):(e.style.width="".concat(t.sizes[0],"px"),e.style.height="".concat(t.sizes[1],"px")),e}catch(t){return Object(qt.b)(t,"_baseIframe"),window.document.createElement("iframe")}}function et(t){try{if(Object(zt.k)(t,"bidType")){var e,n=t.kvMap;switch(t.bidType){case"sharedPMP":return{bidID:n.amzniid_sp[0],pp:n.amznbid_sp[0],sizes:n.amznsz_sp[0].split("x"),amznp:n.amznp_sp[0],inheritSize:t.inheritSize,isSharedPMP:t.isSharedPMP};case"preferredPMP":if(Object(Xt.c)(t)&&Object(zt.k)(t,"amzndeal"))return e=t.amzndeal.split("_").pop().trim(),{bidID:n["".concat(t.amzndeal,"amzniid")][0],sizes:A(e)};break;case"openAuction":if(Object(Xt.c)(t))return{bidID:n.amzniid[0],pp:Object(xt.c)(n.amznbid[0]),amznp:n.amznp[0],inheritSize:t.inheritSize,sizes:n.amznsz[0].split("x")};if(Object(Xt.d)(t))return{bidID:t.amzniid,pp:Object(xt.c)(t.amznbid),amznp:t.amznp,sizes:t.amznsz.split("x")};break;default:Object(qt.b)({name:"Invalid AMP Bid Type: ".concat(t.bidType),message:"No valid AMP bid type"},"getAmpAdData-invalidBidType")}}}catch(t){Object(qt.b)(t,"getAmpAdData")}return{bidID:"ERROR",sizes:[]}}function E(t,e,n){try{var r,o=null;void 0!==e&&(Object(zt.k)(e,"ampEnv")&&e.ampEnv||Object(zt.k)(e,"sfEnv")&&e.sfEnv)&&(o=e,Object(zt.k)(e,"bidType")&&"sharedPMP"===e.bidType?o.isSharedPMP=!0:o.isSharedPMP=!1,o.document=t,o.amznhost=o.kvMap.amznhost[0]),P(t)&&((o=t).bidType="openAuction",o.ampEnv=!0),null===o?Object(qt.b)(new Error("Invalid AMP parameters"),"_renderAmpImpression-invalidParams",{makeVisibleToAllUsers:!0}):"ERROR"!==(r=et(o)).bidID&&(r.doc=o.document,r.host=o.amznhost.replace("http://","https://"),r.adID="amznad".concat(Object(zt.d)()),r.isAmp=o.ampEnv,r.isSf=Object(Vt.c)(window),Rt.a.getState().aaxViewabilityEnabled?R(r,r.doc,n):I(r))}catch(t){Object(qt.b)(t,"_renderAmpImpression")}}function _(t){var e,n="unknown";function r(r){try{r&&(t.hasTimedOut=!0),r&&!t.hasRendered&&Object(qt.b)({name:"RenderTimeout",message:"renderAd was called from timeout. fifFlowMethod: ".concat(n)},"__loadAdIntoFriendlyIframe-renderAd-timeout-isOutstream:".concat(t.isOutstream)),null===e.contentDocument?Object(qt.b)({name:"NoDocument",message:"iframe.contentDocument was null inside renderAd. isFromTimeout: ".concat(r,". fifFlowMethod: ").concat(n)},"__loadAdIntoFriendlyIframe-renderAd-noDocument-isOutstream:".concat(t.isOutstream),{makeVisibleToAllUsers:!0}):t.hasRendered&&!t.hasTimedOut?Object(qt.b)({name:"DupeRender",message:"Render was called twice"},"__loadAdIntoFriendlyIframe-renderAd-rerender-isOutstream:".concat(t.isOutstream),{makeVisibleToAllUsers:!0}):t.hasRendered||(t.hasRendered=!0,e.contentDocument.open(),e.contentDocument.write(t.html),e.contentDocument.close(),Object(Ft.c)("iframe","friendly_write_complete"))}catch(r){Object(qt.b)(r,"__loadAdIntoFriendlyIframe-renderAd-isOutstream:".concat(t.isOutstream))}}function o(){var o=r.bind(null,!1);try{n=null!==e.contentDocument&&Object(zt.h)(["complete","interactive"],e.contentDocument.readyState)?(o(),"doc-ready"):null!==e.contentDocument&&"uninitialized"!==e.contentDocument.readyState?(e.contentDocument.addEventListener("DOMContentLoaded",o),"dom-listener"):(e.addEventListener("load",o),"iframe-listener"),Object(Ft.c)("fifFlow",n),setTimeout(r,1e3,!0)}catch(o){Object(qt.b)(o,"_loadAdIntoFriendlyIframe-setAttributes-isOutstream:".concat(t.isOutstream))}}try{if(Object(Ft.c)("iframe","friendly"),void 0===t.html)throw new Error("No HTML available for ad, most likely the creative has expired");if(t=oe({hasRendered:!1,hasTimedOut:!1},t),(e=p(t)).id="apstag-f-iframe-".concat(Object(zt.d)()),t.isOutstream)try{var i=Object(Mt.d)(document,t);if(void 0===i)throw new Error("gpt video div element is undefined");i&&i.firstElementChild&&i.firstElementChild.style.setProperty("display","none","important");var a=Object(Mt.f)(t.sizes);Object(Mt.a)(a,i),Object(Mt.e)(a,e),o(),Object(Mt.g)(a,e,t.bidID)}catch(o){Object(qt.b)(o,"_loadAdIntoFriendlyIframe-outstream",{makeVisibleToAllUsers:!0})}else b(t.doc,e,o)}catch(o){Object(qt.b)(o,"_loadAdIntoFriendlyIframe",{makeVisibleToAllUsers:!0})}}function I(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!1}},n=2<arguments.length?arguments[2]:void 0;try{Object(Ft.c)("iframe","unfriendly");var r,o=p(t);o.id=t.adID,o.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),Object(Ut.d)("fake_bids")?(r='<body style="background-color: #FF9900;">'.concat(50<parseInt(t.sizes[1],10)?"<h3>apstag Test Creative</h3>":"","<h4>amzniid - ").concat(t.bidID," | amznbid: ").concat(t.pp," | size: ").concat(t.sizes.join("x"),"</h4></body>"),o.src="javascript:'".concat(r,"'")):o.src=D(t),!(t.isAmp&&t.isSf&&Object(Vt.b)(window))&&(!t.isSf||t.isAmp||t.inheritSize)||Object(Vt.a)(t.sizes,window),b(t.doc,o),(e.iframe=o).onload=function(){e.states.iframeLoaded=!0,n&&n()}}catch(t){Object(qt.b)(t,"_loadAdIntoUnfriendlyIframe",{makeVisibleToAllUsers:!0})}}function nt(t,e){var n,r=t.states,o=t.doc,i=t.bidID;t=t.iframe;try{Object(zt.a)(r)||(r.shouldRunViewability=!1,Object(zt.k)(window,"amzncsm")?n=window.amzncsm:void 0!==o&&null!==o.defaultView&&Object(zt.k)(o.defaultView,"amzncsm")&&(n=o.defaultView.amzncsm),void 0!==o&&void 0!==n&&Object(zt.k)(n,"rmD")&&(n.host=Object(Ut.c)("host",Rt.a.getState().hosts.DEFAULT_AAX_PIXEL_HOST),n.rmD(t,i,o.defaultView,o,ue({overrides:null==e?void 0:e.initConfig}).pubID)))}catch(t){Object(qt.b)(t,"_triggerViewability")}}function rt(t,e,n,r){return function(o){try{var i=Object(Qt.e)(e.slots,r),a=Object.keys(i),c=[],s=(o&&(Rt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:e.bidReqID,key:"timedOutAt",value:Date.now()}),Rt.a.getState().experiments.chunkRequests)&&Rt.a.dispatch({type:"RECORD_TIMEOUT",fid:e.bidReqID,timeOut:Date.now()}),a.forEach((function(t){Object(zt.k)(i,t)&&(t=i[t],Object(Qt.g)(ue({overrides:null==r?void 0:r.initConfig}),n)||Object(zt.k)(t.bidConfig,"amznbid")?Object(zt.k)(t.bidConfig,"amznp")||(t.bidConfig.amznp=""):(Object(Ft.c)("unusedDeal",t.mediaType),t.mediaType!==Xt.a.VIDEO&&(t.bidConfig.targeting.unshift("amznsz"),t.bidConfig.amznsz="0x0"),t.bidConfig.targeting.unshift("amzniid","amznbid","amznp"),t.bidConfig.amzniid="",t.bidConfig.amznbid=Bt.u.noBid,t.bidConfig.amznp=Bt.u.noBid),c.push(t))})),n.isSupported&&(c=Object(Qt.c)(c,e,o)),{fromTimeout:o}),u=Object(Qt.g)(ue({overrides:null==r?void 0:r.initConfig}),n);try{t(c.map((function(t){return u?t.newBidObject:t.bidObject})),s)}catch(a){console.error(a)}}catch(a){Object(qt.b)(a,"_bidCallbackHandler",{makeVisibleToAllUsers:!0});try{t([],{fromTimeout:o,fromError:!0})}catch(a){console.error(a)}}}}function ot(t,e){try{var n,r;e.inheritSize?Object(Ft.c)("creativeSize","inherited"):(r=t.defaultView&&t.defaultView.frameElement?(n=t.defaultView.frameElement,"defaultView"):(n=window.frameElement,"frameElement"),Object(Ft.c)("resizeIframe",r),Object(Ft.c)("creativeSize","resized"),null!==n?(n.style.width="".concat(e.sizes[0],"px"),n.style.height="".concat(e.sizes[1],"px")):Object(qt.b)({name:"FrameNotFound",message:"'win' is 'null'. Method used: ".concat(r)},"_resizeIframe-win"))}catch(t){Object(qt.b)(t,"_resizeIframe")}}function e(t){try{return"".concat(t[0],"x").concat(t[1])}catch(t){return Object(qt.b)(t,"_sizeArrayToSring"),"x"}}function y(t){try{return 1===t.length?e(t[0]):e(t[Math.floor(t.length*Math.random())])}catch(t){return Object(qt.b)(t,"_pickRandomSizeForMockBid",{makeVisibleToAllUsers:!0}),""}}function it(t){try{var e,n=Object(Ut.c)("host",Rt.a.getState().hosts.DEFAULT_AAX_BID_HOST),r=Object(xt.g)(window),o=t.bidReqID,i=Object(zt.g)(window),a=Object(Ut.c)("testBidTimeout",200);Rt.a.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:t,timeout:a,bidReqID:o,ws:i,url:r,rqTs:Date.now()}}),e=t.slots.map((function(t){var e=y(t.sizes),n=(e="testDeal".concat(Object(zt.d)(),"_").concat(e),"testDealIi-".concat(Object(zt.d)())),r=y(t.sizes);ie(r={slotID:t.slotID,crid:"".concat(Bt.o.crid,"-").concat(Object(zt.d)()),size:r,amzniid:"".concat(Bt.o.amzniid,"-").concat(Object(zt.d)()),amznbid:Bt.o.amznbid,amznp:Bt.o.amznp,amznsz:r,amzniid_sp:"".concat(Bt.o.amzniid,"-").concat(Object(zt.d)()),amznbid_sp:"".concat(Bt.o.amznbid,"SP"),amznp_sp:"".concat(Bt.o.amznp,"SP"),amznsz_sp:y(t.sizes),amzndeals:[e]},"".concat(e,"amzniid"),n),ie(r,"mediaType","d"),ie(r,"meta",["slotID","mediaType","size"]),ie(r,"targeting",["amzniid","amznbid","amznp","amznsz","amzniid_sp","amznbid_sp","amznp_sp","amznsz_sp","amzndeal_sp","amzndeals","".concat(e,"amzniid")]),n=r;return t.mediaType===Xt.a.VIDEO&&(n.mediaType=Xt.a.VIDEO,n.amznbid="v_".concat(n.amznbid)),n})),setTimeout((function(){window.apstag.bids({slots:e,host:n,status:"ok",cb:o})}),a)}catch(t){Object(qt.b)(t,"_doMockBid",{makeVisibleToAllUsers:!0})}}function at(t,e,n){try{var r,o,i,a=Rt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.cb}))[0];a&&a.bidConfig&&a.bidConfig.slots&&(r=a.bidConfig.slots.filter(Object(Lt.d)(Xt.a.DISPLAY,Xt.a.MULTI_FORMAT)).map((function(t){return t.slotID})),o=Object(zt.k)(t,"slots")?t.slots.map((function(t){return t.slotID})):[],i=r.filter((function(t){return!Object(zt.h)(o,t)})),Rt.a.dispatch({type:"NO_BID_ON_ADSERVER_SLOTS",slotIDs:i}),e.hasAdServerObjectLoaded()?m(e,n):e.isCommandQueueDefined()&&e.cmdQueuePush((function(){m(e,n)})))}catch(e){Object(qt.b)(e,"_determineNoBidStateForAdServerObject")}}function ct(t){return Object(zt.h)(Rt.a.getState().AAXReqs.filter((function(t){return!t.resTs})).map((function(t){return t.bidConfig.slots})).reduce((function(t,e){return t.concat(e)}),[]).map(Lt.c),t)}function r(t){try{var e=t.getTargeting("amznbid");return 0<e.length&&2<e[0].length}catch(t){return Object(qt.b)(t,"_isRealAmznbidTargetingSetOnSlot"),1}}function m(t,e){try{t.hasAdServerObjectLoaded()&&"1"===t.getTargeting("amznbid")[0]&&v(t),Object(Lt.b)(t).forEach((function(t){!Object(zt.h)(Rt.a.getState().displayAdServer.noBidSlotIDs,t.slotID)||ct(t.slotID)||r(t)||"2"===t.getTargeting("amznbid")[0]||(O("noBid",t),Object($t.a)(e))}))}catch(t){Object(qt.b)(t,"_applyNoBidFromAAXState")}}function O(t,e){Bt.v.forEach((function(n){return e.setTargeting(n,Bt.u[t])}))}function v(t){Bt.v.forEach((function(e){return t.clearTargeting(e)}))}function st(t){try{var e={_type:"dupePixel",dd:Date.now()-t.timing.renderTime};Object(Ft.a)(t.bidConfig.amzniid,e)}catch(t){Object(qt.b)(t,"_sendDupeBidPixel")}}!function(){var t;Object(te.b)()&&(t=te.a.getDefault().localStorage.getItem(Bt.d,{ignoreFailure:!0}))&&null!==(t=JSON.parse(t))&&Rt.a.dispatch({type:"SET_CFG",cfg:t})}(),Object($t.d)();var ut=0;function j(){try{Object(zt.k)(window,"googletag")&&Object(zt.k)(window.googletag,"cmd")?(new le.a).cmdQueuePush((function(){try{window.googletag.pubads().addEventListener("slotRequested",(function(t){try{var e=t.slot;Rt.a.dispatch({type:"LOG_GAM_EVENT",event:oe(oe({},new Yt.a(e).slotConfig),{},{ts:Date.now(),targeting:e.getTargetingMap()})})}catch(t){Object(qt.b)(t,"_initializeSlotRequestedEventListener-cmdQueue-listener")}}))}catch(t){Object(qt.b)(t,"_initializeSlotRequestedEventListener-cmdQueue")}})):++ut<5&&setTimeout(j,100)}catch(t){Object(qt.b)(t,"_initializeSlotRequestedEventListener")}}function S(t){try{var e=t.AAXReqs.slice(t.gamSlotRenderPixel.aaxReqOffset).reduce((function(t,e){return t.concat(e.bidConfig.slots)}),[]).map((function(t){return oe(oe({},t),{},{type:"a"})})).filter((function(t){return t.mediaType!==Xt.a.VIDEO})),n=t.gamSlotFetchLog.slice(t.gamSlotRenderPixel.gamSlotFetchLogOffset).map((function(t){return oe(oe({},t),{},{type:"g"})})),r=[].concat(ne(e),ne(n)).reduce((function(t,e){return void 0===t[e.slotID]&&(t[e.slotID]={sd:e.slotID,a:{c:0},g:{c:0}}),t[e.slotID][e.type].c++,t[e.slotID][e.type].s=e.sizes,t[e.slotID][e.type].sn=e.slotName||"",t}),{});return Object.keys(r).map((function(t){return r[t]})).filter((function(t){return 0!==t.a.c||0!==t.g.c}))}catch(t){return Object(qt.b)(t,"getSlotFetchCounts"),[]}}function lt(){try{var t=Rt.a.getState(),e=S(t);0<Object.keys(e).length&&(Object(zt.c)(e,5).forEach((function(e){e={slots:e,pid:Qt.b,url:Object(xt.g)(window).split("?")[0],ws:Object(zt.g)(window),pubid:t.config.pubID,_type:"slotRenders"},Object(Ft.b)(e)})),Rt.a.dispatch({type:"UPDATE_RENDER_OFFSETS",offsets:{aaxReqOffset:t.AAXReqs.length,gamSlotFetchLogOffset:t.gamSlotFetchLog.length}}))}catch(e){Object(qt.b)(e,"sendDisplayAdServerRenderPixel")}}function dt(){setInterval((function(){lt()}),5e3)}function w(t,e){try{setTimeout((function(){try{var n=T(t).filter((function(t){return!Object(zt.k)(Rt.a.getState().bsPixels,t.iid)||t.state!==Rt.a.getState().bsPixels[t.iid]})),r=(n&&n.length&&0<n.length&&(n.forEach((function(t){return Object(Ft.a)(t.iid,bt(t,e))})),ft(n)),{fetchStart:"a",domainLookupStart:"b",domainLookupEnd:"c",connectStart:"d",secureConnectionStart:"e",connectEnd:"f",requestStart:"g",responseStart:"h",responseEnd:"i"});Object.keys(Rt.a.getState().slotBids).forEach((function(t){Rt.a.getState().slotBids[t].forEach((function(e){var n,o,i;Object(zt.k)(e.bidConfig,"amzniid")&&!e.pixelSent&&"object"===re(n=Rt.a.getState().AAXReqs.filter((function(t){return t.bidReqID===e.bidReqID}))[0])&&null!==n&&(o=n.rqTs-Object(Nt.d)(),i={pid:Qt.b,ns:n.bidConfig.validSlots.length,fid:e.bidReqID,fbrq:n.rqTs,_type:"latencyBd"},"object"===re(n.perf)&&null!==n.perf&&Object.keys(r).forEach((function(t){Object(zt.k)(n,"perf")&&0!==Object(Nt.a)(n.perf,t)&&(i[r[t]]=Object(Nt.a)(n.perf,t)-o)})),i.j=n.resTs-n.rqTs,Object(Ft.a)(e.bidConfig.amzniid,i),Rt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:t,iid:e.bidConfig.amzniid,key:"pixelSent",value:!0}))}))})),w(t,e)}catch(n){Object(qt.b)(n,"_sendBidsSetOnDFPPixel-timeout")}}),5e3)}catch(t){Object(qt.b)(t,"_sendBidsSetOnDFPPixel")}}function ft(t){t.forEach((function(t){return Rt.a.dispatch({type:"RECORD_BID_INFO_SENT",bidInfo:t})}))}function bt(t,e){try{var n=pt(t.fid),r={status:t.state,pubid:ue({overrides:null==e?void 0:e.initConfig}).pubID,_type:"bidSetPixel",toa:Object(zt.k)(n.req,"timedOutAt")?n.req.timedOutAt:0,fbrq:n.req.rqTs,pto:n.req.timeout,ns:n.req.bidConfig.validSlots.length,bla:n.req.resTs-n.req.rqTs,reqindex:n.index,fid:t.fid,tbs:0,c:"dtb"},o=(Rt.a.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION&&(r.eid=Rt.a.getState().experiments.chunkRequests?2:1,r.fbindex=n.fbIndex,r.fbns=Rt.a.getState().bidConfigs[parseInt(t.fid.split("-")[0],10)].slots.length),Rt.a.getState().experiments),i=(Object(zt.k)(o,"shouldUseTestBidEndpoint")&&(r.tbs=o.shouldUseTestBidEndpoint?2:1),t.delta&&(r.delay=t.delta),n.req.perf);return void 0!==i&&(r.ul=n.req.urlLength,r.es=Object(Nt.a)(i,"encodedBodySize")),0<Object.keys(Rt.a.getState().identityState).length&&(r.ids=JSON.stringify(Rt.a.getState().identityState)),0<Rt.a.getState().tcfParseTime&&(r.tpt=Rt.a.getState().tcfParseTime),r}catch(t){return Object(qt.b)(t,"_mapBidInfoToPixel"),{_type:"bidSetPixel",status:-1,pubid:"",toa:0,fbrq:0,pto:0,ns:0,bla:0,reqindex:0,fid:"",tbs:0,c:"dtb"}}}function pt(t){var e=Rt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t}))[0],n=Rt.a.getState().AAXReqs.indexOf(e)+1;return(e={req:e,index:n,fbIndex:n}).index=Rt.a.getState().AAXReqs.indexOf(e.req)+1,Rt.a.getState().experiments.chunkRequests&&(e.fbIndex=Rt.a.getState().AAXReqs.filter((function(t){return-1===t.bidReqID.indexOf("-")||"0"===t.bidReqID.split("-")[1]})).map((function(t){return t.bidReqID.split("-")[0]})).indexOf(t.split("-")[0])+1),e}function T(t){try{var e=gt(t),n=[];return null!==e&&Object.keys(Rt.a.getState().slotBids).forEach((function(t){Rt.a.getState().slotBids[t][0].bidConfig.mediaType!==Xt.a.VIDEO&&Rt.a.getState().slotBids[t].filter((function(t){return Object(zt.k)(t.bidConfig,"amzniid")})).forEach((function(r){var o,i,a;null!==e&&(o={state:-1,slotID:t,iid:r.bidConfig.amzniid,fid:r.bidReqID},a=[],i=[],t in e&&(a=e[t].fetchedAt.filter((function(t){return t.AAXReqInfo&&t.AAXReqInfo.bidReqID===r.bidReqID})),i=e[t].targetedAt.filter((function(t){return t.targeting===r.bidConfig.amzniid}))),0<a.length?0<a.length&&i.length>=a.length&&a.slice(a.length-1)[0].ts>i.slice(a.length-1)[0].ts?1===e[t].fetchWithIID.filter((function(t){return t===r.bidConfig.amzniid})).length?o.state=1:o.state=4:Object(zt.h)(e[t].fetchWithIID,r.bidConfig.amzniid)?o.state=3:o.state=2:o.state=0,1!==o.state&&2!==o.state||(a=k(i=Rt.a.getState().AAXReqs.filter((function(t){return t.bidReqID===r.bidReqID}))[0].resTs,e[t].fetchedAt,2===o.state))&&Object(zt.k)(a,"ts")&&(o.delta=i-a.ts),n.push(o))}))})),n}catch(t){return Object(qt.b)(t,"_getBidSetInfo"),[]}}function k(t,e,n){var r=e.map((function(e){return e=t-e.ts,!n&&e<=0?-e:n&&0<=e?e:null}));return e[yt(r)]}function yt(t){for(var e=-1,n=-1,r=0;r<t.length;r++)null!==t[r]&&(-1===n||t[r]<e)&&(e=t[n=r]);return n}function mt(t,e){return Rt.a.getState().AAXReqs.filter((function(t){return Object(zt.h)(t.bidConfig.slots.map((function(t){return t.slotID})),e)}))[t]}function gt(t){try{var e;return t.hasAdServerObjectLoaded()?(e=Rt.a.getState().gamSlotFetchLog.reduce((function(t,e){Object(zt.k)(t,e.slotID)||(t[e.slotID]={fetchedAt:[],targetedAt:[]});var n=t[e.slotID];return n.fetchedAt.push({ts:e.ts,AAXReqInfo:mt(n.fetchedAt.length,e.slotID)}),Object(zt.k)(e.targeting,"amzniid")&&0<e.targeting.amzniid.length?n.targetedAt.push({ts:e.ts-1,targeting:e.targeting.amzniid[0]}):n.targetedAt.push({ts:e.ts-1,targeting:""}),t}),{}),Object.keys(e).forEach((function(t){var n;Object(zt.k)(e,t)&&((n=e[t]).fetchWithIID=n.fetchedAt.map((function(t){return(t=k(t.ts,n.targetedAt,!0))?t.targeting:0})),e[t]=n)})),e):null}catch(t){return Object(qt.b)(t,"_getDFPSlotFetches"),null}}function ht(t){try{t.hasAdServerObjectLoaded()?O("noRequest",t):t.isCommandQueueDefined()&&t.cmdQueuePush((function(){O("noRequest",t)}))}catch(t){Object(qt.b)(t,"_applyNoRequestToAAXState")}}function Ot(t,e){try{Rt.a.dispatch({type:"REQUESTED_BID_FOR_ADSERVER_SLOTS",slotIDs:t}),e.isCommandQueueDefined()&&e.cmdQueuePush((function(){try{var n=Object(Lt.b)(e);"0"===e.getTargeting("amznbid")[0]&&v(e),G(t.filter((function(t){return void 0!==t})),n.map((function(t){return t.slotID})))?n.forEach((function(e){Object(zt.h)(t,e.slotID)&&!r(e)&&O("bidInFlight",e)})):e.cmdQueuePush((function(){try{O("bidInFlight",e)}catch(t){Object(qt.b)(t,"_setRequestToAAXInFlightState-cmdQueue-cmdQueue")}}))}catch(n){Object(qt.b)(n,"_setRequestToAAXInFlightState-cmdQueue")}}))}catch(t){Object(qt.b)(t,"_setRequestToAAXInFlightState")}}function P(t){try{return Object(zt.k)(t,"type")&&!(t instanceof Document)&&"amp"===t.type}catch(t){return Object(qt.b)(t,"_isLegacyAmpCreative"),!1}}function vt(t,e){try{return void 0!==e&&Object(zt.k)(e,"ampEnv")&&e.ampEnv||P(t)}catch(t){Object(qt.b)(t,"_isAmpImpression")}}function A(t){return t.split("x")}function jt(t,e,n,r){var o=se(ce(),"renderImp",{doc:t,bidID:e,kvBidObject:n},"renderImpArgs");t=o.doc,e=o.bidID,n=o.kvBidObject;try{Object(Ft.c)("renderImp","start"),Object(Ft.g)()}catch(t){Object(qt.b)(t,"_renderImp-pixels")}try{var i=void 0===n?"0.0.0":n.cv;if(vt(t,n)&&Object(xt.k)(window,!0))P(t)?Object(Ft.c)("renderFootprint","amp"):Object(Ft.c)("renderFootprint","multi-amp-".concat(i)),E(t,n,r);else if(Object(Vt.c)(window)&&void 0!==n&&Object(zt.k)(n,"kvMap")&&Object(zt.k)(n.kvMap,"amznhost"))Object(Ft.c)("renderFootprint","multi-sf-".concat(i)),E(t,n,r);else{var a=!1,c=("string"==typeof e&&0===e.indexOf("sp|")&&(e=e.substring(3),a=!0),e||t.amzniid),s=X(c,a),u=s.slotBid,l=s.dealId,d=!1;if(void 0!==n&&Object(zt.k)(n,"bidType")&&"outstream"===n.bidType&&(d=!0),u){var f,b,p,y,m,g,h,O,v,j,S,w,T=l&&1<=l.length?A("sp"===l?u.bidConfig.amznsz_sp:J(c,u,l)):A(u.bidConfig.amznsz);1===arguments.length?(Object(Ft.c)("renderFootprint","JSONp"),_({doc:u.doc,bidID:u.bidConfig.amzniid,sizes:T,html:t.html,inheritSize:u.inheritSize||!1,isOutstream:d})):(Object(Ft.c)("bidRenderState",u.bidState),f=a?"sharedpmp":"open",void 0!==n?Object(Ft.c)("renderFootprint","multi-".concat(f,"-").concat(i)):Object(Ft.c)("renderFootprint","standard-".concat(f,"-").concat(i)),u.bidState===Bt.c.rendered&&st(u),Rt.a.dispatch({type:"BID_STATE_CHANGE",slotID:u.slotID,_targetingSetID:u._targetingSetID,bidState:Bt.c.rendered,ts:Date.now()}),b=u.host,p=u.bidConfig.slotID,y="amznad".concat(Math.round(1e6*Math.random())),m={bidID:c,doc:t,slotID:p,pp:C("amznbid",u,l),host:b,adID:y,sizes:T,amznp:C("amznp",u,l),crID:C("crid",u,l),fif:!1,dealId:l,isSharedPMP:a,cfe:u.cfe,isOutstream:d,inheritSize:Object(zt.j)(n)&&Object(zt.k)(n,"inheritSize")&&!0===n.inheritSize},"1"===u.bidConfig.fif&&!1===d&&!1===a?(m.fif=!0,Rt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:u.slotID,iid:e,key:"doc",value:t}),Rt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:u.slotID,iid:e,key:"inheritSize",value:m.inheritSize}),Object(Ht.b)(D(m),(function(){}),document,(function(){return Object(qt.b)(new Error("Error Loading JSONP Render Callback"),"renderImp-fif-callback-load",{makeVisibleToAllUsers:!0})}))):d?(Rt.a.dispatch({type:"OUTSTREAM_SHOULD_SAMPLE",shouldSample:Object(zt.l)(10)}),Rt.a.getState().outstream.shouldSample&&(Object(Ft.e)("renderImp",m.bidID),Rt.a.dispatch({type:"RECORD_OUTSTREAM_RENDER_START_TIME",time:Date.now()})),v=Object(Mt.c)(m,Bt.b),S=1<=(null==(j=null==(g=Rt.a.getState().bidConfigs[u.bidReqID])||null==(h=g.slots)?void 0:h.filter((function(t){return(null==t?void 0:t.slotID)===(null==m?void 0:m.slotID)})))?void 0:j.length)?null==(O=j[0])?void 0:O.companions:[],w=Object(Mt.b)(v,Bt.B,m,S),m.html=w,_(m)):Rt.a.getState().aaxViewabilityEnabled?R(m,t,r):I(m),d||ot(t,m),Object(Ft.c)("renderImp","complete"))}else try{Object(qt.b)(new Error("Invalid bid ID. '".concat("(bidID value: "+e+", bID value: "+c+")","' tried to render into document ").concat(t instanceof Document?t.documentURI:"with type "+re(t))),"_renderImp-invalidId",{makeVisibleToAllUsers:!0})}catch(t){Object(qt.b)(t,"_renderImp-invalidId")}}}catch(t){Object(qt.b)(t,"_renderImp",{makeVisibleToAllUsers:!0})}}function C(t,e,n){try{var r,o="";return void 0!==n&&1<=n.length?(r="".concat(t,"_sp"),"sp"===n&&Object(zt.k)(e.bidConfig,r)&&(o=e.bidConfig[r])):Object(zt.k)(e.bidConfig,t)&&(o=e.bidConfig[t]),o}catch(t){return Object(qt.b)(t,"_getProperBidInfoValue"),""}}function R(t,e,n){try{var r=e.createElement("script"),o=(r.type="text/javascript",r.async=!0,{doc:e,bidID:t.bidID,states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!0}}),i=nt.bind(null,o,n);Object(Ht.a)(r,(function(){o.states.csmLoaded=!0,i()}));try{r.addEventListener("error",(function(t){return Object(Ft.b)({_type:"csm_fail",ts:Date.now(),msg:t.message})}))}catch(t){Object(qt.b)(t,"_loadViewabilityAd-csm")}I(t,o,i),r.src=Rt.a.getState().cfg.CSM_JS,b(e,r)}catch(t){Object(qt.b)(t,"_loadViewabilityAd")}}function x(t){var e=ce();try{t=se(e,"bids",t,"aaxResp"),Object(Zt.a)(e).safelyRecord("_legacy/bidRequest/didComplete",{pairedEvents:["_legacy/bidRequest/monitor"],eventIdentifier:t.cb,statusUpdate:"completed"})}catch(t){}var n=ae;try{V(t,n,e),Object(zt.k)(t,"slots")&&(Rt.a.dispatch({type:"UPDATE_SLOT_BIDS",bids:K(t)}),Object(zt.k)(t,"ev")&&Rt.a.dispatch({type:"SET_VIEWABILITY",viewability:t.ev}),Object(zt.k)(t,"cfn"))&&Rt.a.dispatch({type:"SET_CFG",cfg:{CSM_JS:"//"===t.cfn.substring(0,2)?t.cfn:"//c.amazon-adsystem.com/".concat(t.cfn)}}),M(t)}catch(t){Object(qt.b)(t,"_bids",{makeVisibleToAllUsers:!0})}}function St(){return"number"==typeof Rt.a.getState().cfg.MAX_SLOTS_PER_REQUEST&&0<Rt.a.getState().cfg.MAX_SLOTS_PER_REQUEST}function wt(t,e,n){var r,o=null!=(r=null==n||null==(r=n.initConfig)?void 0:r.pubID)?r:Rt.a.getState().config.pubID;t=se(o,"fetchBids",t,"bidConfig");try{Object(Zt.a)(o).safelyRecord("consent/tcfapi/attemptSync"),Object(Zt.a)(o).safelyRecord("consent/gppapi/attemptSync"),a.attemptConsentDataSync();var i=Object($t.b)(o);Object(Ct.a)(Rt.a.getState().config.gdpr,(function(r){z(t,e,r,i,{initConfig:null==n?void 0:n.initConfig,contextURL:null==n?void 0:n.contextURL,accountID:o})}),o)}catch(r){Object(qt.b)(r,"_getConfigsAndFetchBids",{makeVisibleToAllUsers:!0})}}function Tt(t,e,n){var r=n.initConfig.pubID,o=(Object(Zt.a)(r).safelyRecord("consent/tcfapi/attemptSync"),Object(Zt.a)(r).safelyRecord("consent/gppapi/attemptSync"),a.attemptConsentDataSync(),Object($t.b)(r));Object(Ct.a)(Rt.a.getState().config.gdpr,(function(i){z(t,e,i,o,{initConfig:null==n?void 0:n.initConfig,contextURL:null==n?void 0:n.contextURL,accountID:r})}),r)}function z(t,e,n,r,o){var i=o.accountID,a=(Object(Zt.a)(i).safelyRecord("deviceSignal/cookieDeprecationLabel/set"),null!=o&&o.adServer?Object(Gt.a)(o.adServer):ae);Object(Zt.a)(i).safelyRecord("sessionMarker/marker/sync");try{Object(Jt.b)(e,["function","undefined"])||Object(qt.c)("fetchBids.callback",re(e),"function"),"function"!=typeof e&&(e=function(){}),Object(zt.j)(t)||(Object(qt.c)("fetchBids.bidConfig",re(t),"object"),t={}),Object(Jt.a)(t.timeout)||("string"==typeof t.timeout?Object(qt.b)({name:"string-".concat(t.timeout),message:"fetchBids.bidConfig.timeout was a non-numeric string '".concat(t.timeout,"'")},"TypeError-fetchBids.bidConfig.timeout",{makeVisibleToAllUsers:!0}):Object(qt.c)("fetchBids.bidConfig.timeout",re(t.timeout),"number")),Object(zt.k)(t,"params")&&!Object(zt.j)(t.params)?Object(qt.c)("fetchBids.bidConfig.params",re(t.params),"object"):Object(zt.k)(t,"params")&&Object(zt.j)(t.params)&&Object.keys(t.params).forEach((function(e){return!(void 0===t.params||"string"!=typeof t.params[e]&&"number"!=typeof t.params[e]&&(Object(zt.i)(t.params[e])?!t.params[e].reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)&&(Object(qt.b)({name:"non-string array item",message:"'fetchBids.bidConfig.params.".concat(e," contains a non-string item")},"TypeError-fetchBids.bidConfig.params.".concat(e),{makeVisibleToAllUsers:!0}),1):(Object(qt.c)("fetchBids.bidConfig.params.".concat(e),re(t.params[e]),"string' or 'array"),1)))})),Object(zt.k)(t,"blockedBidders")&&!Object(zt.i)(t.blockedBidders)?Object(qt.c)("fetchBids.bidConfig.blockedBidders",re(t.blockedBidders),"array"):Object(zt.k)(t,"blockedBidders")&&Object(zt.i)(t.blockedBidders)&&(t.blockedBidders.reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||Object(qt.b)({name:"non-string array item",message:"'fetchBids.bidConfig.blockedBidders contains a non-string item"},"TypeError-fetchBids.bidConfig.blockedBidders",{makeVisibleToAllUsers:!0})),Object(zt.k)(t,"blockedBidders")?Object(Ft.c)("blockedBidders-fetchBids","y"):Object(Ft.c)("blockedBidders-fetchBids","n"),Object(zt.k)(t,"slots")&&!Object(zt.i)(t.slots)&&Object(qt.c)("fetchBids.bidConfig.slots",re(t.slots),"array")}catch(a){Object(qt.b)(a,"_fetchBids-validation",{makeVisibleToAllUsers:!0})}var c=!1,s=((ue({overrides:null==o?void 0:o.initConfig}).simplerGPT||Object(Zt.a)(i).read("ad/googletagSlotAutoImport"))&&(c=!0),oe(oe({},t),{},{bidReqID:"".concat(Rt.a.getState().AAXReqs.length),slots:[],validSlots:[],networkReqs:[]})),u=!1;try{!0===c&&(!Object(zt.k)(t,"slots")||Object(zt.k)(t,"slots")&&Object(zt.i)(t.slots)&&0<t.slots.length&&Object(zt.k)(t.slots[0],"getSlotElementId"))?0===Object(Lt.b)(a).length?(Object(qt.b)(new Error("fetchBids was called in simplerGPT mode before any slots were defined in GPT"),"_fetchBids-simplerGpt-NoSlots",{makeVisibleToAllUsers:!0}),u=!0,s.slots=[]):(t.slots?(Object(Ft.c)("slots","gpt-provided"),s.slots=t.slots.map((function(t){return new Yt.a(t)}))):(Object(Ft.c)("slots","gpt-fetch"),s.slots=Object(Lt.b)(a)),s.slots=s.slots.filter(Lt.a),0===s.slots.length&&(Object(qt.b)(new Error("No GPT slots provided to apstag.fetchBids() had valid sizes"),"_fetchBids-simplerGpt-NoValidSizes",{makeVisibleToAllUsers:!0}),u=!0)):Object(zt.k)(t,"slots")&&Object(zt.i)(t.slots)&&(c?Object(Ft.c)("slots","gpt-aps"):Object(Ft.c)("slots","aps"),s.slots=t.slots.map((function(t){switch(t.mediaType){case Xt.a.DISPLAY:return new Wt.a(t);case Xt.a.VIDEO:return new fe.a(t);case Xt.a.MULTI_FORMAT:return new be.a(t);default:return new Wt.a(t)}}))),s.validSlots=s.slots.filter((function(t){return t.isValid()})),s.validSlots.length>Bt.m&&(s.validSlots=s.validSlots.slice(s.validSlots.length-Bt.m),Object(Ft.c)("slots","".concat(Bt.m," max-allowed-slots-exceeded with ").concat(s.slots.length," slots defined")))}catch(a){Object(qt.b)(a,"_fetchBids-getSlots",{makeVisibleToAllUsers:!0})}var l,d=Object(xt.i)(s,Rt.a.getState());try{e=Object(xt.b)(rt(e,s,a,o),d)}catch(a){Object(qt.b)(a,"_fetchBids-wrapCallback",{makeVisibleToAllUsers:!0})}try{if(0===s.validSlots.length)return!1===u&&Object(qt.b)(new Error("No valid slots provided to apstag.fetchBids"),"_fetchBids-noSlots",{makeVisibleToAllUsers:!0}),void setTimeout(e.bind(null,[]),10);try{var f=1===s.slots.length?"single":"multi",b=Date.now()-g<=Bt.q?"onload":"ondelay",p=Rt.a.getState().AAXReqs.reduce((function(t,e){return e.bidConfig.slots.forEach((function(e){Object(zt.h)(t,e.slotID)||t.push(e.slotID)})),t}),[]);s.slots.map((function(t){return t.slotID})).map((function(t){return Object(zt.h)(p,t)})).map((function(t){return t?"refresh":"initial"})).filter((function(t,e,n){return n.indexOf(t)===e})).forEach((function(t){return Object(Ft.c)("fetchBids","".concat(f,"-").concat(b,"-").concat(t))}))}catch(a){Object(qt.b)(a,"_fetchBids-feature")}if(Ot(s.slots.filter(Object(Lt.d)(Xt.a.DISPLAY,Xt.a.MULTI_FORMAT)).map(Lt.c),a),Rt.a.dispatch({type:"NEW_FETCH_BID_REQUEST",fid:s.bidReqID,pto:d}),Rt.a.dispatch({type:"RECORD_ORIGINAL_BID_CONFIG",bidConfig:s}),Object(Zt.a)(i).safelyRecord("_legacy/bidRequest/monitor",{eventIdentifier:s.bidReqID}),Object(Ut.d)("fake_bids"))it(s);else if(Bt.k)if(Rt.a.dispatch({type:"SHOULD_CHUNK_REQUESTS",value:Object(zt.l)(Rt.a.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION)}),Rt.a.getState().experiments.chunkRequests&&St()){for(var y=Dt(s),m=0;m<y.length;m++)y[m].bidReqID="".concat(s.bidReqID,"-").concat(m);Rt.a.dispatch({type:"ADD_CHUNKED_REQUESTS",fid:s.bidReqID,numChunks:y.length}),y.forEach((function(t){h(Object(Qt.d)(t,d,n,r,o),e,t.bidReqID,i)}))}else h(Object(Qt.d)(s,d,n,r,o),e,s.bidReqID,i);else Object(Ht.b)(Object(Qt.d)(s,d,n,r,o),e)}catch(a){Object(qt.b)(a,"_fetchBids",{makeVisibleToAllUsers:!0})}try{null!=o&&null!=(l=o.initConfig)&&l.pubID&&Object(me.c)(o.initConfig.pubID)}catch(a){}}function Dt(t){try{for(var e=Math.ceil(t.validSlots.length/Rt.a.getState().cfg.MAX_SLOTS_PER_REQUEST),n=new Array(e),r=0;r<e;r++){var o=r*Rt.a.getState().cfg.MAX_SLOTS_PER_REQUEST;n[r]={slots:t.validSlots.slice(o,o+Rt.a.getState().cfg.MAX_SLOTS_PER_REQUEST)}}return n.map((function(e){return oe(oe({},t),e)}))}catch(e){return Object(qt.b)(e,"chunkConfig",{makeVisibleToAllUsers:!0}),[]}}function Et(t,e){var n=null!=(n=null==e||null==(n=e.initConfig)?void 0:n.pubID)?n:Rt.a.getState().config.pubID;try{t=se(n,"setDisplayBids",t,"slotIDList")}catch(t){}var r=null!=e&&e.adServer?Object(Gt.a)(e.adServer):ae;try{null!=e&&e.adServer||Object(zt.k)(Rt.a.getState().config,"adServer")?r.isSupported?(Z(r,n,t,e),m(r,n)):Object(qt.b)(new Error("apstag.setDisplayBids called with unsupported ad server: ".concat(Rt.a.getState().config.adServer)),"_setDisplayBids-invalidAdServer",{makeVisibleToAllUsers:!0}):Object(qt.b)(new Error("apstag.setDisplayBids called without specifying ad server"),"_setDisplayBids-noAdServer",{makeVisibleToAllUsers:!0})}catch(t){Object(qt.b)(t,"_setDisplayBids",{makeVisibleToAllUsers:!0})}}function _t(t,e){var n;(null!=(n=t.gdpr)&&n.consent||null!=(n=t.gdpr)&&n.enabled)&&(n={tcString:null==(n=t.gdpr)?void 0:n.consent,gdprApplies:null==(n=t.gdpr)?void 0:n.enabled},a.writeConsentDataToStore(n)),a.attemptConsentDataSync(),H(t),"function"==typeof e&&e()}function It(t,e){var n=t.pubID;t=se(n,"init",t,"config");try{var r=ae=t.adServer?Object(Gt.a)(t.adServer):ae;_t(t),ht(r),Object(ye.b)(),Object($t.c)(n)}catch(t){Object(qt.b)(t,"_init")}"function"==typeof e&&e()}function kt(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"display",n=ae,r=Rt.a.getState();try{switch(e){case Xt.a.DISPLAY:return Object(Ft.c)("targeting","targetingKeys-display"),r.config.useSafeFrames?[].concat(ne(Bt.i),["amznhost"]):Bt.i;case Xt.a.VIDEO:return Object(Ft.c)("targeting","targetingKeys-video"),r.config.useSafeFrames?[].concat(ne(Bt.A),["amznhost"]):Bt.A;default:if(Object(Qt.g)(null==(t=Rt.a.getState())?void 0:t.config,n)){if(Object(Ft.c)("targeting","targetingKeys-newBid"),Object(zt.i)(Rt.a.getState().targetingKeys[e]))return Rt.a.getState().targetingKeys[e]}else Object(Ft.c)("targeting","targetingKeys-invalid");return[]}}catch(t){return Object(qt.b)(t,"_targetingKeys",{makeVisibleToAllUsers:!0}),[]}}function Pt(){try{return Rt.a.getState().AAXReqs.reduce((function(t,e){return e.bidConfig.slots.reduce((function(t,e){return t[e.slotID]=e.slotName,t}),t)}),{})}catch(t){return Object(qt.b)(t,"_getSlotIdToNameMapping",{makeVisibleToAllUsers:!0}),{}}}function At(){return te.a.getDefault().allowedToStoreAndAccessInformationOnDevice()}try{Object(zt.k)(window,"apstag")&&Object(zt.k)(window.apstag,"_Q")&&0<window.apstag._Q.length&&Rt.a.dispatch({type:"SET_Q",Q:window.apstag._Q})}catch(t){Object(qt.b)(t,"apstag-storeQ",{makeVisibleToAllUsers:!0})}window.apstag=function(){var e={punt:x,init:It,debug:Ut.a,_getSlotIdToNameMapping:Pt,targetingKeys:kt,fetchBids:wt,setDisplayBids:Et,renderImp:jt,bids:x,deleteId:Kt.a,updateId:Kt.e,renewId:Kt.d,dpa:Kt.a,upa:Kt.e,rpa:Kt.d,thirdPartyData:{},isGDPRRegion:!1,rr:de.a,re:qt.b,_load3PLibraryConfig:$t.c,_atsaaiod:At,clientFetchBids:Tt};return Object.keys(e).forEach((function(t){"function"==typeof e[t]&&(e[t]=Object(ee.a)(t,e[t]),e[t]=Object(qt.d)(e[t],t))})),L?Object(Ut.b)(!0,t):n&&Object(Ut.b)(!1,t),!0===Object(Ut.c)("exposeApi")&&(e._api={_getBidSetInfo:T,_applyTargetingToGPTSlot:f,dispatch:Rt.a.dispatch,_clearTargetingFromGPTSlot:o,_clearBidSetOnSlot:l,_getCurrentSlotBids:d,_creativeURL:D,getSlotFetchCounts:S,buildBidUrl:Qt.d}),oe(oe({},window.apstag),e)}(),function(){try{var t,e=(Rt.a.dispatch({type:"SHOULD_SAMPLE_FEATURES",value:Object(zt.l)(Rt.a.getState().cfg.FEATURE_SAMPLING_RATE)}),Rt.a.dispatch({type:"SET_HOST",hostName:"DEFAULT_AAX_BID_HOST",hostValue:"aax.amazon-adsystem.com"}),Rt.a.dispatch({type:"SHOULD_SAMPLE_LATENCY",value:Object(zt.l)(Rt.a.getState().cfg.LATENCY_SAMPLING_RATE)}),null!==Rt.a.getState().cfg.TEST_BID_ENDPOINT&&(t=Object(zt.l)(Rt.a.getState().cfg.TEST_PATH_FREQUENCY),Rt.a.dispatch({type:"SHOULD_USE_TEST_BID_ENDPOINT",value:t}),t)&&null!==Rt.a.getState().cfg.TEST_PATH_LATENCY_SAMPLE_RATE&&Rt.a.dispatch({type:"SHOULD_SAMPLE_LATENCY",value:Object(zt.l)(Rt.a.getState().cfg.TEST_PATH_LATENCY_SAMPLE_RATE)}),Rt.a.dispatch({type:"SHOULD_SAMPLE_SLOT_RENDER",value:Object(zt.l)(Rt.a.getState().cfg.SLOT_RENDER_SAMPLING_RATE)}),Rt.a.getState());(e.experiments.shouldSampleLatency||e.displayAdServer.shouldSampleRender)&&j(),e.displayAdServer.shouldSampleRender&&dt(),e.experiments.shouldSampleLatency&&w(ae)}catch(t){Object(qt.b)(t,"apstag-sampleLatency")}try{q()}catch(t){Object(qt.b)(t,"apstag-doLast")}if(!Object(xt.k)(window,!0))try{var n=function(t){t&&"object"!==re(t)||(t="Request Timeout or Error"),Object(qt.b)({message:"csm-rtb-comm-js loading failed",name:t},"__csm-rtb-comm-js__")};Object(Ht.d)({url:Rt.a.getState().cfg.CSM_RTB_COMMUNICATOR_JS,onload:function t(e){e.readyState===XMLHttpRequest.DONE&&200===e.status?eval(e.responseText):n(JSON.stringify({status:e.statusText,response:e.responseXML}))},onerror:n,ontimeout:n})}catch(t){Object(qt.b)(t,"__load-csm-rtb-comm-js__")}Object(Ut.e)()}()}(),Object(Zt.a)("_system").safelyRecord("apstag/library/didLoad",{source:"bundle"}))}catch(t){Object(qt.b)(t,"apstag")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return O})),n.d(e,"d",(function(){return v}));var r=n(1),o=n(3),i=n(0),a=n(2),c=n(7);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){var r,o;r=t,o=n[e=e],(e=function(t){return t=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==s(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===s(t)?t:String(t)}(e))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},f="__tcfapi";function b(t,e,n){if(p=Object(c.a)(n).read("consent/TCData"))e({enabled:p.gdprApplies?1:0,consent:p.tcString,log:{status:"tcfv2-success"},gdprApplies:p.gdprApplies});else{Object(c.a)(n).safelyRecord("_legacy/getGdprConfig_legacy/willExecute");var a,u=!1,b={log:{status:"no-status"}},p=50,y="global-func-error";e=Object(r.d)(e,"GdprCallback");try{if(!1===(t=Object(i.j)(t)?l({},t):{}).enabled||0===t.enabled?(b.log.status="explicit-no-gdpr",b.enabled=0):!0===t.enabled||1===t.enabled?(b.log.status=Object(i.k)(t,"consent")?"explicit-consent-passed":"explicit-no-consent-passed",b.enabled=1,b.consent=t.consent):Object(i.k)(t,"enabled")&&(b.log.status=Object(i.k)(t,"consent")?"malformed-with-consent":"malformed-without-consent",b.consent=t.consent,d(t.enabled)?b.enabled=t.enabled:b.enabled=1),Object(i.k)(t,"enabled")&&(b.log.enabled=t.enabled),Object(i.k)(t,"cmpTimeout")&&d(t.cmpTimeout)&&(p=t.cmpTimeout,b.log.cmpTimeout=p),void 0!==b.enabled)return Object(o.c)("gdpr","pub-api"),Object(i.k)(b,"consent")&&"string"!=typeof b.consent&&(delete b.consent,Object(r.b)(new Error("Invalid consent: must be string, given ".concat(s(b.consent))),"getGdprConfig-pub-consent-invalid",{makeVisibleToAllUsers:!0})),void m()}catch(t){Object(r.b)(t,"getGdprConfig-parseConfig",{makeVisibleToAllUsers:!0})}try{Object(i.k)(window,f)&&"function"==typeof window[f]?(a="tcfv2",Object(o.c)("gdpr",a),setTimeout((function(){b.log.status="".concat(a,"-timeout"),m()}),p),y="".concat(a,"-internal-error"),window[f]("getTCData",2,(function(t,e){try{e&&Object(i.j)(t)?(b.log.status="".concat(a,"-success"),Object(i.k)(t,"tcString")?b.consent=t.tcString:Object(i.k)(t,"consentData")&&(b.consent=t.consentData),b.enabled=t.gdprApplies?1:0,0===b.enabled&&delete b.consent,b.gdprApplies=t.gdprApplies,m()):(b.log.status="".concat(a,"-error"),m())}catch(t){b.log.status="func-error",m(),Object(r.b)(t,"cmpCallback-".concat(a),{makeVisibleToAllUsers:!0})}}))):(Object(o.c)("gdpr","no-cmp"),b.log.status="no-cmp",m())}catch(t){b.log.status=y,m(),Object(r.b)(t,"getGdprConfig-".concat(y),{makeVisibleToAllUsers:!0})}}function m(){u||(u=!0,b.consent&&Object(r.b)(new Error("Legacy getTCData logic was successful when addEventListener logic wasn't"),"LEGACY-TCFAPI-SUCCESS",{makeVisibleToAllUsers:!1,accountId:n}),e(l(l({},b),{},{log:l({},b.log)})))}}function p(t){for(var e=[],n=-1;0<=(n=t.indexOf("1",n+1));)e.push(n+1);return e}function y(t){for(var e=[],n=parseInt(g(t,12),2),r=0;r<n;r++){var o=parseInt(g(t,1),2),i=parseInt(g(t,16),2);if(e.push(i),o)for(var a=parseInt(g(t,16),2),c=i+1;c<=a;c++)e.push(c)}return e}function m(t){var e=parseInt(g(t,16),2);return parseInt(g(t,1),2)?y(t):p(g(t,e))}function g(t,e){var n=t.bits.substr(t.index,e);return t.index+=e,n}function h(t){try{var e,n,o;return!!t&&(!((e=function(t){try{for(var e=(t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")).split(".")[0],n=window.atob(e),o="",i=0;i<n.length;i++)o+=("0000000"+n.charCodeAt(i).toString(2)).substr(-8);return o}catch(e){return Object(r.b)(new Error("TCF string conversion failed. (TCF string: ".concat(t,")")),"TCFToBinary",{makeVisibleToAllUsers:!0}),""}}(t)).length<230)&&(o={bits:e,index:0},(n={}).version=parseInt(g(o,6),2),2===n.version)&&(n.created=parseInt(g(o,36),2),n.lastUpdated=parseInt(g(o,36),2),n.cmpId=parseInt(g(o,12),2),n.cmpVersion=parseInt(g(o,12),2),n.consentScreen=parseInt(g(o,6),2),n.consentLanguage=String.fromCharCode(parseInt(g(o,6),2)+65)+String.fromCharCode(parseInt(g(o,6),2)+65),n.vendorListVersion=parseInt(g(o,12),2),n.tcfPolicyVersion=parseInt(g(o,6),2),n.isServiceSpecific="1"===g(o,1),n.useNonStandardStacks="1"===g(o,1),n.specialFeatureOptIns=p(g(o,12)),n.purposesConsent=p(g(o,24)),n.purposesLITransparency=p(g(o,24)),n.purposeOneTreatment="1"===g(o,1),n.publisherCC=String.fromCharCode(parseInt(g(o,6),2)+65)+String.fromCharCode(parseInt(g(o,6),2)+65),n.vendorConsents=m(o),n.vendorLegitimateInterests=m(o),n.publisherRestrictions=function(t){for(var e=parseInt(g(t,12),2),n=[],r=0;r<e;r++){var o=parseInt(g(t,6),2),i=parseInt(g(t,2),2);n.push({purposeId:o,restrictionType:i,vendorIds:y(t)})}return n}(o),n))}catch(t){return Object(r.b)(t,"parseTCFString",{makeVisibleToAllUsers:!0}),!1}}function O(t){var e=[];try{var n=Date.now(),r=(t||e.push("Invalid tcString: ".concat(t)),2!==t.version&&e.push("tcString version not supported: ".concat(t.version)),t.useNonStandardStacks&&e.push("tcString's useNonStandardStacks should not be true"),t.isServiceSpecific||e.push("tcString needs to be service specific"),t.publisherRestrictions?t.publisherRestrictions.filter((function(t){return 1===t.purposeId&&0<=t.vendorIds.indexOf(793)})):[]);if(0===r.length)j(t)||e.push("Invalid publisher restrictions");else switch(r[0].restrictionType){case 0:case 2:e.push("Invalid publisher restrictions");break;default:j(t)||e.push("Invalid publisher restrictions")}return a.a.dispatch({type:"RECORD_TCF_PARSE_TIME",time:Date.now()-n}),e}catch(t){if(e.length)return e;throw t}}function v(t,e){if(!t)return!!window.apstag&&!window.apstag.isGDPRRegion&&!0!==e;if(window.apstag&&!window.apstag.isGDPRRegion&&!1===e)return!0;if(2!==t.version)return!1;if(t.useNonStandardStacks)return!1;if(!t.isServiceSpecific)return!1;if(0===(e=t.publisherRestrictions.filter((function(t){return 1===t.purposeId&&0<=t.vendorIds.indexOf(793)}))).length)return j(t);switch(e[0].restrictionType){case 0:case 2:return!1;default:return j(t)}}function j(t){return!(!Object(i.k)(t,"vendorConsents")||!Object(i.k)(t,"purposesConsent"))&&0<=t.vendorConsents.indexOf(793)&&0<=t.purposesConsent.indexOf(1)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function i(t,e,n){(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function a(t){return t=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==r(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===r(t)?t:String(t)}n.d(e,"a",(function(){return c}));var c=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");i(this,"isSupported",!1),i(this,"needNewBidObject",!1)}var e,n;return e=t,(n=[{key:"cmdQueuePush",value:function(t){}},{key:"slotRenderEndedEvent",value:function(t){}},{key:"setTargeting",value:function(t,e){}},{key:"getTargeting",value:function(t){return[]}},{key:"clearTargeting",value:function(t,e){}},{key:"hasAdServerObjectLoaded",value:function(){return!1}},{key:"isCommandQueueDefined",value:function(){return!1}},{key:"getSlots",value:function(){return[]}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(0),o=n(1),i=n(5),a=n(3);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function u(t,e,n){(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function l(t){return t=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==c(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===c(t)?t:String(t)}var d=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");u(this,"_slotConfig",void 0),u(this,"rawSlot",void 0),this._slotConfig=e,this.rawSlot=e}var e,n;return e=t,(n=[{key:"slotID",get:function(){return this._slotConfig.slotID}},{key:"slotName",get:function(){return this._slotConfig.slotName}},{key:"slotParams",get:function(){return this._slotConfig.slotParams}},{key:"companions",get:function(){return this._slotConfig.companions}},{key:"slotConfig",get:function(){return{slotID:this.slotID,slotName:this.slotName,sizes:this.sizes}}},{key:"mediaType",get:function(){return i.a.DISPLAY}},{key:"sizes",get:function(){return[]}},{key:"floor",get:function(){var t;return Object(r.k)(this._slotConfig,"floor")&&"USD"===this._slotConfig.floor.currency&&this.validateFloorValue(this._slotConfig.floor.value)?(t=this._slotConfig.floor,Object(a.c)("customFloor","y")):Object(a.c)("customFloor","n"),t}},{key:"aaxSlotParams",get:function(){var t=this;try{return Object(r.k)(this,"slotParams")&&Object(r.j)(this.slotParams)?Object.keys(this.slotParams).filter((function(e){return t.validateSlotParamValue(t.slotParams[e])})).reduce((function(e,n){return e[n]=t.slotParams[n],e}),{}):void 0}catch(t){return this.reportError(t,"aaxSlotParams"),this.slotParams}}},{key:"aaxSlot",get:function(){Object(a.c)("slotType",this.mediaType);var t={kv:this.aaxSlotParams};return this.floor&&(t.fc=this.floor.currency,t.fp=this.floor.value),t}},{key:"isValid",value:function(){var t,e,n=[],o=[];return void 0===this.slotID?n.push("'slotID' must be provided and a string"):"string"!=typeof this.slotID&&o.push("'slotID' must be a string"),Object(r.k)(this._slotConfig,"floor")&&Object(r.j)(this._slotConfig.floor)&&(t=(e=this._slotConfig.floor).currency,e=e.value,"USD"!==t&&o.push("'floor' currency only supports USD"),this.validateFloorValue(e)||o.push("'floor' value must be a positive integer")),Object(r.k)(this,"companions")&&(Object(r.i)(this.companions)?this.companions.forEach((function(t){"string"!=typeof t&&n.push("'companions' contains a non-string item : ".concat(t))})):n.push("'companions' contains non-array")),0<n.length?(this.reportIsValidMessages([].concat(n,o),!0),!1):(0<o.length&&this.reportIsValidMessages(o,!1),!0)}},{key:"reportError",value:function(t,e,n){Object(o.b)(t,"Slot-".concat(e),n)}},{key:"setTargeting",value:function(t,e){}},{key:"getTargeting",value:function(t){return[]}},{key:"clearTargeting",value:function(t){}},{key:"reportIsValidMessages",value:function(t,e){this.reportError({name:"SlotValidationError",message:this.buildIsValidMessage(t,this._slotConfig)},"validation-".concat(e?"error":"warn"),{makeVisibleToAllUsers:!0})}},{key:"validateSlotParamValue",value:function(t){var e=this;try{return Object(r.i)(t)?0<t.length&&t.reduce((function(t,n){return t&&e.validateSlotParamValue(n)}),!0):"string"==typeof t&&0<t.length}catch(t){return Object(o.b)(t,"validateSlotParamValue"),!1}}},{key:"validateFloorValue",value:function(t){return"number"==typeof t&&0<t&&t%1==0}},{key:"buildIsValidMessage",value:function(t,e){return"There was an issue with the configuration for this slot: ".concat(JSON.stringify(e),"\n")+t.map((function(t){return"- ".concat(t)})).join("\n")}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),(n=r=r||{}).DISPLAY="d",n.VIDEO="v",n.MULTI_FORMAT="mf"},function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return S})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return T})),n.d(e,"b",(function(){return D}));var s=n(10),u=n(1),l=n(34),d=n(4),f=n(2),b=n(6),r=n(0),p=n(3),y=n(17),o=n(35),m=n(24),i=n(7);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){(e=O(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function O(t){return"symbol"===a(t=v(t,"string"))?t:String(t)}function v(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!==a(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function j(t){Object(i.a)(t).record("cxm/contextual/set").catch((function(){}))}function S(r,o,i,e){var a=f.a.getState().experiments.shouldSampleLatency,c=Date.now(),t=Object(l.a)(window.location,window.top.location,o);if(null!==t){var n={url:t,withCredentials:!0,onload:function t(e){if(200===e.status)try{f.a.dispatch({type:"RECORD_LIBRARY_LOAD_CALL_LATENCY",latency:Date.now()-c}),a&&setTimeout(p.d,1e3);var n=JSON.parse(e.response);eval(n["3pvendor"]),Object(y.a)(f.a.getState().config.gdpr,(function(t){var e;t&&(e=Object(y.c)(t.consent),Object(b.b)())&&Object(y.d)(e,t.gdprApplies)&&b.a.getDefault().localStorage.setItem(d.e,"1")}),r),Object(m.b)(n,o)}catch(t){Object(u.b)(t,"load3PLibraryConfig-onload"),Object(m.a)(t,"load3PLibraryConfig-onload",o)}null!=i&&i()},onerror:function(t){t=new Error("".concat(t.type,": ").concat(t.loaded," bytes transferred")),Object(u.b)(t,"load3PLibraryConfig-onerror"),Object(m.a)(t,"load3PLibraryConfig-onerror",o),null!=e&&e(t)}};try{Object(s.d)(n)}catch(t){Object(u.b)(t,"load3PLibraryConfig"),Object(m.a)(t,"load3PLibraryConfig",o),null!=e&&e(t)}a&&setTimeout(p.d,1e3)}}function w(){return Object(r.k)(window,"creativeVendorLibraryLoaded")&&!0===window.creativeVendorLibraryLoaded||Object(r.k)(window,"confiant")}function T(){var t={renderTimes:{}};window.addEventListener("message",(function(e){Object(o.a)(t,e)}))}function D(t){var e={ids:{}};try{if("1"!==b.a.getDefault().localStorage.getItem(d.e))return e;Object(i.a)(t).record("cxm/ids/get").catch((function(){})),e.ids=g({},Object(i.a)(t).read("cxm/ids"));var n=Object(i.a)(t).read("cxm/metadata");n&&(e.md=n)}catch(t){Object(u.b)(t,"getIdentityConfig")}return e}},function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return y})),n.d(e,"g",(function(){return O})),n.d(e,"a",(function(){return T})),n.d(e,"e",(function(){return D})),n.d(e,"f",(function(){return E}));var r=n(1),o=n(0),i=n(3),a=n(2),c=n(4),s=n(5);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){return t=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==u(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===u(t)?t:String(t)}var f=function(){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=this,o=t;if(!(r instanceof o))throw new TypeError("Cannot call a class as a function");r=this,o=void 0,(e=d(e="_rawProps"))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o,this._rawProps=n}var e,n;return e=t,(n=[{key:"source",get:function(){return"web"}},{key:"omsdkAccessMode",get:function(){return"limited"}},{key:"publisherType",get:function(){var t=a.a.getState().config;return t&&!0===t.isSelfServePub?s.b.SELF_SERVE_WEB:s.b.MANAGED_WEB}},{key:"publisherUUID",get:function(){var t=a.a.getState().config;if(t)return t.pubID}},{key:"integratorVersion",get:function(){return c.l}},{key:"bidId",get:function(){var t=this._rawProps.bidId;if("string"==typeof t)return t}},{key:"dealId",get:function(){var t=this._rawProps.dealId;if("string"==typeof t)return t}},{key:"hostName",get:function(){var t=this._rawProps.hostName;if("string"==typeof t)return t}},{key:"pricePoint",get:function(){var t=this._rawProps.pricePoint;if("string"==typeof t)return t}},{key:"targetingMap",get:function(){var t=this._rawProps.targetingMap;if("string"==typeof t)return t}},{key:"adServerType",get:function(){var t=a.a.getState().config;if(t)return t.adServer}},{key:"adServerAdUnitId",get:function(){var t=this._rawProps.adServerAdUnitId;if("string"==typeof t)return t}},{key:"apsAdUnitId",get:function(){var t=this._rawProps.apsAdUnitId;if("string"==typeof t)return t}},{key:"getProperties",value:function(){return JSON.stringify({source:this.source,omsdkAccessMode:this.omsdkAccessMode,publisherType:this.publisherType,publisherUUID:this.publisherUUID,integratorVersion:this.integratorVersion,bidId:this.bidId,hostName:this.hostName,dealId:this.dealId,pricePoint:this.pricePoint,targetingMap:this.targetingMap,adServerType:this.adServerType,adServerAdUnitId:this.adServerAdUnitId,apsAdUnitId:this.apsAdUnitId})}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t,e){try{if(Object(o.k)(e,"slotID")){var n=e.slotID,i=t.getElementById(n);if(i instanceof HTMLDivElement)return i}}catch(t){Object(r.b)(t,"getVideoDivElement-outstream")}}function p(t,e){try{Object(o.k)(t,"bidID")&&(e+="b=".concat(t.bidID)),Object(o.k)(t,"pp")&&void 0===t.dealId&&(e+="&pp=".concat(t.pp)),e+="&rnd=".concat(Object(o.d)())}catch(t){Object(r.b)(t,"constructVastTag")}return e}function y(t,e,n,o){try{var i={bidId:null==n?void 0:n.bidID,hostName:null==n?void 0:n.host,dealId:null==n?void 0:n.dealId,pricePoint:null==n?void 0:n.pp,apsAdUnitId:null==n?void 0:n.slotID},a={key:"$$videoPlayerProps$$",value:new f(i).getProperties()},c={key:"$$apstagVastTag$$",value:t},s={key:"$$apstagCompanionContainers$$",value:JSON.stringify(o||[])},u=e;return[a,c,s,{key:"$$apsvidonerror$$",value:"try { window.parent.apstag.re(new Error('video player load error'), 'vsdk-load-fail'); } catch(e) {}"}].forEach((function(t){var e=t.key;t=t.value;return u=u.replace(e,t)})),u}catch(t){return Object(r.b)(t,"constructVastTag"),""}}var m={},g=function(t){return m[t]||(m[t]={started:!1,completed:!1,loaded:!1,isPaused:!1}),m[t]},h={root:null,rootMargin:"0px",threshold:.5};function O(t,e,n){try{var o;window.addEventListener("message",(function(t){v(t,n)})),window.IntersectionObserver?(o=new window.IntersectionObserver((function(r){r.forEach((function(r){.5<r.intersectionRatio&&e.contentWindow&&(j(e,t,n),o.disconnect())}))}),h)).observe(t):Object(r.b)({name:"IntersectionObserver",message:"IntersectionObserver not supported "},"startVideoAndHandlePlayback")}catch(t){Object(r.b)(t,"startVideoAndHandlePlayback")}}function v(t,e){if(t.origin===window.top.location.origin&&!0===t.data.apsVideoPlayer)switch(t.data.event){case"completed":g(e).completed=!0;break;case"loaded":var n;g(e).loaded=!0,a.a.getState().outstream.shouldSample&&(n=Date.now()-a.a.getState().outstream.renderStart,Object(i.e)("loaded",e,n))}}function j(t,e,n){try{null!==t.contentDocument&&Object(o.h)(["complete","interactive"],t.contentDocument.readyState)?w(t,e,n):null!==t.contentDocument&&"uninitialized"!==t.contentDocument.readyState?t.contentDocument.addEventListener("DOMContentLoaded",(function(){w(t,e,n)})):t.addEventListener("load",(function(){w(t,e,n)})),setTimeout(w,1e3,!0)}catch(t){Object(r.b)(t,"loadVideoAd")}}function S(t,e,n){try{var o;window.IntersectionObserver&&(o=new window.IntersectionObserver((function(e){e.forEach((function(e){g(n).completed&&o.disconnect(),e.intersectionRatio<.5&&!g(n).isPaused?t.contentWindow&&t.contentWindow.adsM&&(t.contentWindow.adsM.pause(),g(n).isPaused=!0):g(n).isPaused&&t.contentWindow&&t.contentWindow.adsM&&(t.contentWindow.adsM.play(),g(n).isPaused=!1)}))}),{threshold:.5})).observe(e)}catch(e){Object(r.b)(e,"handleAutoPauseAndPlay")}}function w(t,e,n){t.contentWindow&&!g(n).started&&(g(n).started=!0,function(t,e,n){var r=Number(new Date)+(e||2e3);return n=n||100,new Promise((function e(o,i){var a=t();a?o(a):Number(new Date)<r?setTimeout(e,n,o,i):i(new Error("apsVideoPlayer timed out"))}))}((function(){return g(n).loaded}),3e4,100).then((function(){t.contentWindow&&t.contentWindow.adsM&&(t.contentWindow.adsM.play(),S(t,e,n))})).catch((function(){S(t,e,n),Object(r.b)({name:"VideoPlayerTimeout",message:"video player took more than 30 seconds to load"},"startAd")})))}function T(t,e){try{e&&e.appendChild(t)}catch(t){Object(r.b)(t,"_appendDivElement")}}function D(t,e){try{t.appendChild(e)}catch(t){Object(r.b)(t,"_insertVideoIframeInsideDiv")}}function E(t){var e=document.createElement("div");return e.style.width="".concat(t[0],"px"),e.style.height="".concat(t[1],"px"),e.style.margin="0 auto",e.id="apsVideoDiv-".concat(Object(o.d)()),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==o(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===o(t)?t:String(t)}var s="__tcfapi",u="isListenedTo",l="consentManagementPlatform",d=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"store",void 0),a(this,"globalContext",void 0),this.store=e.stateContainer,this.globalContext=e.globalContext}var e,n,o;return e=t,o=[{key:"readStoredConsentData",value:function(t){return null==(t=t.getState()[l])?void 0:t.tcData}}],(n=[{key:"isListenerActive",get:function(){return this.isListenedTo}},{key:"isListenedTo",get:function(){var t;return(null==(t=this.store.getState()[l])?void 0:t[u])||!1},set:function(t){this.store.dispatch(a({type:"RECORD_CMP_LISTENED_TO"},u,t))}},{key:"writeConsentDataToStore",value:function(t){this.store.dispatch(a({type:"RECORD_CMP_CONSENT_DATA"},"tcData",t))}},{key:"onConsentDataChange",value:function(t,e,n){try{e?(this.isListenedTo=!0,t&&this.writeConsentDataToStore(t),null!=n&&n(!0)):null!=n&&n(!1)}catch(t){Object(r.b)(t,"attemptConsentDataSync-onConsentDataChange")}}},{key:"syncConsentData",value:function(t){var e=this;this.globalContext[s]?this.globalContext[s]("addEventListener",2,(function(n,r){return e.onConsentDataChange(n,r,t)})):null!=t&&t(!1)}},{key:"syncConsentDataIfNotSynced",value:function(t){this.isListenedTo?null!=t&&t(!0):this.syncConsentData(t)}},{key:"attemptConsentDataSync",value:function(t){try{this.syncConsentDataIfNotSynced(t)}catch(e){Object(r.b)(e,"attemptConsentDataSync"),null!=t&&t(!1)}}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return g}));var r=n(10),o=n(1),i=n(2),a=n(4),c=n(8),s=n(0),u=n(7),l=n(3),d=n(6);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function p(t){var e=Object(c.c)("bsHost",i.a.getState().hosts.DEFAULT_BS_HOST);e={url:"".concat(a.s).concat("prod",".").concat("us-east-1",".").concat(e).concat("/v1/recordVendorsLoaded"),body:JSON.stringify(t),headers:{"Content-Type":"application/json"},onload:function(){}};try{Object(r.d)(e)}catch(t){Object(o.b)(t,"load3PLibraryConfig-VendorLoadedEvent-SendError")}}function y(t,e,n){if(Object(s.l)(a.x))try{var r=i.a.getState().config;p([{publisherId:("600"===(null==n?void 0:n.sourceID)?null==n?void 0:n.publisherUUID:null==n?void 0:n.sourceID)||r.pubID,sourceId:(null==n?void 0:n.sourceID)||(r.isSelfServePub?a.t:r.pubID),failure:e,errorName:t.name,errorMessage:t.message}])}catch(t){Object(o.b)(t,"load3PLibraryConfig-VendorLoadedEventError-ConstructError")}}function m(t,e){var n;if(n=t,Object(s.l)("number"==typeof n["3psamplerate"]?n["3psamplerate"]:a.x))try{var r=JSON.parse(t[a.y]),c=(c="600"===(null==e?void 0:e.sourceID)?null==e?void 0:e.publisherUUID:null==e?void 0:e.sourceID)||i.a.getState().config.pubID;p(r.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){var r,o;r=t,o=n[e=e],(e=function(t){return t=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==f(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===f(t)?t:String(t)}(e))in r?Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[e]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({publisherId:c},t)})))}catch(t){Object(o.b)(t,"load3PLibraryConfig-VendorLoadedEvent-ConstructError")}}function g(t){t=(null==(t=Object(u.a)(t))?void 0:t.read("config/loaded"))||(null==t||null==(t=t.queue)?void 0:t.some((function(t){return"_config/config/didLoad"===t.type})));var e="1"===d.a.getDefault().localStorage.getItem(a.e);t=t&&e?"all":t&&!e?"config":!t&&e?"cxm":"none";Object(l.c)("configOrder","".concat(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),o=n(1),i=n(3);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function s(t,e,n){(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function u(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var l=function(){function t(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=this,i=t;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");s(this,"validSizeStringRegex",/^[0-9]+x[0-9]+$/),s(this,"numberStringRegex",/^[0-9]+$/),s(this,"_sizes",void 0),s(this,"_permit1D",!0),s(this,"_allowUndefined",!1),this._sizes=e,this._permit1D=n,this._allowUndefined=r}var e,n;return e=t,(n=[{key:"isValid",value:function(){return!(void 0!==this._sizes||!this._allowUndefined)||0<this.sizes.length}},{key:"sizes",get:function(){var t=this;try{var e=[];if(Object(r.i)(this._sizes)){this._sizes=this._sizes.filter((function(t){return"fluid"!==t}));var n="2d",i=this._sizes;if(i&&0<i.length&&!Object(r.i)(i[0])&&("string"!=typeof i[0]||!this.validSizeStringRegex.test(i[0]))){if(!this._permit1D)throw new Error("Sizes must be 2d array");n="1d",i=[i]}e=i.filter((function(e){return t.isValidSize(n,e)})).map((function(t){return Object(r.i)(t)?t:t.split("x").map((function(t){return parseInt(t,10)}))}))}return e}catch(e){return Object(o.b)(e,"SizesDelegate-getSizes"),[]}}},{key:"aaxSizes",get:function(){if(void 0!==this._sizes||!this._allowUndefined)return this.sizes.filter(r.i).map((function(t){return t.join("x")}))}},{key:"isValidSize",value:function(t,e){var n=this,a=[];function c(t){t=JSON.stringify(t),-1===a.indexOf(t)&&(a.push(t),Object(o.b)({name:"SizesDelegate-isValidSize-invalid",message:"Invalid Slot Size: ".concat(JSON.stringify(e))},"SizesDelegate-isValidSize-invalid"))}try{return"string"==typeof e&&this.validSizeStringRegex.test(e)?(Object(i.c)("AaxSlotSizes","".concat(t,"-compiled")),!0):Object(r.i)(e)&&1!==e.length?(2<e.length&&c(e),e.slice(0,2).reduce((function(e,r){return e&&("number"==typeof r||"string"==typeof r)&&!("string"==typeof r&&!n.numberStringRegex.test(r)||("string"==typeof r?Object(i.c)("AaxSlotSizes","".concat(t,"-string")):Object(i.c)("AaxSlotSizes","".concat(t,"-number")),0))}),!0)):(c(e),!1)}catch(c){return Object(o.b)(c,"isValidSize"),!0}}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));e=n(19);var r=n(0),o=n(1),i=n(5);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);n=e?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return b(r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function m(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var g=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t);var n=f(a);function a(t){var e;if(this instanceof a)return y(b(e=n.call(this,{slotID:t.getSlotElementId(),slotName:t.getAdUnitPath()})),"rawSlot",void 0),e.rawSlot=t,e;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"mediaType",get:function(){return i.a.DISPLAY}},{key:"sizes",get:function(){try{var t=Object(r.g)(window).split("x").map((function(t){return Number(t)})),e=this.rawSlot.getSizes(t[0],t[1]);return null===e?[]:e.filter((function(t){return"fluid"!==t})).map((function(t){return[t.getWidth(),t.getHeight()]}))}catch(t){return this.reportError(t,"sizes"),[]}}},{key:"aaxSlot",get:function(){var t=s(s({},l(p(a.prototype),"aaxSlot",this)),{},{sd:this.slotID,s:this.sizes.filter(r.i).map((function(t){return t.join("x")}))});return this.slotID!==this.slotName&&(t.sn=this.slotName),t}},{key:"isValid",value:function(){return!(!l(p(a.prototype),"isValid",this).call(this)||0===this.sizes.length&&(this.reportIsValidMessages(["'sizes' must have at least 1 valid item"],!0),1))}},{key:"reportError",value:function(t,e,n){Object(o.b)(t,"GptSlot-".concat(e),n)}},{key:"setTargeting",value:function(t,e){try{this.rawSlot.setTargeting(t,e)}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{return this.rawSlot.getTargeting(t)}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{this.rawSlot.clearTargeting(t)}catch(t){this.reportError(t,"clearTargeting")}}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),a}(e.a)},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(1),o=n(0);function i(t){try{return!(!Object(o.k)(t,"$sf")||!Object(o.k)(t.$sf,"ext"))}catch(t){return Object(r.b)(t,"isSafeFrame"),!1}}function a(t,e){try{var n,o,i,a=e.innerWidth,c=e.innerHeight,s=parseInt(t[0],10),u=parseInt(t[1],10),l=s-a,d=u-c,f=e.sfAPI||(null==(n=e.$sf)?void 0:n.ext);!f||a===s&&c===u||(null!=(o=f.register)&&o.call(f,s,u),null!=(i=f.expand)&&i.call(f,{r:l,b:d,push:!0}))}catch(t){Object(r.b)(t,"expandSf")}}function c(t){try{return 1===t.innerWidth&&1===t.innerHeight}catch(t){return Object(r.b)(t,"is1x1Creative"),!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return S}));var r=n(1),o=n(10),i=n(0),a=n(7),c=n(4),s=n(9),u=n(8),l=n(2);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o=(m="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",i=m.asyncIterator||"@@asyncIterator",a=m.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(e){c=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var i,a,c,s;e=e&&e.prototype instanceof b?e:b,e=Object.create(e.prototype),o=new w(o||[]);return r(e,"_invoke",{value:(i=t,a=n,c=o,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return{value:void 0,done:!0}}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n&&(n=function t(e,n){var r=n.method,o=e.iterator[r];return void 0===o?(n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l):"throw"===(r=u(o,e.iterator,n.arg)).type?(n.method="throw",n.arg=r.arg,n.delegate=null,l):(o=r.arg)?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}(n,c))){if(n===l)continue;return n}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===s)throw s="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);if(s="executing","normal"===(n=u(i,a,c)).type){if(s=c.done?"completed":"suspendedYield",n.arg===l)continue;return{value:n.arg,done:c.done}}"throw"===n.type&&(s="completed",c.method="throw",c.arg=n.arg)}})}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function b(){}function p(){}function y(){}var m,g,h=((g=(g=(c(m={},o,(function(){return this})),Object.getPrototypeOf))&&g(g(T([]))))&&g!==e&&n.call(g,o)&&(m=g),y.prototype=b.prototype=Object.create(m));function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){var o;r(this,"_invoke",{value:function(r,i){function a(){return new e((function(o,a){!function r(o,i,a,c){var s;if("throw"!==(o=u(t[o],t,i)).type)return(i=(s=o.arg).value)&&"object"==d(i)&&n.call(i,"__await")?e.resolve(i.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(i).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}));c(o.arg)}(r,i,o,a)}))}return o=o?o.then(a,a):a()}})}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(t){if(t){var e,r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(r=function r(){for(;++e<t.length;)if(n.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r}).next=r}return{next:D}}function D(){return{value:void 0,done:!0}}return r(h,"constructor",{value:p.prototype=y,configurable:!0}),r(y,"constructor",{value:p,configurable:!0}),p.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},O(v.prototype),c(v.prototype,i,(function(){return this})),t.AsyncIterator=v,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new v(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(h),c(h,a,"Generator"),c(h,o,(function(){return this})),c(h,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},t.values=T,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,S(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function b(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function p(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function h(t,e,n){e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1})}function O(t,e,n){(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function v(t){return t=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==d(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===d(t)?t:String(t)}function j(t){try{var e=function(t){try{var e=Object(a.a)(t).read("ad/context");return Object(i.j)(e)?{ortb2:e}:{}}catch(t){return Object(r.b)(t,"getSignals"),{}}}(t);return 0===Object.keys(e).length?"":Object(o.c)(e)}catch(t){return Object(r.b)(t,"getSignalsParams"),""}}function S(){k.get().log(D,"init");var t=window.apscustom||[];if(window.apscustom={push:_,loaded:!0},Array.isArray(t))for(;t.length;)_(t.shift())}var w=Object(u.c)("ASR_ENDPOINT_HOST","c.aps.amazon-adsystem.com"),T=Object(u.c)("ASR_ENDPOINT_IS","86355855cc6ed9e335d0382c8563aa10"),D=(e=function(){function t(){m(this,t),O(this,"ignoreKeys",["apsCustomSlotname","apsCustomProgram"]),O(this,"programKey","apscustom"),O(this,"dataParamPrefix","apsCustom")}return h(t,[{key:"init",value:function(t){var e,n,r,o=this;t&&t.id&&(n=document.getElementById(t.id))&&(t._element=n,e=Object.assign({},n.dataset),n.setAttribute("data-aps-custom-status","read"),n={program:e.apsCustomProgram||this.programKey,is:T},Object.keys(e).filter((function(t){return t.indexOf(o.dataParamPrefix)<=-1||o.ignoreKeys.includes(t)})).forEach((function(t){return delete e[t]})),r={slotID:t.id,slotName:e.apsCustomSlotname||t.id,sizes:[[999,999]]},this.fetchBidsAndRender(r,t,y(y({},n),e)))}},{key:"fetchBidsAndRender",value:function(t,e,n){var r=this;(t=(k.get().log(D,"fetchBids/start"),{slots:[t],params:n})).timeout=null!=(n=e.timeout)?n:6e4,t._endpointDomain=w,window.apstag.fetchBids(t,(function(t){k.get().log(D,"fetchBids/end"),r.renderBids(t,e)}))}},{key:"renderBids",value:function(t,e){t.forEach((function(t){new I(e,t).render()}))}}]),t}(),"customPlacements"),E=new e;function _(t){k.get().log(D,"implementation/legacyPush",.01),t=Object.assign({},t),E.init(t)}var I=function(){function t(e,n){var r=this;m(this,t),O(this,"slotProps",void 0),O(this,"rawResponse",void 0),O(this,"getPageStyles",(function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:["p","h1","h2"]).map(r.getTagStyle).filter((function(t){return 0<Object.keys(t).length})).reduce((function(t,e){return y(y({},t),e)}),{})})),O(this,"getContainerStyles",(function(t){try{var e,n,r;return t?(e=window.getComputedStyle(t),n="--aps-custom-container-",(r=new Map).set("".concat(n,"width"),e.width),r.set("".concat(n,"margin"),e.margin),r.set("".concat(n,"padding"),e.padding),Object.fromEntries(r.entries())):{}}catch(t){return{}}})),this.slotProps=e,this.rawResponse=n}return h(t,[{key:"getTagStyle",value:function(t){var e,n,r=document.getElementsByTagName(t);return r&&r[0]?(r=window.getComputedStyle(document.getElementsByTagName(t)[0]),(e=new Map).set("".concat(n="--aps-custom-page-").concat(t,"-color"),r.color),e.set("".concat(n).concat(t,"-fontFamily"),r.fontFamily),e.set("".concat(n).concat(t,"-fontSize"),r.fontSize),e.set("".concat(n).concat(t,"-fontWeight"),r.fontWeight),e.set("".concat(n).concat(t,"-lineHeight"),r.lineHeight),Object.fromEntries(e)):{}}},{key:"getDynamicFrameBodyHeight",value:function(t,e,n){if(e){k.get().log(D,"render/".concat(n,"/").concat(this.slotProps.id,"/loaded"));var r=(null==e?void 0:e.contentDocument)||(null==e||null==(o=e.contentWindow)?void 0:o.document),o=null==r?void 0:r.body.scrollHeight;e.style.height="".concat(o,"px");try{var i=y(y({},this.getPageStyles()),this.getContainerStyles(t));Object.keys(i).forEach((function(t){null!=r&&r.documentElement.style.setProperty(t,i[t])})),k.get().trackEvent(D,"renderComplete",{asrEndpoint:w,height:o,source:n})}catch(t){}}}},{key:"render",value:function(){return this._renderInIframe()}},{key:"_renderInIframe",value:function(){var t=this;if(!this.rawResponse||!this.slotProps)return!1;try{var e,n,o=this.rawResponse.size.split("x"),i=(null==(e=this.rawResponse.targeting)?void 0:e.amzniid)||this.rawResponse.amzniid,a=(null==(n=this.rawResponse.targeting)?void 0:n.amznadm)||this.rawResponse.amznadm;if(!i)return!1;k.get().log(D,"render/".concat(this.slotProps.id,"/start"));var c,s,u,l,d=this.slotProps._element;return this.slotProps.location&&this.slotProps.id&&(s=document.createElement("div"),null!=(c=document.getElementById(this.slotProps.id))&&c.insertAdjacentElement(this.slotProps.location,s),d=s),!!d&&((u=document.createElement("iframe")).style.marginLeft="0",u.style.marginTop="0",u.style.height="".concat(o[1],"px"),u.style.width="100%",u.setAttribute("scrolling","no"),u.setAttribute("frameborder","0"),u.onload=function(){return t.getDynamicFrameBodyHeight(d,u,a?"amznadm":"admi")},l='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="UTF-8">\n          <style>html{height:100%}body{height:100%;margin:0;overflow:hidden}</style>\n        </head>\n        <body>\n          <script>\n            window.parent.apstag.renderImp(document, "'.concat(i,'", {"inheritSize": true});\n          <\/script>\n        </body>\n      </html>'),u.srcdoc=a||l,d.appendChild(u),this.updateSlotAttribute("status","rendered"),!0)}catch(t){return Object(r.b)(new Error("Error while rendering"),"CustomPlacements"),!1}}},{key:"updateSlotAttribute",value:function(t,e){var n;null!=(n=this.slotProps._element)&&n.setAttribute("data-aps-custom-".concat(t),e)}}]),t}(),k=function(){function t(){var e=this,n=(m(this,t),O(this,"TAHOE_PROD","04a6c6a40ec6c493437745b4ff085efb826e05c276ad857733462915bc4c35e0"),O(this,"TAHOE_PROD_URL","https://prod.tahoe-analytics.publishers.advertising.a2z.com/logevent/postEquinoxEvent"),O(this,"level",Object(u.c)("APS_ANALYTICS_LEVEL","TAHOE")),O(this,"config",void 0),O(this,"timings",void 0),O(this,"log",void 0),O(this,"setLevel",(function(t){e.level=t})),O(this,"trackEvent",function(){n=f().mark((function n(r,o){var i,a,u=arguments;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=2<u.length&&void 0!==u[2]?u[2]:{},a=3<u.length&&void 0!==u[3]?u[3]:t.getDefaultSamplingRate(),n.abrupt("return",new Promise((function(t){try{var n,u;Math.random()>a?t(!1):(n=y({url:decodeURIComponent(Object(s.g)(window)),libraryVersion:c.l,timings:e.timings},e.getBrowserInfo()),u=JSON.stringify({eventSource:"apstag",eventCategory:r,eventName:o,eventTime:String(Date.now()),eventProperties:y(y(y({},e.config),n),i)}),"DEBUG"===e.level&&console.info("<analytics> ",JSON.parse(u)),"TAHOE"===e.level&&fetch(e.TAHOE_PROD_URL,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e.TAHOE_PROD},body:JSON.stringify({Data:window.btoa(u),PartitionKey:String(Date.now())})}),t(!0))}catch(n){t(!1)}})));case 3:case"end":return n.stop()}}),n)}));var n,r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){b(i,r,o,a,c,"next",t)}function c(t){b(i,r,o,a,c,"throw",t)}a(void 0)}))};return function(t,e){return r.apply(this,arguments)}}()),l.a.getState());this.config=n.config,this.timings=[],this.log=function(t,n,r){try{e.timings.push({time:performance.now(),key:"".concat(t,"/").concat(n)}),r&&e.trackEvent(t,n,{},r)}catch(t){}}}return h(t,[{key:"getBrowserInfo",value:function(){try{var t,e=navigator.connection;return{connection:{effectiveType:null==e?void 0:e.effectiveType,rtt:null==e?void 0:e.rtt,downlink:null==e?void 0:e.downlink},screen:Object(i.g)(window),userAgent:null==(t=navigator)?void 0:t.userAgent}}catch(t){return{}}}}],[{key:"get",value:function(){return null===this._analytics&&(this._analytics=new t),this._analytics}}]),t}();O(k,"_analytics",null),O(k,"getDefaultSamplingRate",(function(){var t=Object(u.c)("APS_ANALYTICS_RATE",.1);try{return Number(t)}catch(t){return.1}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(0),o=(e=n(18),n(1)),i=n(26);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);n=e?(n=d(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return l(r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var b=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n=u(a);function a(){var t=this,e=a;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var r,o,i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return e=l(t=n.call.apply(n,[this].concat(c))),o=!0,(r=f(r="isSupported"))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,t}return e=a,(t=[{key:"reportError",value:function(t,e){Object(o.b)(t,"GoogletagAdServer-".concat(e))}},{key:"cmdQueuePush",value:function(t){try{window.googletag.cmd.push(t)}catch(t){this.reportError(t,"cmdQueuePush")}}},{key:"slotRenderEndedEvent",value:function(t){try{window.googletag.pubads().addEventListener("slotRenderEnded",(function(e){e=new i.a(e.slot),t(e)}))}catch(t){this.reportError(t,"slotRenderEndedEvent")}}},{key:"setTargeting",value:function(t,e){try{window.googletag.pubads().setTargeting(t,e)}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{return window.googletag.pubads().getTargeting(t)||[]}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{window.googletag.pubads().clearTargeting(t)}catch(t){this.reportError(t,"clearTargeting")}}},{key:"hasAdServerObjectLoaded",value:function(){try{return Object(r.k)(window,"googletag")&&Object(r.k)(window.googletag,"apiReady")&&!0===window.googletag.apiReady}catch(t){return this.reportError(t,"hasAdServerObjectLoaded"),!1}}},{key:"isCommandQueueDefined",value:function(){try{return Object(r.k)(window,"googletag")&&Object(r.k)(window.googletag,"cmd")}catch(t){return this.reportError(t,"isCommandQueueDefined"),!1}}},{key:"getSlots",value:function(){try{return window.googletag.pubads().getSlots().map((function(t){return new i.a(t)}))}catch(t){return this.reportError(t,"getSlots"),[]}}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),a}(e.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var r=n(18),o=n(0),i=n(1),a=(e=n(19),n(5));function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);n=e?(n=y(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===c(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return p(r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,n){(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function g(t){return t=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==c(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===c(t)?t:String(t)}var h=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t);var n=b(r);function r(t){var e;if(this instanceof r)return e={slotID:t.targetId,slotName:Object(o.k)(t,"invCode")?t.invCode:Object(o.k)(t,"tagId")?t.tagId:t.targetId},m(p(e=n.call(this,e)),"rawSlot",void 0),e.rawSlot=t,e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"mediaType",get:function(){return a.a.DISPLAY}},{key:"sizes",get:function(){try{return this.rawSlot.sizes}catch(t){return this.reportError(t,"sizes"),[]}}},{key:"aaxSlot",get:function(){try{var t=u(u({},d(y(r.prototype),"aaxSlot",this)),{},{sd:this.slotID,s:this.sizes.filter(o.i).map((function(t){return t.join("x")}))});return this.slotID!==this.slotName&&(t.sn=this.slotName),t}catch(t){return{sd:"",s:[],kv:{}}}}},{key:"reportError",value:function(t,e,n){Object(i.b)(t,"ApnSlot-".concat(e),n)}},{key:"isValid",value:function(){return!(!d(y(r.prototype),"isValid",this).call(this)||0===this.sizes.length&&(this.reportIsValidMessages(["'sizes' must have at least 1 valid item"],!0),1))}},{key:"initKeywords",value:function(){try{Object(o.k)(this.rawSlot,"keywords")||(this.rawSlot.keywords={})}catch(t){this.reportError(t,"initKeywords")}}},{key:"setTargeting",value:function(t,e){try{this.initKeywords(),this.rawSlot.keywords[t]=e}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{return this.initKeywords(),Object(o.k)(this.rawSlot.keywords,t)?[this.rawSlot.keywords[t]]:[]}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{this.initKeywords(),delete this.rawSlot.keywords[t]}catch(t){this.reportError(t,"clearTargeting")}}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(e.a);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t){return t=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==O(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===O(t)?t:String(t)}var D=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w(t);n=e?(n=w(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===O(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return S(r)}}(r);function r(){var t=this,e=r;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var o,i,a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return e=S(t=n.call.apply(n,[this].concat(c))),i=!0,(o=T(o="isSupported"))in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i,t}return e=r,(t=[{key:"reportError",value:function(t,e){Object(i.b)(t,"AppNexusAdServer-".concat(e))}},{key:"cmdQueuePush",value:function(t){try{window.apntag.anq.push(t)}catch(t){this.reportError(t,"cmdQueuePush")}}},{key:"setTargeting",value:function(t,e){try{Object(o.k)(window,"apntag")&&Object(o.k)(window.apntag,"requests")&&(Object(o.k)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={}),window.apntag.requests.keywords[t]=e)}catch(t){this.reportError(t,"setTargeting")}}},{key:"getTargeting",value:function(t){try{if(!Object(o.k)(window,"apntag")||!Object(o.k)(window.apntag,"requests"))return[];Object(o.k)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={});var e=window.apntag.requests.keywords[t];return void 0===e?[]:[e]}catch(t){return this.reportError(t,"getTargeting"),[]}}},{key:"clearTargeting",value:function(t){try{Object(o.k)(window,"apntag")&&Object(o.k)(window.apntag,"requests")&&Object(o.k)(window.apntag.requests,"keywords")&&delete window.apntag.requests.keywords[t]}catch(t){this.reportError(t,"clearTargeting")}}},{key:"hasAdServerObjectLoaded",value:function(){try{return Object(o.k)(window,"apntag")&&Object(o.k)(window.apntag,"loaded")&&!0===window.apntag.loaded}catch(t){return this.reportError(t,"hasAdServerObjectLoaded"),!1}}},{key:"isCommandQueueDefined",value:function(){try{return Object(o.k)(window,"apntag")&&Object(o.k)(window.apntag,"anq")}catch(t){return this.reportError(t,"isCommandQueueDefined"),!1}}},{key:"getSlots",value:function(){try{var t=[];return Object(o.k)(window,"apntag")&&Object(o.k)(window.apntag,"requests")&&Object(o.k)(window.apntag.requests,"tags")&&Object(o.j)(window.apntag.requests.tags)&&Object.keys(window.apntag.requests.tags).forEach((function(e){e=window.apntag.requests.tags[e],t.push(new h(e))})),t}catch(t){return this.reportError(t,"getSlots"),[]}}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(r.a),E=n(29);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e,n){(e=C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function C(t){return t=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==_(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===_(t)?t:String(t)}var z=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);n=e?(n=R(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return P(r)}}(r);function r(){var t=this,e=r;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return A(P(t=n.call.apply(n,[this].concat(i))),"isSupported",!0),A(P(t),"needNewBidObject",!0),t}return e=r,(t=[{key:"reportError",value:function(t,e){Object(i.b)(t,"SmartAdServer-".concat(e))}},{key:"cmdQueuePush",value:function(t){try{window.sas.cmd.push(t)}catch(t){this.reportError(t,"cmdQueuePush")}}},{key:"hasAdServerObjectLoaded",value:function(){try{return Object(o.k)(window,"sas")&&Object(o.k)(window.sas,"__smartLoaded")&&!0===window.sas.__smartLoaded}catch(t){return this.reportError(t,"hasAdServerObjectLoaded"),!1}}},{key:"isCommandQueueDefined",value:function(){try{return Object(o.k)(window,"sas")&&Object(o.k)(window.sas,"cmd")}catch(t){return this.reportError(t,"isCommandQueueDefined"),!1}}}])&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(r.a),x=n(3);function L(t){var e=new r.a;try{switch(t){case"appnexus":Object(x.c)("adServer",t),e=new D;break;case"googletag":Object(x.c)("adServer",t),e=new E.a;break;case"sas":Object(x.c)("adServer",t),e=new z;break;default:"string"==typeof t?Object(x.c)("adServer","invalid-".concat(t)):Object(x.c)("adServer","none")}}catch(t){Object(i.b)(t,"getDisplayAdServer")}return e}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n(4),o=n(0),i=n(1);function a(t){try{return Object(o.k)(t,"debug")}catch(t){return Object(i.b)(t,"isApstagLibrary"),!1}}function c(t){try{return!!Object(o.k)(t,r.a)&&!0===t[r.a]}catch(t){return Object(i.b)(t,"hasApstagJsLoaded"),!1}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));e=n(19);var r=n(25);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);n=e?(n=f(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===o(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return d(r)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){(e=p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function p(t){return t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==o(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===o(t)?t:String(t)}var y=function(t){var e=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var n=l(o);function o(t){if(this instanceof o)return b(d(t=n.call(this,t)),"_sizesDelegate",void 0),t._sizesDelegate=new r.a(t.rawSlot.sizes),t;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"sizes",get:function(){return this._sizesDelegate.sizes}},{key:"aaxSizes",get:function(){return this._sizesDelegate.aaxSizes||[]}},{key:"aaxSlot",get:function(){var t={sd:this.slotID,s:this.aaxSizes};return this.slotID!==this.slotName&&(t.sn=this.slotName),a(a({},t),s(f(o.prototype),"aaxSlot",this))}},{key:"isValid",value:function(){return!(!s(f(o.prototype),"isValid",this).call(this)||0===this.sizes.length&&(this.reportIsValidMessages(["'sizes' must have at least 1 valid item"],!0),1))}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),o}(e.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));var r=n(2),o=n(1),i=n(0),a=n(10);function c(t){try{var e=r.a.getState().cfg.COOKIE_MATCH_DELAY;setTimeout((function(){try{if(Object(i.k)(t,"cmp")){var e=t.cmp;function n(t){try{var e;r.a.getState().cmpFired||(r.a.dispatch({type:"CMP_FIRED"}),(e=document.createElement("iframe")).style.display="none",e.src=t,document.body.appendChild(e))}catch(t){Object(o.b)(t,"_doCookieMatch-ready")}}try{"loading"===document.readyState?document.addEventListener&&document.addEventListener("DOMContentLoaded",(function(){n(e)}),!1):n(e)}catch(e){Object(o.b)(e,"_doCookieMatch")}}else Object(i.k)(t,"cmpjs")&&Object(a.b)(t.cmpjs)}catch(e){Object(o.b)(e,"_tryCookieMatch-setTimeout")}}),e)}catch(e){Object(o.b)(e,"_tryCookieMatch")}}function s(t,e){var n=e;return function(){var e={method:t,args:arguments};try{e.ts=Date.now(),r.a.dispatch({type:"LOG_EVENT",event:e})}catch(e){Object(o.b)(e,"_logEvent")}return n.apply(void 0,arguments)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2),o=n(1),i=n(8),a=n(4);function c(t,e,n){try{var c,s=r.a.getState(),u=s.config,l=Object(i.c)("host",s.hosts.DEFAULT_CXM_HOST),d=s.cfg.LIB_CONFIG_PATH;try{if(0<=["http:","https:"].indexOf(t.protocol))c=t.protocol+"//"+t.hostname;else{if(!(0<=["http:","https:"].indexOf(e.protocol)))return null;c=e.protocol+"//"+e.hostname}}catch(t){if(t instanceof window.DOMException)return null;throw t}var f,b=(b=null==n?void 0:n.sourceID)||(u.isSelfServePub?a.t:u.pubID),p=null==n?void 0:n.publisherUUID,y=(p||u.isSelfServePub&&(p=u.pubID),{src:b,u:encodeURIComponent(c)});return p&&(y.pubid=p),!y.src||isNaN(Number(y.src))?null:(f=Object.keys(y).map((function(t){return"".concat(t.trim(),"=").concat(String(y[t]).trim())})).join("&"),"".concat(a.w).concat(l).concat(d,"?").concat(f))}catch(t){return Object(o.b)(t,"buildLibraryConfigUrl"),null}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(0),o=n(9),i=n(11),a=n(3);function c(t,e){var n,c,s,u,l,d;Object(r.j)(e.data)?(Object(r.k)(e.data,"bidInfo")&&(Object(r.k)(e.data.bidInfo,"src")?(n=e.data.bidInfo.src,n=new URL(n).searchParams.get("b")):Object(r.k)(e.data.bidInfo,"jsonp")&&(l=e.data.bidInfo.jsonp,n=JSON.parse(l.substr(17,l.length-20)).amzniid)),Object(r.k)(e.data,"renderData")&&(c=(l=e.data.renderData).id,Object(r.k)(l,"renderStart")||Object(r.k)(l,"renderEnd"))&&(d=l.renderStart,l=l.renderEnd,d?(t.renderTimes[c]={timeStamp:d},n&&(t.renderTimes[c].bidId=n)):l&&Object(r.k)(t.renderTimes,c)&&0!==t.renderTimes[c].timeStamp&&(d=l-t.renderTimes[c].timeStamp,l={_type:"iframeRender",c:"dtb",pid:i.b,crt:d},(n=t.renderTimes[c].bidId?t.renderTimes[c].bidId:n)?Object(a.a)(n,l):Object(a.b)(l))),Object(r.k)(e.data,"blockData")&&(d=e.data.blockData.blockInfo,t={_type:"malwareBlock",c:"dtb",tpbr:1,pid:i.b,info:d},n?Object(a.a)(n,t):Object(a.b)(t)),Object(r.k)(e.data,"creativeFormatPixel")&&(l=(c=(c=e).data.creativeFormatPixel).vendorId,d=void 0===(d=c.pixelData)?{}:d,l)&&("creativeFormatBidPixel"===c.type&&(u={_type:"creativeFormatBidPixel",cfbp:1,c:"dtb",vendorId:l},(s=void 0===(s=d.bi)?"":s)&&(u.bi=s),Object(a.b)(u)),"creativeFormatImpressionPixel"===c.type)&&(s=d.bi,c=void 0===(u=d.ii)?"":u,u={_type:"creativeFormatImpressionPixel",cfip:1,c:"dtb",vendorId:l,bp:void 0===(u=d.bp)?0:u,bpc:void 0===(l=d.bpc)?"USD":l},(d=void 0===s?"":s)&&(u.bi=d),c&&(u.ii=c),Object(a.b)(u))):e.data&&"adBlocked"===e.data&&(n={_type:"adBlockedPixel",c:"dtb",pid:i.b,abc:1,u:Object(o.g)(window)},Object(a.b)(n))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));e=n(19);var r=n(25),o=n(5),i=n(20);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);n=e?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return b(r)}}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function m(t){return t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==a(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===a(t)?t:String(t)}var g=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t);var n=f(a);function a(t){if(this instanceof a)return y(b(t=n.call(this,t)),"_sizesDelegate",void 0),t._sizesDelegate=new r.a(t.rawSlot.sizes),t;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"mediaType",get:function(){return o.a.VIDEO}},{key:"aaxMediaType",get:function(){return i.a.VIDEO}},{key:"sizes",get:function(){return this._sizesDelegate.sizes}},{key:"aaxSizes",get:function(){return this._sizesDelegate.aaxSizes||[]}},{key:"aaxSlot",get:function(){var t=s(s({},l(p(a.prototype),"aaxSlot",this)),{},{id:this.slotID,mt:this.aaxMediaType});return 0<this.sizes.length&&(t.s=this.aaxSizes),t}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),a}(e.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),(e=r=r||{}).LOCAL_STORAGE="LOCAL",e.CSS_SELECTOR="CSS",e.URL="URL",(o=o||{}).EMAIL="email";var r,o,i=n(1),a=n(15),c=n(6);function s(t,e){var n,r,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){r=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(t)||(a=function(t,e){var n;if(t)return"string"==typeof t?u(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t){return t.then((function(t){return Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")})).then((function(t){return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"!==t?t:""}))}function d(t,e){return t instanceof window.HTMLInputElement||t instanceof window.HTMLTextAreaElement?f(t.value,e)?l(window.crypto.subtle.digest("SHA-256",(new window.TextEncoder).encode(t.value||""))):Promise.resolve(""):f(t.innerText,e)?l(window.crypto.subtle.digest("SHA-256",(new window.TextEncoder).encode(t.innerText||""))):Promise.resolve("")}var f=function(t,e){return"string"==typeof t&&(e===o.EMAIL?/\S+@\S+\.\S+/.test(t)||Object(a.c)(t):0<t.trim().length)},b=function(t,e,n){if(0===(n=n||window.document.querySelectorAll(t)).length)return new Promise((function(t){return t("")}));if(1===n.length)return d(n[0],e);var r,o=[],i=s(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;o.push(d(a,e))}}catch(t){i.e(t)}finally{i.f()}return Promise.all(o).then((function(t){var e,n=null,r=s(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(""!==o){if(null!==n&&("string"!=typeof n||n!==o))return"";n=o}}}catch(t){r.e(t)}finally{r.f()}return n||""}))},p=n(23),y=n(2);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n,r,o,i,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){r=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(t)||(a=function(t,e){var n;if(t)return"string"==typeof t?h(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return a&&(t=a),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e,n){(e=function(t){return t=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==m(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===m(t)?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}var v={called:!1};function j(t){if(Promise&&TextEncoder&&window.crypto&&window.crypto.subtle)try{var e;v.called&&!t.overrideLimit?Object(i.b)(new Error("rr should only be called once per page load"),"retrieveRecords-callLimit"):(v.called=!0,e=0,function n(){!(window.apstag.isGDPRRegion&&!new p.a({stateContainer:y.a,globalContext:window}).isListenerActive||(c.a.getDefault().allowedToStoreAndAccessInformationOnDevice()?function(){var t,e,n,o,s,u,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length?arguments[1]:void 0,p=(t=l.methods||[],O(e={},r.LOCAL_STORAGE,5),O(e,r.URL,4),O(e,r.CSS_SELECTOR,3),n=e,o={},t.forEach((function(t){o[t.method]=(o[t.method]||0)+1,t.priority=o[t.method]})),t.sort((function(t,e){return t.method===e.method?(t.priority||0)>(e.priority||0)?1:-1:n[t.method]>n[e.method]?-1:1})),[]),y=g(l.methods||[]);try{var h=function(){var t=u.value,e=t.method,n=t.target,o=t.type,l="";switch(e){case r.LOCAL_STORAGE:l=function(t,e){return(t=c.a.getDefault().localStorage.getItem(t,{ignoreFailure:!1}))&&f(t,e)?t:""}(n,o);break;case r.URL:p.push(function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location.href;try{t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&#]"+t+"(=([^&#?]*)|&|#|$)").exec(e);return Array.isArray(n)&&"string"==typeof n[2]&&0!==decodeURIComponent(n[2].replace(/\+/g," ")).trim().length&&Object(a.c)(decodeURIComponent(n[2].replace(/\+/g," ")))?Promise.resolve(decodeURIComponent(n[2].replace(/\+/g," "))):new Promise((function(t){return t("")}))}catch(t){return Object(i.b)(t,"retrieveUrl"),Promise.resolve("")}}(n).then((function(t){return{type:o,value:t}})));break;case r.CSS_SELECTOR:s=t}if(0<l.length)return d({value:l,type:o}),{v:void 0}};for(y.s();!(u=y.n()).done;){var v=h();if("object"===m(v))return v.v}}catch(t){y.e(t)}finally{y.f()}function j(){var t,e,n,r,o,i;s&&(!0===s.isGlobalSubmit||"string"==typeof s.eventTarget&&"string"==typeof s.event)&&(e=(t=s).eventTarget,n=t.target,r=t.type,o=t.isGlobalSubmit,"string"==typeof(i=o?"submit":s.event))&&0!==i.length?window.addEventListener(i,(function t(a){var c,s,u,l,f,p,y,m,g;s=(a={e:a,event:i,eventTarget:e,isGlobalSubmit:o,target:n,type:r,onDone:d,listener:t}).e,u=a.eventTarget,l=a.event,f=a.isGlobalSubmit,p=a.target,y=a.type,m=a.onDone,g=a.listener,f||"window"===u||s.target&&"function"==typeof s.target.matches&&"string"==typeof u&&s.target.matches(u)?(f&&s instanceof window.Event&&s.target&&(c=s.target.querySelectorAll('input[type="email"]')),b(p,y,c).then((function(t){"function"==typeof g&&window.removeEventListener(l,g),m(!(t.length<1)&&{value:t,type:y})}))):m(!1)})):d(!1)}0===p.length?j():Promise.all(p).then((function(t){var e,n=g(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(0<r.value.length)return void d(r)}}catch(t){n.e(t)}finally{n.f()}j()}))}(t,(function(e){!1!==e&&Object(a.e)({hashedRecords:[{type:e.type,record:e.value}]},void 0,void 0,"api",t.accountID)})):Object(i.b)(new Error("GDPR consent not present/valid"),"retrieveRecords"),0))||6400<e||(setTimeout(n,e),e=0===e?200:2*e)}())}catch(t){Object(i.b)(t,"retrieveRecords-retrieve")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));e=n(19);var r=n(5),o=n(20),i=n(0),a=n(1),c=n(25);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function l(t,e,n){(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function d(t){return t=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==s(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===s(t)?t:String(t)}var f=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=this,r=t;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");l(this,"_propertyConfig",void 0),l(this,"_sizesDelegate",void 0),this._propertyConfig=e,this._sizesDelegate=new c.a(null==e?void 0:e.sizes,!1,!0)}var e,n;return e=t,(n=[{key:"sizes",get:function(){return this._sizesDelegate.sizes}},{key:"validSizes",get:function(){return this._sizesDelegate.isValid()}},{key:"propertyConfig",get:function(){return this._propertyConfig}},{key:"aaxPropertyConfig",get:function(){var t={};return this.aaxSizes&&(t.s=this.aaxSizes),t}},{key:"aaxSizes",get:function(){return this._sizesDelegate.aaxSizes}},{key:"isValid",value:function(){return!Object(i.j)(this.propertyConfig)||Array.isArray(this.propertyConfig)?(Object(a.b)({name:"MultiFormatSlot-InvalidMultiFormatSlotProperty",message:"multiFormatProperty must be an object"},"MultiFormatSlotProperty-isValid",{makeVisibleToAllUsers:!0}),!1):!!this.validSizes}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function m(t){return t=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==b(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===b(t)?t:String(t)}var g=function(){function t(e){var n=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");y(this,"_multiFormatProperties",void 0),e&&Object(i.j)(e)&&!Array.isArray(e)&&(this._multiFormatProperties={},this.toMultiFormatMediaTypes(e).forEach((function(t){n._multiFormatProperties&&(n._multiFormatProperties[t]=new f(e[t]))})))}var e,n;return e=t,(n=[{key:"convertMultiFormatMediaType",value:function(t){var e;return y(e={},r.a.VIDEO,o.a.VIDEO),y(e,r.a.DISPLAY,o.a.DISPLAY),e[t]}},{key:"isMultiFormatMediaType",value:function(t){return Boolean(this.convertMultiFormatMediaType(t))}},{key:"toMultiFormatMediaTypes",value:function(t){var e=this;return Object.keys(t).filter((function(t){return e.isMultiFormatMediaType(t)}))}},{key:"multiFormatMediaTypes",get:function(){return this._multiFormatProperties?this.toMultiFormatMediaTypes(this._multiFormatProperties):[]}},{key:"aaxMultiFormatProperties",get:function(){var t,e=this;return this._multiFormatProperties?(t={},this.multiFormatMediaTypes.forEach((function(n){var r=e.convertMultiFormatMediaType(n);r&&(t[r]=null==(r=e._multiFormatProperties[n])?void 0:r.aaxPropertyConfig)})),t):{}}},{key:"isValid",value:function(){var t=this,e=!0;return this._multiFormatProperties?(this.multiFormatMediaTypes.forEach((function(n){t._multiFormatProperties[n].isValid()||(e=!1)})),e):(Object(a.b)({name:"MultiFormatSlot-InvalidMultiFormatProperties",message:"multiFormatProperties must be an object"},"MultiFormatProperties-isValid",{makeVisibleToAllUsers:!0}),!1)}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function w(t,e){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e,n){(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function _(t){return t=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return String(t);if("object"!==h(n=n.call(t,e)))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string"),"symbol"===h(t)?t:String(t)}var I=function(t){var e=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t);var n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);n=e?(n=D(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===h(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return T(r)}}(i);function i(t){var e;if(this instanceof i)return E(T(e=n.call(this,t)),"_multiFormatPropertiesDelegate",void 0),e._multiFormatPropertiesDelegate=new g(t.multiFormatProperties),e;throw new TypeError("Cannot call a class as a function")}return e=i,(t=[{key:"mediaType",get:function(){return r.a.MULTI_FORMAT}},{key:"aaxMediaType",get:function(){return o.a.MULTI_FORMAT}},{key:"aaxMultiFormatProperties",get:function(){return this._multiFormatPropertiesDelegate.aaxMultiFormatProperties}},{key:"multiFormatPropertiesIsValid",get:function(){return this._multiFormatPropertiesDelegate.isValid()}},{key:"aaxSlot",get:function(){return v(v({},S(D(i.prototype),"aaxSlot",this)),{},{id:this.slotID,sd:this.slotID,sn:this.slotName||this.slotID,mt:this.aaxMediaType,mfp:this.aaxMultiFormatProperties})}},{key:"isValid",value:function(){return S(D(i.prototype),"isValid",this).call(this)&&this.multiFormatPropertiesIsValid}}])&&j(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}(e.a)},function(t,e,n){t.exports=n(16)}]);
